{"version":3,"file":"js/945.6f53b643.js","mappings":"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","sources":["webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/error.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/errorlist.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/jsonschema.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/keywords.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/main.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/node.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/process.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/processgraph.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/registry.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/js-processgraphs/src/utils.js","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/ModelBuilder.vue?c7ea","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/Block.vue?00d9","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/BlockParameter.vue?5d1f","webpack://@openeo/processes-docgen/node_modules/@openeo/vue-components/components/model-builder/BlockParameter.vue","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/BlockParameter.vue?c62f","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/BlockParameter.vue","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/config.js","webpack://@openeo/processes-docgen/node_modules/@openeo/vue-components/components/model-builder/Block.vue","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/Block.vue?0c0a","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/Block.vue","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/Edge.vue?86a1","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/segment.js","webpack://@openeo/processes-docgen/node_modules/@openeo/vue-components/components/model-builder/Edge.vue","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/Edge.vue?9654","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/model-builder/Edge.vue","webpack://@openeo/processes-docgen/node_modules/@openeo/vue-components/components/ModelBuilder.vue","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/ModelBuilder.vue?8e67","webpack://@openeo/processes-docgen/./node_modules/@openeo/vue-components/components/ModelBuilder.vue","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/ajv.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/cache.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/async.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/error_classes.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/formats.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/index.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/resolve.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/rules.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/schema_obj.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/ucs2length.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/compile/util.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/data.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/definition_schema.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/_limit.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/_limitItems.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/_limitLength.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/_limitProperties.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/allOf.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/anyOf.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/comment.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/const.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/contains.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/custom.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/dependencies.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/enum.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/format.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/if.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/index.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/items.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/multipleOf.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/not.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/oneOf.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/pattern.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/properties.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/propertyNames.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/ref.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/required.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/uniqueItems.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/dotjs/validate.js","webpack://@openeo/processes-docgen/./node_modules/ajv/lib/keyword.js","webpack://@openeo/processes-docgen/./node_modules/fast-deep-equal/index.js","webpack://@openeo/processes-docgen/./node_modules/fast-json-stable-stringify/index.js","webpack://@openeo/processes-docgen/./node_modules/intersects/box-box.js","webpack://@openeo/processes-docgen/./node_modules/intersects/box-line.js","webpack://@openeo/processes-docgen/./node_modules/intersects/box-point.js","webpack://@openeo/processes-docgen/./node_modules/intersects/line-box.js","webpack://@openeo/processes-docgen/./node_modules/intersects/line-line.js","webpack://@openeo/processes-docgen/./node_modules/intersects/line-point.js","webpack://@openeo/processes-docgen/./node_modules/intersects/line-polygon.js","webpack://@openeo/processes-docgen/./node_modules/intersects/lineToLine.js","webpack://@openeo/processes-docgen/./node_modules/intersects/lineToPolygon.js","webpack://@openeo/processes-docgen/./node_modules/intersects/polygon-point.js","webpack://@openeo/processes-docgen/./node_modules/intersects/polygon-polygon.js","webpack://@openeo/processes-docgen/./node_modules/json-schema-traverse/index.js","webpack://@openeo/processes-docgen/./node_modules/uri-js/dist/es5/uri.all.js"],"sourcesContent":["const Utils = require('./utils');\r\n\r\nconst MESSAGES = {\r\n\t\"MultipleResultNodes\": \"Multiple result nodes specified for the process.\",\r\n\t\"StartNodeMissing\": \"No start nodes found for the process.\",\r\n\t\"ResultNodeMissing\": \"No result node found for the process.\",\r\n\t\"ReferencedNodeMissing\": \"Referenced process node '{node_id}' doesn't exist.\",\r\n\t\"NodeIdInvalid\": \"Invalid node id specified in the process.\",\r\n\t\"NodeInvalid\": \"Process node '{node_id}' is not a valid object.\",\r\n\t\"ProcessIdMissing\": \"Process node '{node_id}' doesn't contain a process id.\",\r\n\t\"ProcessGraphParameterMissing\": \"Invalid parameter '{argument}' referenced in process node '{node_id}' (process: {process_id}, namespace: {namespace}).\",\r\n\t\"ProcessUnsupported\": \"Process '{process}' (namespace: {namespace}) is not supported.\",\r\n\t\"ProcessArgumentUnsupported\": \"Process '{process}' (namespace: {namespace}) does not support the following arguments: {arguments}\",\r\n\t\"ProcessArgumentRequired\": \"Process '{process}' (namespace: {namespace}) requires argument '{argument}'.\",\r\n\t\"ProcessArgumentInvalid\": \"The argument '{argument}' in process '{process}' (namespace: {namespace}) is invalid: {reason}\",\r\n\t\"ProcessGraphMissing\": \"No process graph specified\",\r\n\t\"ProcessMissing\": \"No process specified\"\r\n};\r\n\r\n/**\r\n * An error class for this library.\r\n * \r\n * @class\r\n */\r\nclass ProcessGraphError extends Error {\r\n\r\n\tconstructor(codeOrMsg, variables = {}) {\r\n\t\tsuper();\r\n\t\tthis.variables = variables;\r\n\t\tif (typeof MESSAGES[codeOrMsg] === 'string') {\r\n\t\t\tthis.code = codeOrMsg;\r\n\t\t\tthis.message = Utils.replacePlaceholders(MESSAGES[codeOrMsg], variables);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.code = codeOrMsg.replace(/[^\\w\\d]+/g, '');\r\n\t\t\tthis.message = codeOrMsg;\r\n\t\t}\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn {\r\n\t\t\tcode: this.code,\r\n\t\t\tmessage: this.message\r\n\t\t};\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = ProcessGraphError;","/**\r\n * A list of errors.\r\n * \r\n * @class\r\n */\r\nclass ErrorList {\r\n\r\n\tconstructor() {\r\n\t\tthis.errors = [];\r\n\t}\r\n\r\n\tfirst() {\r\n\t\treturn this.errors[0] || null;\r\n\t}\r\n\r\n\tlast() {\r\n\t\treturn this.errors[this.errors.length-1] || null;\r\n\t}\r\n\r\n\tmerge(errorList) {\r\n\t\tthis.errors = this.errors.concat(errorList.getAll());\r\n\t}\r\n\t\r\n\tadd(error) {\r\n\t\tthis.errors.push(error);\r\n\t}\r\n\r\n\tcount() {\r\n\t\treturn this.errors.length;\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn this.errors.map(e => {\r\n\t\t\tif (typeof e.toJSON === 'function') {\r\n\t\t\t\treturn e.toJSON();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcode: 'InternalError',\r\n\t\t\t\t\tmessage: e.message\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetMessage() {\r\n\t\tvar msg = '';\r\n\t\tfor (var i in this.errors) {\r\n\t\t\tmsg += (parseInt(i, 10)+1) + \". \" + this.errors[i].message + \"\\r\\n\";\r\n\t\t}\r\n\t\treturn msg.trim();\r\n\t}\r\n\r\n\tgetAll() {\r\n\t\treturn this.errors;\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = ErrorList;","const Ajv = require('ajv');\r\nconst Utils = require('./utils');\r\nconst ProcessUtils = require('@openeo/js-commons/src/processUtils.js');\r\nconst keywords = require('./keywords');\r\n\r\nvar geoJsonSchema = require(\"../assets/GeoJSON.json\");\r\nvar subtypeSchemas = require(\"../assets/subtype-schemas.json\");\r\n\r\n/**\r\n * JSON Schema Validator.\r\n * \r\n * @class\r\n */\r\nclass JsonSchemaValidator {\r\n\r\n\tconstructor() {\r\n\t\tthis.ajv = new Ajv({\r\n\t\t\tschemaId: 'auto',\r\n\t\t\tformat: 'full',\r\n\t\t\taddUsedSchema: false\r\n\t\t});\r\n\t\t// Add subtype + GeoJSON schemas\r\n\t\tthis.ajv.addSchema(geoJsonSchema);\r\n\t\t// Add openEO specific keywords\r\n\t\tthis.ajv.addKeyword('parameters', Object.assign(keywords.parameters, {\r\n\t\t\tvalid: true,\r\n\t\t\terrors: true\r\n\t\t}));\r\n\t\tthis.ajv.addKeyword('returns', Object.assign(keywords.returns, {\r\n\t\t\tvalid: true,\r\n\t\t\terrors: true\r\n\t\t}));\r\n\t\tthis.ajv.addKeyword('subtype', Object.assign(keywords.subtype, {\r\n\t\t\tvalidate: async (subtype, data, schema) => await this.validateSubtype(subtype, data, schema),\r\n\t\t\tasync: true,\r\n\t\t\terrors: true\r\n\t\t}));\r\n\r\n\t\tthis.collections = null;\r\n\t\tthis.epsgCodes = null;\r\n\t\tthis.fileFormats = {\r\n\t\t\tinput: null,\r\n\t\t\toutput: null\r\n\t\t};\r\n\t\tthis.processRegistry = null;\r\n\t\tthis.udfRuntimes = null;\r\n\t}\r\n\r\n\tgetFunctionName(subtype) {\r\n\t\t// compute the function name (camelCase), e.g. for `band-name` it will be `validateBandName`\r\n\t\treturn \"validate\" + subtype.replace(/(^|\\-)(\\w)/g, (a, b, char) => char.toUpperCase());\r\n\t}\r\n\r\n\tmakeSchema(schema, $async = false) {\r\n\t\tschema = Utils.deepClone(schema);\r\n\r\n\t\t// Make array of schemas to a anyOf schema\r\n\t\tif (Array.isArray(schema)) {\r\n\t\t\tschema = {\r\n\t\t\t\tanyOf: schema\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// Set applicable JSON Schema draft version if not already set\r\n\t\tif (typeof schema.$schema === 'undefined') {\r\n\t\t\tschema.$schema = \"http://json-schema.org/draft-07/schema#\";\r\n\t\t}\r\n\r\n\t\t// Set async execution\r\n\t\tif ($async) {\r\n\t\t\tschema.$async = true;\r\n\t\t\tif (Utils.isObject(schema.definitions)) {\r\n\t\t\t\tfor(let key in schema.definitions) {\r\n\t\t\t\t\tschema.definitions[key].$async = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tasync validateValue(value, schema) {\r\n\t\tschema = this.makeSchema(schema, true);\r\n\r\n\t\ttry {\r\n\t\t\tawait this.ajv.validate(schema, value);\r\n\t\t\treturn [];\r\n\t\t} catch (e) {\r\n\t\t\tif (Array.isArray(e.errors)) {\r\n\t\t\t\treturn e.errors.map(e => e.message);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync validateSubtype(subtype, data, schema) {\r\n\t\tif (typeof subtypeSchemas.definitions[subtype] !== 'undefined') {\r\n\t\t\tschema = this.makeSchema(subtypeSchemas, true);\r\n\t\t\t// Make the schema for this subtype the default schema to be checked\r\n\t\t\tschema = Object.assign({}, subtypeSchemas.definitions[subtype], schema);\r\n\t\t\tif (subtype === 'process-graph') {\r\n\t\t\t\t// Special case: all validation will be done in validateProcessGraph()\r\n\t\t\t\tdelete schema.required;\r\n\t\t\t\tdelete schema.properties;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tschema = this.makeSchema(schema, true);\r\n\t\t}\r\n\r\n\t\t// Remove subtype to avoid recursion\r\n\t\tdelete schema.subtype;\r\n\r\n\t\tlet validated = await this.ajv.validate(schema, data);\r\n\t\tlet funcName = this.getFunctionName(subtype);\r\n\t\tif (validated && typeof this[funcName] === 'function') {\r\n\t\t\treturn await this[funcName](data);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn validated;\r\n\t\t}\r\n\t}\r\n\r\n\tsetUdfRuntimes(udfRuntimes) {\r\n\t\tif (!Utils.isObject(udfRuntimes)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.udfRuntimes = udfRuntimes;\r\n\t}\r\n\r\n\tsetCollections(collections) {\r\n\t\tif (!Array.isArray(collections)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.collections = [];\r\n\t\tfor(let c of collections) {\r\n\t\t\tif (Utils.isObject(c) && typeof c.id === 'string') {\r\n\t\t\t\tthis.collections.push(c.id);\r\n\t\t\t}\r\n\t\t\telse if (typeof c === 'string') {\r\n\t\t\t\tthis.collections.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Expects API compatible file formats (see GET /file_formats).\r\n\tsetFileFormats(fileFormats) {\r\n\t\tif (!Utils.isObject(fileFormats)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor(let io of ['input', 'output']) {\r\n\t\t\tthis.fileFormats[io] = {};\r\n\t\t\tif (!Utils.isObject(fileFormats[io])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tfor (let key in fileFormats[io]) {\r\n\t\t\t\tthis.fileFormats[io][key.toUpperCase()] = fileFormats[io][key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetEpsgCodes(epsgCodes) {\r\n\t\tif (Array.isArray(epsgCodes)) {\r\n\t\t\tthis.epsgCodes = epsgCodes.map(v => parseInt(v, 10));\r\n\t\t}\r\n\t}\r\n\r\n\tasync validateCollectionId(data) {\r\n\t\tif (Array.isArray(this.collections) && !this.collections.find(c => c === data)) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"Collection with id '\" + data + \"' doesn't exist.\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync validateUdfRuntime(data) {\r\n\t\tif (Utils.isObject(this.udfRuntimes) && !(data in this.udfRuntimes)) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"UDF runtime '\" + data + \"' is not supported.\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync validateEpsgCode(data) {\r\n\t\tif (Array.isArray(this.epsgCodes)) {\r\n\t\t\tif (this.epsgCodes.includes(data)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Rough check for valid numbers as we don't want to maintain a full epsg code list in this repo.\r\n\t\telse if (data >= 2000) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthrow new Ajv.ValidationError([{\r\n\t\t\tmessage: \"Invalid EPSG code '\" + data + \"' specified.\"\r\n\t\t}]);\r\n\t}\r\n\t\r\n\tasync validateInputFormat(data) {\r\n\t\tif (Utils.isObject(this.fileFormats.input) && !(data.toUpperCase() in this.fileFormats.input)) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"Input format  '\" + data + \"' not supported.\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tasync validateOutputFormat(data) {\r\n\t\tif (Utils.isObject(this.fileFormats.output) && !(data.toUpperCase() in this.fileFormats.output)) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"Output format  '\" + data + \"' not supported.\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync validateProjDefinition(data) {\r\n\t\t// To be overridden by end-user application, just doing a very basic check here.\r\n\t\tif (!data.toLowerCase().includes(\"+proj\")) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"Invalid PROJ string specified (doesn't contain '+proj').\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync validateWkt2Definition(data) {\r\n\t\t// To be overridden by end-user application, just doing a very basic check here based on code ported over from proj4js\r\n\t\tvar codeWords = [\r\n\t\t\t'BOUNDCRS',\r\n\t\t\t'COMPOUNDCRS',\r\n\t\t\t'ENGCRS', 'ENGINEERINGCRS',\r\n\t\t\t'GEODCRS', 'GEODETICCRS',\r\n\t\t\t'GEOGCRS', 'GEOGRAPHICCRS',\r\n\t\t\t'PARAMETRICCRS',\r\n\t\t\t'PROJCRS', 'PROJECTEDCRS',\r\n\t\t\t'TIMECRS',\r\n\t\t\t'VERTCRS', 'VERTICALCRS'\r\n\t\t];\r\n\t\tdata = data.toUpperCase();\r\n\t\tif (!codeWords.some(word => data.indexOf(word) !== -1)) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"Invalid WKT2 string specified.\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync validateTemporalInterval(data) {\r\n\t\tif (data[0] === null && data[1] === null) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: \"Temporal interval must not be open on both ends.\"\r\n\t\t\t}]);\r\n\t\t}\r\n\t\telse if (data[0] !== null && data[1] !== null) {\r\n\t\t\tlet date1 = new Date(data[0]);\r\n\t\t\tlet date2 = new Date(data[1]);\r\n\t\t\tif (date2.getTime() < date1.getTime()) {\r\n\t\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\t\tmessage: \"The second timestamp can't be before the first timestamp.\"\r\n\t\t\t\t}]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tasync validateTemporalIntervals(data) {\r\n\t\tfor(let interval of data) {\r\n\t\t\t// throws if invalid\r\n\t\t\tawait this.validateTemporalInterval(interval);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tsetProcessGraphParser(processGraph) {\r\n\t\tthis.processGraph = processGraph;\r\n\t}\r\n\r\n\tasync validateProcessGraph(data) {\r\n\t\ttry {\r\n\t\t\tconst ProcessGraph = require('./processgraph');\r\n\t\t\tvar parser;\r\n\t\t\tif (data instanceof ProcessGraph) {\r\n\t\t\t\tparser = data;\r\n\t\t\t}\r\n\t\t\telse if (this.processGraph) {\r\n\t\t\t\tparser = this.processGraph.createProcessGraphInstance(data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tparser = new ProcessGraph(data, null, this);\r\n\t\t\t}\r\n\t\t\tawait parser.validate();\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tthrow new Ajv.ValidationError([{\r\n\t\t\t\tmessage: error.message\r\n\t\t\t}]);\r\n\t\t}\r\n\t}\r\n\r\n\t// Checks whether the valueSchema is compatible to the paramSchema.\r\n\t// So would a value compatible with valueSchema be accepted by paramSchema?\r\n\t// allowValueAsElements: If true, it checks whether the valueSchema would be allowed as part of an array or object. For example number could be allowed as part of an array of numbers.\r\n\tstatic isSchemaCompatible(paramSchema, valueSchema, strict = false, allowValueAsElements = false) {\r\n\t\tvar paramSchemas = ProcessUtils.normalizeJsonSchema(paramSchema, true);\r\n\t\tvar valueSchemas = ProcessUtils.normalizeJsonSchema(valueSchema, true);\r\n\r\n\t\tvar compatible = paramSchemas.findIndex(ps => {\r\n\t\t\tfor(var i in valueSchemas) {\r\n\t\t\t\tvar vs = valueSchemas[i];\r\n\t\t\t\tif (typeof ps.type !== 'string' || (!strict && typeof vs.type !== 'string')) { // \"any\" type is always compatible\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\telse if (ps.type === vs.type || (allowValueAsElements && (ps.type === 'array' || ps.type === 'object')) || (ps.type === 'number' && vs.type === 'integer') || (!strict && ps.type === 'integer' && vs.type === 'number')) {\r\n\t\t\t\t\tif (ps.type === 'array' && Utils.isObject(ps.items) && Utils.isObject(vs.items))  {\r\n\t\t\t\t\t\tif (allowValueAsElements && JsonSchemaValidator.isSchemaCompatible(ps.items, vs, strict)) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (JsonSchemaValidator.isSchemaCompatible(ps.items, vs.items, strict)) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (ps.type === 'object' && Utils.isObject(ps.properties) && Utils.isObject(vs.properties)) {\r\n\t\t\t\t\t\t// ToDo: Check properties, required properties etc.\r\n\t\t\t\t\t\t// If allowValueAsElements is true, all types are allowed to be part of the object.\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Check subtypes\r\n\t\t\t\t\telse if (!strict && (typeof ps.subtype !== 'string' || typeof vs.subtype !== 'string')) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof ps.subtype !== 'string') { // types without subtype always accepts the same type with a subtype\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (ps.subtype === vs.subtype) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\treturn compatible !== -1;\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = JsonSchemaValidator;","module.exports = {\r\n\tsubtype: {\r\n\t\tmetaSchema: {\r\n\t\t\ttype: \"string\"\r\n\t\t}\r\n\t},\r\n\tparameters: {\r\n\t\tdependencies: [\r\n\t\t\t\"subtype\"\r\n\t\t],\r\n\t\tmetaSchema: {\r\n\t\t\ttype: \"array\",\r\n\t\t\titems: {\r\n\t\t\t\ttype: \"object\",\r\n\t\t\t\trequired: [\r\n\t\t\t\t\t\"name\",\r\n\t\t\t\t\t\"description\",\r\n\t\t\t\t\t\"schema\"\r\n\t\t\t\t],\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\tname: {\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\tpattern: \"^\\\\w+$\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdescription: {\r\n\t\t\t\t\t\ttype: \"string\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\toptional: {\r\n\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\tdefault: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdeprecated: {\r\n\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\tdefault: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\texperimental: {\r\n\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\tdefault: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t// Any type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tschema: {\r\n\t\t\t\t\t\toneOf: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"$ref\": \"http://json-schema.org/draft-07/schema\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttype: \"array\",\r\n\t\t\t\t\t\t\t\titems: {\r\n\t\t\t\t\t\t\t\t\t\"$ref\": \"http://json-schema.org/draft-07/schema\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\treturns: {\r\n\t\tdependencies: [\r\n\t\t\t\"subtype\"\r\n\t\t],\r\n\t\tmetaSchema: {\r\n\t\t\ttype: \"object\",\r\n\t\t\trequired: [\r\n\t\t\t\t\"schema\"\r\n\t\t\t],\r\n\t\t\tproperties: {\r\n\t\t\t\tdescription: {\r\n\t\t\t\t\ttype: \"string\"\r\n\t\t\t\t},\r\n\t\t\t\tschema: {\r\n\t\t\t\t\toneOf: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"$ref\": \"http://json-schema.org/draft-07/schema\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype: \"array\",\r\n\t\t\t\t\t\t\titems: {\r\n\t\t\t\t\t\t\t\t\"$ref\": \"http://json-schema.org/draft-07/schema\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};","const BaseProcess = require('./process');\r\nconst ErrorList = require('./errorlist');\r\nconst JsonSchemaValidator = require('./jsonschema');\r\nconst ProcessGraph = require('./processgraph');\r\nconst ProcessGraphError = require('./error');\r\nconst ProcessGraphNode = require('./node');\r\nconst ProcessRegistry = require('./registry');\r\nconst Utils = require('./utils');\r\n\r\nmodule.exports = {\r\n\tBaseProcess,\r\n\tErrorList,\r\n\tJsonSchemaValidator,\r\n\tProcessGraph,\r\n\tProcessGraphError,\r\n\tProcessGraphNode,\r\n\tProcessRegistry,\r\n\tUtils\r\n};","const ProcessGraphError = require('./error');\r\nconst Utils = require('./utils');\r\n\r\n/**\r\n * A Process graph node.\r\n * \r\n * @class\r\n */\r\nclass ProcessGraphNode {\r\n\r\n\tconstructor(node, id, parent = null) {\r\n\t\tif (typeof id !== 'string' || id.length === 0) {\r\n\t\t\tthrow new ProcessGraphError('NodeIdInvalid');\r\n\t\t}\r\n\t\tif (!Utils.isObject(node)) {\r\n\t\t\tthrow new ProcessGraphError('NodeInvalid', {node_id: id});\r\n\t\t}\r\n\t\tif (typeof node.process_id !== 'string') {\r\n\t\t\tthrow new ProcessGraphError('ProcessIdMissing', {node_id: id});\r\n\t\t}\r\n\r\n\t\tthis.id = id;\r\n\t\tthis.processGraph = parent;\r\n\t\tthis.source = node;\r\n\t\tthis.process_id = node.process_id;\r\n\t\tthis.namespace = node.namespace || null;\r\n\t\tthis.arguments = Utils.isObject(node.arguments) ? Utils.deepClone(node.arguments) : {};\r\n\t\tthis.description = node.description || null;\r\n\t\tthis.isResultNode = node.result || false;\r\n\t\tthis.expectsFrom = []; // From which node do we expect results from\r\n\t\tthis.receivedFrom = []; // From which node have received results from so far\r\n\t\tthis.passesTo = [];\r\n\t\tthis.computedResult = undefined;\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\tlet args = Utils.mapObjectValues(this.arguments, arg => Utils.isObject(arg) && typeof arg.toJSON === 'function' ? arg.toJSON() : arg);\r\n\t\treturn Object.assign({}, this.source, {\r\n\t\t\tprocess_id: this.process_id,\r\n\t\t\tnamespace: this.namespace,\r\n\t\t\tdescription: this.description,\r\n\t\t\targuments: args,\r\n\t\t\tresult: this.isResultNode\r\n\t\t});\r\n\t}\r\n\r\n\tgetProcessGraph() {\r\n\t\treturn this.processGraph;\r\n\t}\r\n\r\n\tgetParent() {\r\n\t\tif (this.processGraph !== null) {\r\n\t\t\treturn this.processGraph.getParentNode();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tgetArgumentNames() {\r\n\t\treturn Object.keys(this.arguments);\r\n\t}\r\n\r\n\thasArgument(name) {\r\n\t\treturn typeof this.arguments[name] !== 'undefined';\r\n\t}\r\n\r\n\tgetArgumentType(name) {\r\n\t\treturn Utils.getType(this.getRawArgument(name));\r\n\t}\r\n\r\n\tgetRawArgument(name) {\r\n\t\treturn Utils.isObject(this.source.arguments) ? this.source.arguments[name] : undefined;\r\n\t}\r\n\r\n\tgetParsedArgument(name) {\r\n\t\treturn this.arguments[name];\r\n\t}\r\n\r\n\tgetArgument(name, defaultValue = undefined) {\r\n\t\tif (typeof this.arguments[name] === 'undefined') {\r\n\t\t\treturn defaultValue;\r\n\t\t}\r\n\t\treturn this.evaluateArgument(this.arguments[name]);\r\n\t}\r\n\r\n\tgetArgumentRefs(name) {\r\n\t\treturn Utils.getRefs(this.getRawArgument(name), false);\r\n\t}\r\n\r\n\tgetRefs() {\r\n\t\treturn Utils.getRefs(this.source.arguments, false);\r\n\t}\r\n\r\n\tgetProcessGraphParameterValue(name) {\r\n\t\t// 1. Check local parameter, then check parents\r\n\t\t// 2. Check parents\r\n\t\t// 3. Try to get default value\r\n\t\t// 4. Fail if no value is available\r\n\t\tlet defaultValue;\r\n\t\tlet pg = this.processGraph;\r\n\t\tdo {\r\n\t\t\tif (pg.hasArgument(name)) {\r\n\t\t\t\treturn pg.getArgument(name);\r\n\t\t\t}\r\n\t\t\tif (pg.hasParameterDefault(name)) {\r\n\t\t\t\tdefaultValue = pg.getParameterDefault(name);\r\n\t\t\t}\r\n\t\t\tpg = pg.getParent();\r\n\t\t} while (pg !== null);\r\n\r\n\t\tif (typeof defaultValue !== 'undefined') {\r\n\t\t\treturn defaultValue;\r\n\t\t}\r\n\r\n\t\tif (!this.processGraph.allowUndefinedParameterRefs) {\r\n\t\t\tthrow new ProcessGraphError('ProcessGraphParameterMissing', {\r\n\t\t\t\targument: name,\r\n\t\t\t\tnode_id: this.id,\r\n\t\t\t\tprocess_id: this.process_id,\r\n\t\t\t\tnamespace: this.namespace || 'n/a'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tevaluateArgument(arg) {\r\n\t\tvar type = Utils.getType(arg);\r\n\t\tswitch(type) {\r\n\t\t\tcase 'result':\r\n\t\t\t\treturn this.processGraph.getNode(arg.from_node).getResult();\r\n\t\t\tcase 'callback':\r\n\t\t\t\treturn arg;\r\n\t\t\tcase 'parameter':\r\n\t\t\t\treturn this.getProcessGraphParameterValue(arg.from_parameter);\r\n\t\t\tcase 'array':\r\n\t\t\tcase 'object':\r\n\t\t\t\tlet copy = type === 'array' ? [] : {};\r\n\t\t\t\tfor(var i in arg) {\r\n\t\t\t\t\tcopy[i] = this.evaluateArgument(arg[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn copy;\r\n\t\t\tdefault:\r\n\t\t\t\treturn arg;\r\n\t\t}\r\n\t}\r\n\r\n\tisStartNode() {\r\n\t\treturn (this.expectsFrom.length === 0);\r\n\t}\r\n\r\n\taddPreviousNode(node) {\r\n\t\tif (!this.expectsFrom.find(other => other.id === node.id)) {\r\n\t\t\tthis.expectsFrom.push(node);\r\n\t\t}\r\n\t}\r\n\r\n\tgetPreviousNodes() {\r\n\t\t// Sort nodes to ensure a consistent execution order\r\n\t\treturn this.expectsFrom.sort((a,b) => a.id.localeCompare(b.id));\r\n\t}\r\n\r\n\taddNextNode(node) {\r\n\t\tif (!this.passesTo.find(other => other.id === node.id)) {\r\n\t\t\tthis.passesTo.push(node);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextNodes() {\r\n\t\t// Sort nodes to ensure a consistent execution order\r\n\t\treturn this.passesTo.sort((a,b) => a.id.localeCompare(b.id));\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.computedResult = undefined;\r\n\t\tthis.receivedFrom = [];\r\n\t}\r\n\r\n\tgetDescription() {\r\n\t\treturn this.description;\r\n\t}\r\n\r\n\tsetDescription(description) {\r\n\t\tif (typeof description === 'string') {\r\n\t\t\tthis.description = description;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.description = null;\r\n\t\t}\r\n\t}\r\n\r\n\tsetResult(result) {\r\n\t\tthis.computedResult = result;\r\n\t}\r\n\r\n\tgetResult() {\r\n\t\treturn this.computedResult;\r\n\t}\r\n\r\n\tsolveDependency(dependencyNode) {\r\n\t\tif (dependencyNode !== null && this.expectsFrom.includes(dependencyNode)) {\r\n\t\t\tthis.receivedFrom.push(dependencyNode);\r\n\t\t}\r\n\t\treturn (this.expectsFrom.length === this.receivedFrom.length); // all dependencies solved?\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = ProcessGraphNode;","const JsonSchemaValidator = require('./jsonschema');\r\nconst ProcessGraphError = require('./error');\r\nconst ProcessUtils = require('@openeo/js-commons/src/processUtils');\r\nconst Utils = require('./utils');\r\n\r\n/**\r\n * Base Process class\r\n * \r\n * @class\r\n */\r\nclass BaseProcess {\r\n\r\n\tconstructor(spec) {\r\n\t\t// Make properties easily accessible \r\n\t\tObject.assign(this, spec);\r\n\r\n\t\tif (typeof this.id !== 'string') {\r\n\t\t\tthrow new Error(\"Invalid process specified, no id given.\");\r\n\t\t}\r\n\t\tif (!Array.isArray(this.parameters)) {\r\n\t\t\tthis.parameters = [];\r\n\t\t}\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn Utils.omitFromObject(this, [\"validate\", \"validateArgument\", \"execute\", \"test\"]);\r\n\t}\r\n\r\n\tasync validate(node) {\r\n\t\t// Check for arguments we don't support and throw error\r\n\t\tlet unsupportedArgs = node.getArgumentNames().filter(name => this.parameters.findIndex(p => p.name === name) === -1);\r\n\t\tif (unsupportedArgs.length > 0) {\r\n\t\t\tthrow new ProcessGraphError('ProcessArgumentUnsupported', {\r\n\t\t\t\tprocess: this.id,\r\n\t\t\t\tnamespace: this.namespace || 'n/a',\r\n\t\t\t\targuments: unsupportedArgs\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Validate against JSON Schema\r\n\t\tfor(let key in this.parameters) {\r\n\t\t\tlet param = this.parameters[key];\r\n\r\n\t\t\tif (!node.hasArgument(param.name)) {\r\n\t\t\t\tif (!param.optional) {\r\n\t\t\t\t\tthrow new ProcessGraphError('ProcessArgumentRequired', {\r\n\t\t\t\t\t\tprocess: this.id,\r\n\t\t\t\t\t\tnamespace: this.namespace || 'n/a',\r\n\t\t\t\t\t\targument: param.name\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet arg = node.getParsedArgument(param.name);\r\n\t\t\tlet rawArg = node.getRawArgument(param.name);\r\n\t\t\tawait this.validateArgument(arg, rawArg, node, param);\r\n\t\t}\r\n\t}\r\n\r\n\tasync validateArgument(arg, rawArg, node, param, path = null) {\r\n\t\tif (!path) {\r\n\t\t\tpath = param.name;\r\n\t\t}\r\n\t\tlet argType = Utils.getType(arg);\r\n\t\tlet pg = node.getProcessGraph();\r\n\t\tswitch(argType) {\r\n\t\t\tcase 'parameter':\r\n\t\t\t\t// Validate callback parameters (no value available yet)\r\n\t\t\t\tlet callbackParam = pg.getCallbackParameter(arg.from_parameter);\r\n\t\t\t\tif (callbackParam) {\r\n\t\t\t\t\tif (!JsonSchemaValidator.isSchemaCompatible(param.schema, callbackParam.schema)) {\r\n\t\t\t\t\t\tthrow new ProcessGraphError('ProcessArgumentInvalid', {\r\n\t\t\t\t\t\t\tprocess: this.id,\r\n\t\t\t\t\t\t\tnamespace: this.namespace || 'n/a',\r\n\t\t\t\t\t\t\targument: path,\r\n\t\t\t\t\t\t\treason: \"Schema for parameter '\" + arg.from_parameter + \"' not compatible with reference\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Validate all other parameters (value must be available if allowUndefinedParameterRefs is false)\r\n\t\t\t\tlet value = node.getProcessGraphParameterValue(arg.from_parameter);\r\n\t\t\t\tif (typeof value === 'undefined' && !pg.allowUndefinedParameterRefs) {\r\n\t\t\t\t\tthrow new ProcessGraphError('ProcessGraphParameterMissing', {\r\n\t\t\t\t\t\targument: arg.from_parameter,\r\n\t\t\t\t\t\tnode_id: node.id,\r\n\t\t\t\t\t\tprocess_id: node.process_id,\r\n\t\t\t\t\t\tnamespace: node.namespace || 'n/a'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet parameter = pg.getProcessParameter(arg.from_parameter);\r\n\t\t\t\tif (Utils.isObject(parameter) && parameter.schema) {\r\n\t\t\t\t\tif (typeof value !== 'undefined') {\r\n\t\t\t\t\t\tawait this.validateArgument(value, rawArg, node, parameter, path);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!JsonSchemaValidator.isSchemaCompatible(param.schema, parameter.schema)) {\r\n\t\t\t\t\t\tthrow new ProcessGraphError('ProcessArgumentInvalid', {\r\n\t\t\t\t\t\t\tprocess: this.id,\r\n\t\t\t\t\t\t\tnamespace: this.namespace || 'n/a',\r\n\t\t\t\t\t\t\targument: path,\r\n\t\t\t\t\t\t\treason: \"Schema for parameter '\" + arg.from_parameter + \"' not compatible\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else: Parameter not available, everything is valid\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'result':\r\n\t\t\t\tlet resultNode = pg.getNode(arg.from_node);\r\n\t\t\t\tlet process = pg.getProcess(resultNode);\r\n\t\t\t\tif (!JsonSchemaValidator.isSchemaCompatible(param.schema, process.returns.schema)) {\r\n\t\t\t\t\tthrow new ProcessGraphError('ProcessArgumentInvalid', {\r\n\t\t\t\t\t\tprocess: this.id,\r\n\t\t\t\t\t\tnamespace: this.namespace || 'n/a',\r\n\t\t\t\t\t\targument: path,\r\n\t\t\t\t\t\treason: \"Schema for result '\" + arg.from_node + \"' not compatible\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'array':\r\n\t\t\tcase 'object':\r\n\t\t\t\tlet schemas = ProcessUtils.normalizeJsonSchema(param.schema).filter(schema => ['array', 'object'].includes(schema.type));\r\n\t\t\t\t// Check if it is expected to be a process. If yes, do normal validation. Handles the issue discussed in https://github.com/Open-EO/openeo-js-processgraphs/issues/4\r\n\t\t\t\tlet isProcessGraphSchema = (schemas.length === 1 && schemas[0].subtype === 'process-graph');\r\n\t\t\t\tif (Utils.containsRef(rawArg) && !isProcessGraphSchema) {\r\n\t\t\t\t\t// This tries to at least be compliant to one of the element schemas\r\n\t\t\t\t\t// It's better than validating nothing, but it's still not 100% correct\r\n\t\t\t\t\tfor(var key in arg) {\r\n\t\t\t\t\t\tlet elementSchema = schemas.map(schema =>  ProcessUtils.getElementJsonSchema(schema, key)).filter(schema => Object.keys(schema).length); // jshint ignore:line\r\n\t\t\t\t\t\tif (elementSchema.length > 0) {\r\n\t\t\t\t\t\t\tlet validated = 0;\r\n\t\t\t\t\t\t\tlet lastError = null;\r\n\t\t\t\t\t\t\tfor(let schema of elementSchema) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t// ToDo: Check against JSON schema required property\r\n\t\t\t\t\t\t\t\t\tawait this.validateArgument(arg[key], rawArg[key], node, {schema}, path + '/' + key);\r\n\t\t\t\t\t\t\t\t\tvalidated++;\r\n\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\tlastError = error;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (validated === 0 && lastError) {\r\n\t\t\t\t\t\t\t\tthrow lastError;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Use default behavior below, so no break; needed\r\n\t\t\t\t} // jshint ignore:line\r\n\t\t\tdefault:\r\n\t\t\t\tlet validator = node.getProcessGraph().getJsonSchemaValidator();\r\n\t\t\t\t// Validate against JSON schema\r\n\t\t\t\tlet errors = await validator.validateValue(arg, param.schema);\r\n\t\t\t\tif (errors.length > 0) {\r\n\t\t\t\t\tthrow new ProcessGraphError('ProcessArgumentInvalid', {\r\n\t\t\t\t\t\tprocess: this.id,\r\n\t\t\t\t\t\tnamespace: this.namespace || 'n/a',\r\n\t\t\t\t\t\targument: path,\r\n\t\t\t\t\t\treason: errors\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* istanbul ignore next */\r\n\tasync execute(/*node*/) {\r\n\t\tthrow new Error(`execute not implemented yet for process '${this.id}' (namespace: ${this.namespace || 'n/a'})`);\r\n\t}\r\n\r\n\t/* istanbul ignore next */\r\n\ttest() {\r\n\t\t// Run the tests from the examples\r\n\t\tthrow new Error(`test not implemented yet for process '${this.id}' (namespace: ${this.namespace || 'n/a'})`);\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports =  BaseProcess;","const BaseProcess = require('./process');\r\nconst ErrorList = require('./errorlist');\r\nconst JsonSchemaValidator = require('./jsonschema');\r\nconst ProcessGraphError = require('./error');\r\nconst ProcessGraphNode = require('./node');\r\nconst Utils = require('./utils');\r\nconst ProcessUtils = require('@openeo/js-commons/src/processUtils.js');\r\n\r\nconst processKeys = [\r\n\t'id',\r\n\t'summary',\r\n\t'description',\r\n\t'categories',\r\n\t'parameters',\r\n\t'returns',\r\n\t'deprecated',\r\n\t'experimental',\r\n\t'exceptions',\r\n\t'examples',\r\n\t'links',\r\n\t'process_graph'\r\n];\r\n\r\n/**\r\n * Process parser, validator and executor.\r\n * \r\n * @class\r\n */\r\nclass ProcessGraph {\r\n\r\n\t// ToDo: Also parse and validate other parts of the process, e.g. id, parameters, etc.\r\n\r\n\tconstructor(process, processRegistry = null, jsonSchemaValidator = null) {\r\n\t\tthis.process = process;\r\n\t\tthis.nodes = {};\r\n\t\tthis.startNodes = [];\r\n\t\tthis.resultNode = null;\r\n\t\tthis.children = [];\r\n\t\tthis.parentNode = null;\r\n\t\tthis.parsed = false;\r\n\t\tthis.validated = false;\r\n\t\tthis.errors = new ErrorList();\r\n\t\tthis.callbackParameters = [];\r\n\t\t// Sub process graphs need to copy these:\r\n\t\tthis.processRegistry = processRegistry;\r\n\t\tthis.jsonSchemaValidator = jsonSchemaValidator;\r\n\t\tthis.arguments = {};\r\n\t\tthis.allowEmptyGraph = false;\r\n\t\tthis.fillProcessParameters = false;\r\n\t\tthis.allowUndefinedParameterRefs = true;\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn this.process;\r\n\t}\r\n\r\n\tgetJsonSchemaValidator() {\r\n\t\tif (this.jsonSchemaValidator === null) {\r\n\t\t\tthis.jsonSchemaValidator = this.createJsonSchemaValidatorInstance();\r\n\t\t}\r\n\t\tthis.jsonSchemaValidator.setProcessGraphParser(this);\r\n\t\treturn this.jsonSchemaValidator;\r\n\t}\r\n\r\n\tcreateJsonSchemaValidatorInstance() {\r\n\t\treturn new JsonSchemaValidator();\r\n\t}\r\n\r\n\tcreateNodeInstance(nodeObj, id, parent) {\r\n\t\treturn new ProcessGraphNode(nodeObj, id, parent);\r\n\t}\r\n\r\n\tcreateProcessGraphInstance(process) {\r\n\t\tlet pg = new ProcessGraph(process, this.processRegistry, this.getJsonSchemaValidator());\r\n\t\treturn this.copyProcessGraphInstanceProperties(pg);\r\n\t}\r\n\r\n\tcreateProcessInstance(process) {\r\n\t\treturn new BaseProcess(process);\r\n\t}\r\n\r\n\tcopyProcessGraphInstanceProperties(pg) {\r\n\t\tpg.allowEmptyGraph = this.allowEmptyGraph;\r\n\t\tpg.fillProcessParameters = this.fillProcessParameters;\r\n\t\tpg.allowUndefinedParameterRefs = this.allowUndefinedParameterRefs;\r\n\t\treturn pg;\r\n\t}\r\n\r\n\tcreateChildProcessGraph(process, node, parameterPath = []) {\r\n\t\tvar pg = this.createProcessGraphInstance(process);\r\n\t\tpg.setArguments(this.arguments);\r\n\t\tpg.setParentNode(node);\r\n\t\tif (parameterPath.length > 0) {\r\n\t\t\tlet parameterName = parameterPath.shift();\r\n\t\t\tpg.setCallbackParameters(ProcessUtils.getCallbackParametersForProcess(pg.getParentProcess(), parameterName, parameterPath));\r\n\t\t}\r\n\t\tpg.parse();\r\n\t\tthis.children.push(pg);\r\n\t\treturn pg;\r\n\t}\r\n\r\n\tgetParentNode() {\r\n\t\treturn this.parentNode;\r\n\t}\r\n\r\n\tgetParent() {\r\n\t\tif (this.parentNode) {\r\n\t\t\treturn this.parentNode.getProcessGraph();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tsetParentNode(parent) {\r\n\t\tif (parent instanceof ProcessGraphNode) {\r\n\t\t\tthis.parentNode = parent;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.parentNode = null;\r\n\t\t}\r\n\t}\r\n\r\n\tisValid() {\r\n\t\treturn this.validated && this.errors.count() === 0;\r\n\t}\r\n\r\n\taddError(error) {\r\n\t\tthis.errors.add(error);\r\n\t}\r\n\r\n\tallowUndefinedParameters(allow = true) {\r\n\t\tif (!allow) {\r\n\t\t\tthis.fillProcessParameters = false;\r\n\t\t}\r\n\t\tthis.allowUndefinedParameterRefs = allow;\r\n\t}\r\n\r\n\tfillUndefinedParameters(fill = true) {\r\n\t\tif (fill) {\r\n\t\t\tthis.allowUndefinedParameterRefs = true;\r\n\t\t}\r\n\t\tthis.fillProcessParameters = fill;\r\n\t}\r\n\r\n\tallowEmpty(allow = true) {\r\n\t\tthis.allowEmptyGraph = allow;\r\n\t}\r\n\r\n\tparse() {\r\n\t\tif (this.parsed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst makeError = (errorId) => {\r\n\t\t\tif (this.getParentProcessId()) {\r\n\t\t\t\treturn new ProcessGraphError(\r\n\t\t\t\t\terrorId + 'Callback',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprocess_id: this.getParentProcessId(),\r\n\t\t\t\t\t\tnode_id: this.parentNode ? this.parentNode.id : 'N/A'\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn new ProcessGraphError(errorId);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (!Utils.isObject(this.process)) {\r\n\t\t\tthrow makeError('ProcessMissing');\r\n\t\t}\r\n\r\n\t\tif (Utils.size(this.process.process_graph) === 0) {\r\n\t\t\tif (this.allowEmptyGraph) {\r\n\t\t\t\tlet hasProcessKey = Object.keys(this.process).find(key => processKeys.includes(key));\r\n\t\t\t\tif (Utils.size(this.process) === 0 || hasProcessKey) {\r\n\t\t\t\t\tthis.parsed = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthrow makeError('ProcessGraphMissing');\r\n\t\t}\r\n\r\n\t\tthis.nodes = Utils.mapObjectValues(this.process.process_graph, (pg, id) => this.createNodeInstance(pg, id, this));\r\n\r\n\t\tfor(let id in this.nodes) {\r\n\t\t\tvar node = this.nodes[id];\r\n\t\t\tif (node.isResultNode) {\r\n\t\t\t\tif (this.resultNode !== null) {\r\n\t\t\t\t\tthrow makeError('MultipleResultNodes');\r\n\t\t\t\t}\r\n\t\t\t\tthis.resultNode = node;\r\n\t\t\t}\r\n\r\n\t\t\tthis.parseNodeArguments(id, node);\r\n\t\t}\r\n\t\tif (this.resultNode === null) {\r\n\t\t\tthrow makeError('ResultNodeMissing');\r\n\t\t}\r\n\r\n\t\t// Find/Cache start nodes, only possible after parseNodeArguments have been called for all nodes\r\n\t\t// Sort nodes to ensure a consistent execution order\r\n\t\tthis.startNodes = Object.values(this.nodes).filter(node => node.isStartNode()).sort((a,b) => a.id.localeCompare(b.id));\r\n\t\tif (this.startNodes.length === 0) {\r\n\t\t\tthrow makeError('StartNodeMissing');\r\n\t\t}\r\n\r\n\t\tthis.parsed = true;\r\n\t}\r\n\r\n\tasync validate(throwOnErrors = true) {\r\n\t\tif (this.validated) {\r\n\t\t\tif (throwOnErrors && this.errors.count() > 0) {\r\n\t\t\t\tthrow this.errors.first();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn this.errors;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.validated = true;\r\n\r\n\t\t// Parse\r\n\t\ttry {\r\n\t\t\tthis.parse();\r\n\t\t} catch (error) {\r\n\t\t\tthis.addError(error);\r\n\t\t\tif (throwOnErrors) {\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Validate\r\n\t\tawait this.validateNodes(this.getStartNodes(), throwOnErrors);\r\n\t\treturn this.errors;\r\n\t}\r\n\r\n\tasync execute(args = null) {\r\n\t\tthis.allowUndefinedParameters(false);\r\n\t\tthis.setArguments(args);\r\n\t\tawait this.validate();\r\n\t\tthis.reset();\r\n\t\tawait this.executeNodes(this.getStartNodes());\r\n\t\treturn this.getResultNode();\r\n\t}\r\n\r\n\tasync validateNodes(nodes, throwOnErrors, previousNode = null) {\r\n\t\tif (nodes.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar promises = nodes.map(async (node) => {\r\n\t\t\t// Validate this node after all dependencies are available\r\n\t\t\tif (!node.solveDependency(previousNode)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Get process and validate\r\n\t\t\ttry {\r\n\t\t\t\tawait this.validateNode(node);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (e instanceof ErrorList) {\r\n\t\t\t\t\tthis.errors.merge(e);\r\n\t\t\t\t\tif (throwOnErrors) {\r\n\t\t\t\t\t\tthrow e.first();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.addError(e);\r\n\t\t\t\t\tif (throwOnErrors) {\r\n\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait this.validateNodes(node.getNextNodes(), throwOnErrors, node);\r\n\t\t});\r\n\r\n\t\tawait Promise.all(promises);\r\n\t}\r\n\r\n\tasync validateNode(node) {\r\n\t\tvar process = this.getProcess(node);\r\n\t\tif (process) {\r\n\t\t\treturn await process.validate(node);\r\n\t\t}\r\n\t}\r\n\r\n\tasync executeNodes(nodes, previousNode = null) {\r\n\t\tif (nodes.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar promises = nodes.map(async (node) => {\r\n\t\t\t// Execute this node after all dependencies are available\r\n\t\t\tif (!node.solveDependency(previousNode)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar result = await this.executeNode(node);\r\n\t\t\tnode.setResult(result);\r\n\r\n\t\t\t// Execute next nodes in chain\r\n\t\t\tawait this.executeNodes(node.getNextNodes(), node);\r\n\r\n\t\t});\r\n\r\n\t\treturn await Promise.all(promises);\r\n\t}\r\n\r\n\tasync executeNode(node) {\r\n\t\tvar process = this.getProcess(node);\r\n\t\treturn await process.execute(node);\r\n\t}\r\n\r\n\tparseNodeArguments(nodeId, node, parameterPath = [], args = undefined) {\r\n\t\tif (typeof args === 'undefined') {\r\n\t\t\targs = node.arguments;\r\n\t\t}\r\n\t\tfor(let argumentName in args) {\r\n\t\t\tlet arg = args[argumentName];\r\n\t\t\t// Make a \"path\" that consists of the parameter name and the keys of arrays/objects, if applicable.\r\n\t\t\tlet path = parameterPath.concat([argumentName]);\r\n\t\t\tlet type = Utils.getType(arg);\r\n\t\t\tswitch(type) {\r\n\t\t\t\tcase 'result':\r\n\t\t\t\t\t// Connect the nodes with each other\r\n\t\t\t\t\tvar prevNode = this.nodes[arg.from_node];\r\n\t\t\t\t\tif (typeof prevNode === 'undefined') {\r\n\t\t\t\t\t\tthrow new ProcessGraphError('ReferencedNodeMissing', {node_id: arg.from_node});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.addPreviousNode(prevNode);\r\n\t\t\t\t\tprevNode.addNextNode(node);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'callback':\r\n\t\t\t\t\t// Create a new process graph for the callback\r\n\t\t\t\t\targs[argumentName] = this.createChildProcessGraph(arg, node, path);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'parameter':\r\n\t\t\t\t\t// If we found a parameter and it's not defined yet (includes that it's not a callback parameter) and fillProcessParameters is set to true: Add it to the process spec.\r\n\t\t\t\t\tif (this.fillProcessParameters && !this.hasParameter(arg.from_parameter)) {\r\n\t\t\t\t\t\tthis.addProcessParameter(arg.from_parameter);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'array':\r\n\t\t\t\tcase 'object':\r\n\t\t\t\t\t// Parse everything hidden in arrays and objects\r\n\t\t\t\t\tthis.parseNodeArguments(nodeId, node, path, arg);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetCallbackParameters(parameters) {\r\n\t\tthis.callbackParameters = parameters;\r\n\t}\r\n\r\n\tgetCallbackParameter(name) {\r\n\t\treturn this.getCallbackParameters().find(p => p.name === name) || null;\r\n\t}\r\n\r\n\tgetCallbackParameters() {\t\t\r\n\t\treturn this.callbackParameters;\r\n\t}\r\n\r\n\taddProcessParameter(name, description = '', schema = {}) {\r\n\t\tif (!Array.isArray(this.process.parameters)) {\r\n\t\t\tthis.process.parameters = [];\r\n\t\t}\r\n\t\tthis.process.parameters.push({\r\n\t\t\tname, description, schema\r\n\t\t});\r\n\t}\r\n\r\n\thasParameterDefault(name) {\r\n\t\treturn this.getParameterDefault(name) !== undefined;\r\n\t}\r\n\r\n\tgetParameterDefault(name) {\r\n\t\tlet param = this.getParameter(name);\r\n\t\tif (param !== null) {\r\n\t\t\treturn param.default;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\thasParameter(name) {\r\n\t\treturn this.getParameter(name) !== null;\r\n\t}\r\n\r\n\tgetProcessParameters(includeUndefined = false) {\r\n\t\tlet parameters = Array.isArray(this.process.parameters) ? this.process.parameters.slice(0) : [];\r\n\t\tif (includeUndefined && !this.fillProcessParameters) {\r\n\t\t\tfor (let key in this.nodes) {\r\n\t\t\t\tlet refs = this.nodes[key].getRefs();\r\n\t\t\t\tfor(let ref of refs) {\r\n\t\t\t\t\tif (ref.from_parameter && !parameters.find(other => other.name === ref.from_parameter)) { // jshint ignore:line\r\n\t\t\t\t\t\tparameters.push({\r\n\t\t\t\t\t\t\tname: ref.from_parameter,\r\n\t\t\t\t\t\t\tdescription: '',\r\n\t\t\t\t\t\t\tschema: {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn parameters;\r\n\t}\r\n\r\n\tgetProcessParameter(name, includeUndefined = false) {\r\n\t\treturn this.getProcessParameters(includeUndefined).find(p => p.name === name) || null;\r\n\t}\r\n\r\n\tgetParameter(name) {\r\n\t\tlet callbackParam = this.getCallbackParameter(name);\r\n\t\tlet processParam = this.getProcessParameter(name);\r\n\t\tif (callbackParam && processParam) {\r\n\t\t\t// ToDo: Take https://github.com/Open-EO/openeo-api/issues/332 into account\r\n\t\t\treturn Object.assign({}, callbackParam, processParam);\r\n\t\t}\r\n\t\telse if (callbackParam) {\r\n\t\t\treturn callbackParam;\r\n\t\t}\r\n\t\telse if (processParam) {\r\n\t\t\treturn processParam;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tsetArguments(args) {\r\n\t\tif (Utils.isObject(args)) {\r\n\t\t\tObject.assign(this.arguments, args);\r\n\t\t}\r\n\t}\r\n\r\n\thasArgument(name) {\r\n\t\treturn typeof this.arguments[name] !== 'undefined';\r\n\t}\r\n\r\n\tgetArgument(name) {\r\n\t\treturn this.arguments[name];\r\n\t}\r\n\r\n\treset() {\r\n\t\tfor(var id in this.nodes) {\r\n\t\t\tthis.nodes[id].reset();\r\n\t\t}\r\n\t\tthis.children.forEach(child => child.reset());\r\n\t}\r\n\r\n\tgetResultNode() {\r\n\t\treturn this.resultNode;\r\n\t}\r\n\r\n\tgetStartNodes() {\r\n\t\treturn this.startNodes;\r\n\t}\r\n\r\n\tgetStartNodeIds() {\r\n\t\treturn this.startNodes.map(node => node.id);\r\n\t}\r\n\r\n\tgetNode(nodeId) {\r\n\t\treturn nodeId in this.nodes ? this.nodes[nodeId] : null;\r\n\t}\r\n\r\n\tgetNodeCount() {\r\n\t\treturn Utils.size(this.nodes);\r\n\t}\r\n\r\n\tgetNodes() {\r\n\t\treturn this.nodes;\r\n\t}\r\n\r\n\tgetErrors() {\r\n\t\treturn this.errors;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the process for the given process ID or node.\r\n\t * \r\n\t * @param {ProcessGraphNode|string} process \r\n\t * @param {?string} [namespace=null]\r\n\t * @returns {object|null}\r\n\t * @throws {ProcessGraphError} - ProcessUnsupported\r\n\t */\r\n\tgetProcess(process, namespace = null) {\r\n\t\tif (this.processRegistry === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet id;\r\n\t\tif (process instanceof ProcessGraphNode) {\r\n\t\t\tid = process.process_id;\r\n\t\t\tnamespace = process.namespace;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tid = process;\r\n\t\t}\r\n\t\tlet spec = this.processRegistry.get(id, namespace);\r\n\t\tif (spec === null) {\r\n\t\t\tthrow new ProcessGraphError('ProcessUnsupported', {process: id, namespace: namespace || 'n/a'});\r\n\t\t}\r\n\t\treturn this.createProcessInstance(spec);\r\n\t}\r\n\r\n\tgetParentProcessId() {\r\n\t\tif(this.getParentNode()) {\r\n\t\t\treturn this.getParentNode().process_id;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tgetParentProcess() {\r\n\t\tif (this.processRegistry === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.processRegistry.get(this.getParentProcessId());\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = ProcessGraph;","const CommonProcessRegistry = require('@openeo/js-commons/src/processRegistry');\r\n\r\n/**\r\n * Central registry for processes.\r\n * \r\n * Implementation has been moved to @openeo/js-commons.\r\n * This wrapper here is only available for backward compatibility.\r\n * \r\n * @todo Remove in 2.0.0.\r\n * @augments CommonProcessRegistry\r\n * @class\r\n * @deprecated\r\n */\r\nclass ProcessRegistry extends CommonProcessRegistry {\r\n\r\n}\r\n\r\nmodule.exports = ProcessRegistry;","const CommonUtils = require('@openeo/js-commons/src/utils.js');\r\n\r\n/**\r\n * Utilities\r\n * \r\n * @class\r\n */\r\nclass Utils extends CommonUtils {\r\n\r\n\t/**\r\n\t * Checks whether a value contains references (from_parameter, from_node).\r\n\t * \r\n\t * Doesn't return references from ProcessGraph objects if checkCallbacks is set to true.\r\n\t * \r\n\t * @param {*} value \r\n\t * @param {boolean} checkProcess - Set to `false` to not check for refs in a process if provided as value.\r\n\t * @param {boolean} checkCallbacks - Set to `true` to also check for refs in callbacks. Only applies if `checkProcess` is true.\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic containsRef(value, checkProcess = true, checkCallbacks = false) {\r\n\t\tlet type = Utils.getType(value);\r\n\t\tswitch(type) {\r\n\t\t\tcase 'result':\r\n\t\t\tcase 'parameter':\r\n\t\t\t\treturn true;\r\n\t\t\tcase 'callback':\r\n\t\t\t\tif (checkProcess && Utils.containsRef(value.process_graph, checkCallbacks, checkCallbacks)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'array':\r\n\t\t\tcase 'object':\r\n\t\t\t\tfor(let key in value) {\r\n\t\t\t\t\tif (Utils.containsRef(value[key], checkProcess, checkCallbacks)) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all distinct references (from_parameter, from_node) contained in a value.\r\n\t * \r\n\t * Doesn't return references from ProcessGraph objects if checkCallbacks is set to true.\r\n\t * \r\n\t * @param {*} value \r\n\t * @param {boolean} getFromProcess - Set to `false` to not get refs from a process if provided as value.\r\n\t * @param {boolean} getFromCallbacks - Set to `true` to also include refs in callbacks. Only applies if `getFromProcess` is true.\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic getRefs(value, getFromProcess = true, getFromCallbacks = false) {\r\n\t\tvar store = [];\r\n\t\tvar type = Utils.getType(value);\r\n\t\tswitch(type) {\r\n\t\t\tcase 'result':\r\n\t\t\tcase 'parameter':\r\n\t\t\t\tstore.push(value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'callback':\r\n\t\t\t\tif (getFromProcess) {\r\n\t\t\t\t\tstore = store.concat(Utils.getRefs(value.process_graph, getFromCallbacks, getFromCallbacks));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'array':\r\n\t\t\tcase 'object':\r\n\t\t\t\tfor(var key in value) {\r\n\t\t\t\t\tstore = store.concat(Utils.getRefs(value[key], getFromProcess, getFromCallbacks));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn Utils.unique(store, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the type of the value.\r\n\t * \r\n\t * Similar to typeof, but gives more details for objects (array, parameter, callback, result, null, object).\r\n\t * \r\n\t * @param {*} value \r\n\t * @returns {string}\r\n\t */\r\n\tstatic getType(value) {\r\n\t\tconst ProcessGraph = require('./processgraph');\r\n\t\tif (typeof value === 'object') {\r\n\t\t\tif (value === null) {\r\n\t\t\t\treturn 'null';\r\n\t\t\t}\r\n\t\t\telse if (Array.isArray(value)) {\r\n\t\t\t\treturn 'array';\r\n\t\t\t}\r\n\t\t\telse if(value.hasOwnProperty(\"process_graph\") || value instanceof ProcessGraph) {\r\n\t\t\t\treturn 'callback';\r\n\t\t\t}\r\n\t\t\telse if(value.hasOwnProperty(\"from_node\")) {\r\n\t\t\t\treturn 'result';\r\n\t\t\t}\r\n\t\t\telse if(value.hasOwnProperty(\"from_parameter\")) {\r\n\t\t\t\treturn 'parameter';\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn 'object';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn (typeof value);\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = Utils;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"div\",class:_vm.classes,attrs:{\"id\":_vm.id,\"tabindex\":\"0\"},on:{\"mousemove\":_vm.onMouseMove,\"mousedown\":_vm.onMouseDown,\"wheel\":_vm.onMouseWheel,\"keydown\":_vm.onKeyDown,\"focus\":function($event){_vm.hasFocus = true},\"blur\":function($event){_vm.hasFocus = false}}},[_c('svg',{staticClass:\"canvas\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"}},[_vm._l((_vm.edges),function(edge){return _c('Edge',{key:edge.id,attrs:{\"id\":edge.id,\"parameter1\":edge.parameter1,\"parameter2\":edge.parameter2,\"selected\":edge.selected,\"inactive\":edge.inactive,\"issues\":edge.issues,\"state\":_vm.state},on:{\"mounted\":node => _vm.mount(edge, node),\"unmounted\":() => _vm.mount(edge),\"position\":function($event){return _vm.updateEdgePos(edge, arguments)}}})}),_vm._l((_vm.hiddenParameterRefEdges),function(edge){return _c('Edge',{key:edge.id,attrs:{\"id\":edge.id,\"parameter1\":edge.parameter1,\"parameter2\":edge.parameter2,\"inactive\":true,\"lineColor\":[200,200,200,1],\"lineWidth\":2,\"state\":_vm.state},on:{\"mounted\":node => _vm.mount(edge, node),\"unmounted\":() => _vm.mount(edge)}})}),(_vm.linkingLine)?_c('line',_vm._b({},'line',_vm.linkingLine,false)):_vm._e(),(_vm.selectRect)?_c('rect',_vm._b({},'rect',_vm.selectRect,false)):_vm._e()],2),_c('div',{staticClass:\"blocks\"},_vm._l((_vm.blocks),function(block){return _c('Block',{key:block.id,attrs:{\"id\":block.id,\"type\":block.type,\"spec\":block.spec,\"state\":_vm.state,\"selected\":block.selected,\"position\":block.position,\"origin\":block.origin,\"process_id\":block.process_id,\"namespace\":block.namespace,\"result\":block.result,\"args\":block.arguments,\"description\":block.description},on:{\"update\":(...args) => _vm.updateBlock(block, ...args),\"mounted\":node => _vm.mount(block, node),\"unmounted\":() => _vm.mount(block),\"move\":_vm.startDragBlock}})}),1),(_vm.state.scale < 0.7 || _vm.showZoomInfo)?_c('div',{staticClass:\"zoomInfo\"},[(_vm.state.scale < 0.7)?_c('div',[_vm._v(\" Zoom in for more details. \")]):_vm._e(),(_vm.showZoomInfo)?_c('div',[_vm._v(\" Zoom with \"),_c('kbd',[_vm._v(\"STRG\")]),_vm._v(\" or \"),_c('kbd',[_vm._v(\"Meta\")]),_vm._v(\" key and the mouse wheel. \")]):_vm._e()]):_vm._e(),(_vm.parameterViewer)?_c('ParameterViewer',_vm._b({on:{\"close\":function($event){_vm.parameterViewer = null}}},'ParameterViewer',_vm.parameterViewer,false)):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"div\",class:_vm.containerClasses,style:(_vm.styles),attrs:{\"id\":'block' + this.id},on:{\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"]))return null;$event.preventDefault();$event.stopPropagation();if('button' in $event && $event.button !== 0)return null;return _vm.onMouseDown.apply(null, arguments)}}},[_c('div',{staticClass:\"blockTitle\",on:{\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"]))return null;$event.preventDefault();$event.stopPropagation();if('button' in $event && $event.button !== 0)return null;return _vm.emitDrag.apply(null, arguments)}}},[_c('span',{staticClass:\"titleText\",attrs:{\"title\":_vm.plainTitle}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.invalid),expression:\"invalid\"}],staticClass:\"invalid\",attrs:{\"title\":\"Process or Collection not supported!\"}},[_c('i',{staticClass:\"fas fa-exclamation-triangle\"})]),_vm._v(\" \"+_vm._s(_vm.name)+\" \"),(_vm.showId)?_c('span',{staticClass:\"blockId\"},[_vm._v(_vm._s(_vm.id))]):_vm._e()]),_c('div',{staticClass:\"blockicon\",on:{\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"]))return null;$event.preventDefault();$event.stopPropagation();if('button' in $event && $event.button !== 0)return null;return _vm.focus()}}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowsDescription && !_vm.showDescriptionField),expression:\"allowsDescription && !showDescriptionField\"}],staticClass:\"addDescription\",attrs:{\"title\":\"Add description\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addDescription()}}},[_c('i',{staticClass:\"fas fa-comment-medical\"})]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowsDelete),expression:\"allowsDelete\"}],staticClass:\"delete\",attrs:{\"title\":\"Remove (DEL)\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.remove()}}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowsInfo),expression:\"allowsInfo\"}],staticClass:\"info\",attrs:{\"title\":\"Details\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.showInfo()}}},[_c('i',{staticClass:\"fas fa-info\"})]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowsParameterChange),expression:\"allowsParameterChange\"}],staticClass:\"settings\",attrs:{\"title\":_vm.isParameter ? 'Edit parameter' : 'Change parameter values'},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.edit.apply(null, arguments)}}},[_c('i',{staticClass:\"fas fa-edit\"})])])]),_c('div',{staticClass:\"inout\"},[_c('div',{staticClass:\"inputs\"},_vm._l((_vm.parameters),function(param,i){return _c('BlockParameter',{key:i,ref:\"parameters\",refInFor:true,attrs:{\"state\":_vm.state,\"value\":_vm.args[param.name],\"name\":param.name,\"description\":param.description,\"optional\":param.optional,\"deprecated\":param.deprecated,\"experimental\":param.experimental,\"default\":param.default,\"schema\":param.schema},on:{\"input\":value => _vm.updateArgument(param.name, value),\"edgesChanged\":function($event){return _vm.edgesChanged(param, $event)}}})}),1),_c('div',{staticClass:\"outputs\"},[_c('BlockParameter',_vm._b({ref:\"output\",attrs:{\"state\":_vm.state,\"label\":_vm.outputLabel},on:{\"input\":_vm.updateResult}},'BlockParameter',_vm.output,false))],1)]),(_vm.showDescriptionField)?_c('textarea',{ref:\"descriptionField\",staticClass:\"editDescription\",attrs:{\"readonly\":!_vm.state.editable,\"placeholder\":\"Type description here...\"},domProps:{\"value\":_vm.description},on:{\"blur\":_vm.updateDescription,\"mousedown\":function($event){$event.stopPropagation();}}}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:_vm.classes},[(!_vm.output)?_c('div',_vm._g({ref:\"circle\",class:_vm.circleClasses},_vm.circleListeners)):_vm._e(),_c('span',_vm._g({staticClass:\"text\"},_vm.textListeners),[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.unspecified),expression:\"unspecified\"}],staticClass:\"unspecified\",attrs:{\"title\":\"Parameter is likely unsupported!\"}},[_c('i',{staticClass:\"fas fa-exclamation-triangle\"})]),_c('span',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.displayLabel))]),(_vm.displayValue.length)?[_vm._v(\": \")]:_vm._e(),_c('span',{staticClass:\"value\",domProps:{\"innerHTML\":_vm._s(_vm.displayValue)}})],2),(_vm.output)?_c('div',_vm._g({ref:\"circle\",class:_vm.circleClasses,attrs:{\"title\":\"Output of the process\"}},_vm.circleListeners)):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div :class=\"classes\">\r\n        <div v-if=\"!output\" ref=\"circle\" :class=\"circleClasses\" v-on=\"circleListeners\"></div>\r\n        <span class=\"text\" v-on=\"textListeners\">\r\n            <span v-show=\"unspecified\" class=\"unspecified\" title=\"Parameter is likely unsupported!\">\r\n                <i class=\"fas fa-exclamation-triangle\"></i>\r\n            </span>\r\n            <span class=\"label\">{{ displayLabel }}</span><template v-if=\"displayValue.length\">: </template>\r\n            <span class=\"value\" v-html=\"displayValue\"></span>\r\n        </span>\r\n        <div v-if=\"output\" ref=\"circle\" :class=\"circleClasses\" v-on=\"circleListeners\" title=\"Output of the process\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ProcessSchema } from '@openeo/js-commons';\r\nimport { ProcessGraph } from '@openeo/js-processgraphs';\r\nimport Utils from '../../utils.js';\r\n\r\nexport default {\r\n    name: 'BlockParameter',\r\n    props: {\r\n        name: {\r\n            type: String,\r\n            default: 'output'\r\n        },\r\n        description: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        optional: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        deprecated: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        experimental: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        default: {},\r\n        value: {},\r\n        schema: {\r\n            type: [Object, Array],\r\n            default: null\r\n        },\r\n        label: {\r\n            type: String\r\n        },\r\n        output: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        state: {\r\n            type: Object,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            // The attached edges\r\n            edges: []\r\n        };\r\n    },\r\n    computed: {\r\n        schemas() {\r\n            if (this.schema instanceof ProcessSchema) {\r\n                return this.schema;\r\n            }\r\n            else {\r\n                return new ProcessSchema(this.schema);\r\n            }\r\n        },\r\n        hasValue() {\r\n            return (this.value !== undefined);\r\n        },\r\n        textListeners() {\r\n            if (this.allowsArgumentChange) {\r\n                return {\r\n                    click: this.openEditorForArguments\r\n                };\r\n            }\r\n            else {\r\n                return {};\r\n            }\r\n        },\r\n        circleListeners() {\r\n            var listeners = {};\r\n            if (this.state.editable) {\r\n                listeners.mousedown = event => {\r\n                    if (event.which == 1) {\r\n                        this.state.root.link(this);\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                    }\r\n                };\r\n\r\n                if (this.output) {\r\n                    // Allow specifying the result node\r\n                    listeners.dblclick = event => {\r\n                        if (event.which == 1) {\r\n                            this.$emit('input', true);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                // Handle focus on the I/Os\r\n                listeners.mouseover = () => this.state.linkFrom && this.state.root.link(this);\r\n                listeners.mouseout = () => this.state.linkTo && this.state.root.unlink(this);\r\n            }\r\n            return listeners;\r\n        },\r\n        classes() {\r\n            let classes = [\r\n                this.output ? 'output' : 'input',\r\n                'connector',\r\n                'field_' + this.name,\r\n                (this.hasValue || this.optional || this.output || this.getEdgeCount() > 0) ? 'hasValue' : 'noValue',\r\n            ];\r\n            if (this.allowsArgumentChange) {\r\n                classes.push(\"editable\");\r\n            }\r\n            return classes;\r\n        },\r\n        unspecified() {\r\n            return !this.$parent.invalid && this.state.root.hasProcesses && this.schemas.unspecified;\r\n        },\r\n        circleClasses() {\r\n            var classes = ['circle'];\r\n            if (this.getEdgeCount() > 0) {\r\n                classes.push('io_active');\r\n            }\r\n\r\n            for (var edge of this.edges) {\r\n                if (edge.selected) {\r\n                    classes.push('io_selected');\r\n                }\r\n                else if (edge.issues.length > 0) {\r\n                    classes.push('io_issues');\r\n                }\r\n            }\r\n\r\n            if (this.state.linkFrom == this || this.state.linkTo == this) {\r\n                classes.push('io_selected');\r\n            }\r\n            return classes;\r\n        },\r\n        displayValue() {\r\n            var maxLength = 38 - this.displayLabel.length;\r\n            var formattedValue = null;\r\n            if (this.isEditable && !this.state.compactMode && !Utils.isRef(this.value)) {\r\n                let value = typeof this.value !== 'undefined' ? this.value : this.default;\r\n                if (typeof value !== 'undefined') {\r\n                    formattedValue = this.formatValue(value, maxLength, true);\r\n                }\r\n            }\r\n\r\n            if (typeof formattedValue === 'string') {\r\n                if (formattedValue.length === 0) {\r\n                    formattedValue = '<em>Empty</em>';\r\n                }\r\n            }\r\n            else {\r\n                formattedValue = '';\r\n            }\r\n            return formattedValue;\r\n        },\r\n        displayLabel() {\r\n            if (this.output && this.state.compactMode) {\r\n                return '';\r\n            }\r\n            else if (typeof this.label === 'string' && (this.label.length > 0 || this.output)) {\r\n                return this.label;\r\n            }\r\n            else {\r\n                return this.name;\r\n            }\r\n        },\r\n        isArrayType() {\r\n            return this.schemas.nativeDataType() === 'array';\r\n        },\r\n        isObjectType() {\r\n            return this.schemas.nativeDataType() === 'object';\r\n        },\r\n        isEditable() {\r\n            return !this.output && this.schemas.isEditable();\r\n        },\r\n        allowsArgumentChange() {\r\n            return (!this.output && this.schemas.isEditable());\r\n        },\r\n        allowsMultipleInputs() {\r\n            // Is there any type that potentially allows multiple inputs?\r\n            return this.isArrayType || this.isObjectType || this.schemas.nativeDataType() === 'any';\r\n        },\r\n    },\r\n    watch: {\r\n        edges() {\r\n            this.updateEdgeStatus();\r\n            this.$emit('edgesChanged', this.edges, this);\r\n        },\r\n        value: {\r\n            immediate: true,\r\n            handler() {\r\n                this.updateEdgeStatus();\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        updateEdgeStatus() {\r\n            if (!this.output) {\r\n                for(var edge of this.edges) {\r\n                    edge.inactive = !this.isEdgeUsed(edge);\r\n                }\r\n            }\r\n        },\r\n        getCirclePosition() {\r\n            try {\r\n                var dim = this.state.root.domBoundingBox(this.$refs.circle);\r\n                var blocksDim = this.state.root.getDimensions();\r\n                var x = (dim.offsetLeft - blocksDim.offsetLeft) + dim.width / 2;\r\n                var y = (dim.offsetTop - blocksDim.offsetTop) + dim.height / 2;\r\n                return [x, y];\r\n            } catch (error) {\r\n                console.warn(error);\r\n                return null;\r\n            }\r\n        },\r\n        openEditorForArguments() {\r\n            if (this.allowsArgumentChange) {\r\n                this.$parent.showArguments(this.name);\r\n            }\r\n        },\r\n        jsonSchema() {\r\n            return this.schemas.toJSON();\r\n        },\r\n        setValue(value) {\r\n            if (this.schemas.nativeDataType() == 'boolean' && !Utils.isRef(value)) {\r\n                value = !!value;\r\n            }\r\n            this.$emit('input', value);\r\n        },\r\n        resetValue() {\r\n            if (typeof this.default !== 'undefined') {\r\n                this.setValue(this.default);\r\n                return;\r\n            }\r\n            \r\n            var value;\r\n            if (this.schemas.nullable()) {\r\n                value = null;\r\n            }\r\n            else {\r\n                var dataType = this.schemas.nativeDataType();\r\n                switch(dataType) {\r\n                    case 'object':\r\n                        value = {};\r\n                        break;\r\n                    case 'array':\r\n                        value = [];\r\n                        break;\r\n                    case 'string':\r\n                        value = '';\r\n                        break;\r\n                    case 'integer':\r\n                    case 'number':\r\n                        value = 0;\r\n                        break;\r\n                    case 'boolean':\r\n                        value = false;\r\n                        break;\r\n                    default:\r\n                        value = undefined;\r\n                }\r\n            }\r\n            this.setValue(value);\r\n        },\r\n        getEdgeRef(edge) {\r\n            if (this.output) {\r\n                return this.value;\r\n            }\r\n            else {\r\n                return edge.parameter1.value;\r\n            }\r\n        },\r\n        addRefToValue(edge) {\r\n            var ref = this.getEdgeRef(edge);\r\n            if (!ref) {\r\n                return;\r\n            }\r\n            else if (!this.allowsMultipleInputs) {\r\n                this.setValue(ref);\r\n            }\r\n            else if (this.isArrayType) {\r\n                if (Utils.isRef(this.value)) {\r\n                    this.setValue([this.value, ref]);\r\n                }\r\n                else if (Array.isArray(this.value) && this.value.length > 0) {\r\n                    var value = this.value;\r\n                    value.push(ref);\r\n                    this.setValue(value);\r\n                }\r\n                else {\r\n                    this.setValue(ref);\r\n                }\r\n            }\r\n            else if (this.isObjectType) {\r\n                var propertyCount = Utils.size(this.value);\r\n                if (this.getEdgeCount() === 1 && (!this.hasValue || !propertyCount)) {\r\n                    this.setValue(ref);\r\n                }\r\n                else if (!propertyCount) {\r\n                    this.resetValue();\r\n                }\r\n                else {\r\n                    // Don't change value\r\n                }\r\n            }\r\n            else {\r\n                // ToDo: This is probably of data type mixed or any, how to handle?\r\n                this.setValue(ref);\r\n            }\r\n        },\r\n        removeRefFromValue(edge) {\r\n            if (!this.output) {\r\n                var ref = this.getEdgeRef(edge);\r\n                if (Utils.isRefEqual(ref, this.value)) {\r\n                    this.resetValue();\r\n                }\r\n                else if (this.isArrayType || this.isObjectType) {\r\n                    this.setValue(this.removeRefFromValueDeep(this.value, ref));\r\n                }\r\n            }\r\n        },\r\n        removeRefFromValueDeep(value, ref) {\r\n            if (Array.isArray(value)) {\r\n                var i = value.length;\r\n                while(--i >= 0) {\r\n                    if (value[i] === null || typeof value[i] !== 'object') {\r\n                        continue;\r\n                    }\r\n                    else if (Utils.isRefEqual(ref, value[i])) {\r\n                        value.splice(i, 1);\r\n                    }\r\n                    else {\r\n                        value[i] = this.removeRefFromValueDeep(value[i], ref);\r\n                    }\r\n                }\r\n\r\n            }\r\n            else if (Utils.isObject(value)) {\r\n                for(var key in value) {\r\n                    if (!value.hasOwnProperty(key) || value[key] === null || typeof value[key] !== 'object') {\r\n                        continue;\r\n                    }\r\n                    else if (Utils.isRefEqual(ref, value[key])) {\r\n                        delete value[key];\r\n                    }\r\n                    else {\r\n                        value[i] = this.removeRefFromValueDeep(value[key], ref);\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n        addEdge(edge) {\r\n            this.edges.push(edge);\r\n            if (!this.isEdgeUsed(edge) && !this.output) {\r\n                this.addRefToValue(edge);\r\n            }\r\n        },\r\n        eraseEdge(edge) {\r\n            for (var k in this.edges) {\r\n                if (this.edges[k] == edge) {\r\n                    this.removeRefFromValue(edge);\r\n                    this.$delete(this.edges, k);\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        isEdgeUsed(edge) {\r\n            var ref = this.getEdgeRef(edge);\r\n            if (Utils.isRefEqual(ref, this.value)) {\r\n                return true;\r\n            }\r\n            return this.hasRefInValue(ref, this.value);\r\n        },\r\n        hasRefInValue(ref, value) {\r\n            if (!value || typeof value !== 'object') {\r\n                return false;\r\n            }\r\n            else if (Utils.isRefEqual(ref, value)) {\r\n                return true;\r\n            }\r\n            for(let key in value) {\r\n                if (this.hasRefInValue(ref, value[key])) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        getEdgeCount() {\r\n            return this.edges.length;\r\n        },\r\n        formatProcess(pg, maxLength) {\r\n            if (pg instanceof ProcessGraph && pg.getNodeCount() === 1) {\r\n                return this.formatValue(pg.getResultNode().process_id, maxLength);\r\n            }\r\n            var nodes = Object.values(pg.process_graph);\r\n            if (nodes.length === 1) {\r\n                return this.formatValue(nodes[0].process_id, maxLength);\r\n            }\r\n            else {\r\n                return 'Process';\r\n            }\r\n        },\r\n        formatValue(value, maxLength, html = true) {\r\n            if (typeof value === 'object') {\r\n                if (value === null) {\r\n                    return 'n/a';\r\n                }\r\n                else if (Array.isArray(value)) {\r\n                    return this.formatArray(value, maxLength, html);\r\n                }\r\n                else {\r\n                    return this.formatObject(value, maxLength, html);\r\n                }\r\n            }\r\n            else if (typeof value === 'string') {\r\n                if (value.length > maxLength) {\r\n                    var text = Utils.htmlentities(value.substr(0, maxLength));\r\n                    return html ? text + '<span title=\"' + Utils.htmlentities(value) + '\">…</span>' : text;\r\n                }\r\n                else {\r\n                    return Utils.htmlentities(value);\r\n                }\r\n            }\r\n            else if (typeof value === 'boolean') {\r\n                return value ? '✔️' : '❌';\r\n            }\r\n            else if (typeof value === 'number') {\r\n                return value.toString();\r\n            }\r\n            else {\r\n                return Utils.htmlentities(JSON.stringify(value));\r\n            }\r\n        },\r\n        formatArray(values, maxLength, html = true) {\r\n            let parts = [];\r\n            for(let i in values) {\r\n                let value = values[i];\r\n                let formatted = this.formatValue(value, 10, html);\r\n                let unformatted = Utils.htmlentities_decode(this.formatValue(value, 10, false));\r\n\r\n                if (unformatted.length > maxLength) {\r\n                    if (parts.length === 0) {\r\n                        return this.formatArraySimple(values, 'List(' + values.length + ')');\r\n                    }\r\n                    else {\r\n                        parts.push(this.formatArraySimple(values, '…'));\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                parts.push(formatted);\r\n                maxLength -= unformatted.length + 2;\r\n            }\r\n            \r\n            return parts.join(\", \");\r\n        },\r\n        formatArraySimple(values, text, html = true) {\r\n            if (html && values.length < 10) {\r\n                let title = values.map(v => this.formatValue(v, 25, false)).join(', ');\r\n                return '<span title=\"' + title + '\">' + text + '</span>';\r\n            }\r\n            else {\r\n                return text;\r\n            }\r\n        },\r\n        formatObject(value, maxLength, html = true) {\r\n            if (Object.keys(value).length === 0) {\r\n                return 'None';\r\n            }\r\n            else if (value instanceof ProcessGraph || Utils.isObject(value.process_graph)) {\r\n                return this.formatProcess(value, maxLength);\r\n            }\r\n            else if (Utils.isRef(value)) {\r\n                return this.formatValue(Utils.formatRef(value), maxLength);\r\n            }\r\n            else if (typeof value.west !== 'undefined' && typeof value.east !== 'undefined' && typeof value.south !== 'undefined' && typeof value.north !== 'undefined') {\r\n                return maxLength >= 12 ? 'Bounding Box' : 'BBox';\r\n            }\r\n            else if (Utils.detectGeoJson(value)) {\r\n                return this.formatValue(value.type, maxLength);\r\n            }\r\n\r\n            // Fallback to default\r\n            return html ? '<span title=\"' + Utils.htmlentities(JSON.stringify(value)) + '\">Object</span>' : 'Object';\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.vue-component.model-builder {\r\n    .block .connector {\r\n        font-size: 0.9em;\r\n        margin: 0.2em 0;\r\n        white-space: nowrap;\r\n        \r\n        &.noValue {\r\n            color: red;\r\n        }\r\n        &.editable .label,\r\n        &.editable .value {\r\n            cursor: pointer;\r\n        }\r\n        span[title] {\r\n            cursor: help;\r\n        }\r\n        .input {\r\n            max-width: 100%;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n        .output {\r\n            text-align: right;\r\n        }\r\n        .unspecified {\r\n            color: red;\r\n            margin-right: 0.3em;\r\n        }\r\n        .circle {\r\n            width: 0.8em;\r\n            height: 0.8em;\r\n            margin: 0 0.2em;\r\n            border: 1px solid #888;\r\n            background-color: transparent;\r\n            display: inline-block;\r\n\r\n            &.io_active {\r\n                background-color: #FFC800;\r\n            }\r\n            &.io_selected {\r\n                background-color: #00C800 !important;\r\n            }\r\n            &.io_issues {\r\n                background-color: #FF0000;\r\n            }\r\n        }\r\n    }\r\n\r\n    &.editable .circle {\r\n        cursor: pointer;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BlockParameter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BlockParameter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BlockParameter.vue?vue&type=template&id=70b6715c&\"\nimport script from \"./BlockParameter.vue?vue&type=script&lang=js&\"\nexport * from \"./BlockParameter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BlockParameter.vue?vue&type=style&index=0&id=70b6715c&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\r\n\tdefaultScale: 1.3,\r\n\tblockWidth: {\r\n\t\tcompactParams: 110,\r\n\t\tcompact: 60,\r\n\t\tnormalParams: 220,\r\n\t\tnormal: 110\r\n\t}\r\n};","<template>\r\n    <div :id=\"'block' + this.id\" ref=\"div\" :class=\"containerClasses\" @mousedown.prevent.stop.left=\"onMouseDown\" :style=\"styles\">\r\n        <div class=\"blockTitle\" @mousedown.prevent.stop.left=\"emitDrag\">\r\n            <span class=\"titleText\" :title=\"plainTitle\">\r\n                <span v-show=\"invalid\" class=\"invalid\" title=\"Process or Collection not supported!\">\r\n                    <i class=\"fas fa-exclamation-triangle\"></i>\r\n                </span>\r\n                {{ name }}\r\n                <span v-if=\"showId\" class=\"blockId\">{{ id }}</span>\r\n            </span>\r\n            <div class=\"blockicon\" @mousedown.prevent.stop.left=\"focus()\">\r\n                <span v-show=\"allowsDescription && !showDescriptionField\" class=\"addDescription\" title=\"Add description\" @click.stop.prevent=\"addDescription()\">\r\n                    <i class=\"fas fa-comment-medical\"></i>\r\n                </span>\r\n                <span v-show=\"allowsDelete\" class=\"delete\" title=\"Remove (DEL)\" @click.stop.prevent=\"remove()\">\r\n                    <i class=\"fas fa-trash\"></i>\r\n                </span>\r\n                <span v-show=\"allowsInfo\" class=\"info\" title=\"Details\" @click.stop.prevent=\"showInfo()\">\r\n                    <i class=\"fas fa-info\"></i>\r\n                </span>\r\n                <span v-show=\"allowsParameterChange\" class=\"settings\" :title=\"isParameter ? 'Edit parameter' : 'Change parameter values'\" @click.stop.prevent=\"edit\">\r\n                    <i class=\"fas fa-edit\"></i>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class=\"inout\">\r\n            <div class=\"inputs\">\r\n                <BlockParameter v-for=\"(param, i) in parameters\" :key=\"i\" ref=\"parameters\" :state=\"state\" :value=\"args[param.name]\" @input=\"value => updateArgument(param.name, value)\" @edgesChanged=\"edgesChanged(param, $event)\" :name=\"param.name\" :description=\"param.description\" :optional=\"param.optional\" :deprecated=\"param.deprecated\" :experimental=\"param.experimental\" :default=\"param.default\" :schema=\"param.schema\" />\r\n            </div>\r\n            <div class=\"outputs\">\r\n                <BlockParameter ref=\"output\" :state=\"state\" :label=\"outputLabel\" v-bind=\"output\" @input=\"updateResult\" />\r\n            </div>\r\n        </div>\r\n        <textarea ref=\"descriptionField\" v-if=\"showDescriptionField\" :value=\"description\" :readonly=\"!state.editable\" class=\"editDescription\" placeholder=\"Type description here...\" @blur=\"updateDescription\" @mousedown.stop=\"\"></textarea>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport BlockParameter from './BlockParameter.vue';\r\nimport Utils from '../../utils.js';\r\nimport { ProcessParameter, ProcessUtils } from '@openeo/js-commons';\r\nimport { Utils as PgUtils } from '@openeo/js-processgraphs';\r\nimport Config from './config.js';\r\n\r\n/*\r\nEvents:\r\n\r\nEmits locally:\r\n- moved(x, y) - The block has been moved\r\n- input(value) - The value has been updated\r\n- move() - A block is now being moved\r\n- mounted(node) - The block is now part of the DOM.\r\n- unmounted(node) - The block not not part of the DOM anylonger.\r\n*/\r\n\r\nconst defaultFontSize = 10;\r\n\r\nexport default {\r\n    name: 'Block',\r\n    components: {\r\n        BlockParameter\r\n    },\r\n    props: {\r\n        id: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        type: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        selected: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        position: {\r\n            type: Array,\r\n            required: true\r\n        },\r\n        process_id: {\r\n            type: String\r\n        },\r\n        namespace: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        description: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        args: {\r\n            type: Object,\r\n            default: () => ({})\r\n        },\r\n        result: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        origin: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        spec: {\r\n            type: Object,\r\n            default: () => null\r\n        },\r\n        state: {\r\n            type: Object,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            showDescriptionField: false,\r\n            drag: null // Is the user dragging ?\r\n        };\r\n    },\r\n    watch: {\r\n        'state.compactMode'() {\r\n            this.$emit('moved', this.position);\r\n        },\r\n        description: {\r\n            immediate: true,\r\n            handler() {\r\n                this.showDescriptionField = (this.description !== null);\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        // Visualizations\r\n        width() {\r\n            let size = Config.blockWidth;\r\n            if (this.parameters.length > 0) {\r\n                return this.state.compactMode ? size.compactParams : size.normalParams;\r\n            }\r\n            else {\r\n                return this.state.compactMode ? size.compact : size.normal;\r\n            }\r\n        },\r\n        styles() {\r\n            return {\r\n                marginLeft: Math.round(this.state.center[0] + this.position[0] * this.state.scale) + 'px',\r\n                marginTop: Math.round(this.state.center[1] + this.position[1] * this.state.scale) + 'px',\r\n                fontSize: Math.round(this.state.scale * defaultFontSize) + 'px',\r\n                width: Math.round(this.state.scale * this.width) + 'px',\r\n            };\r\n        },\r\n        plainTitle() {\r\n            let parts = [];\r\n            parts.push(this.name);\r\n            if (this.namespace) {\r\n                parts.push(`@${this.namespace}`);\r\n            }\r\n            if (this.showId) {\r\n                parts.push(` ${this.id}`);\r\n            }\r\n            return parts.join('');\r\n        },\r\n        name() {\r\n            switch(this.type) {\r\n                case 'process':\r\n                    if (this.collectionId) {\r\n                        return this.collectionId;\r\n                    }\r\n                    else {\r\n                        return this.processId;\r\n                    }\r\n                case 'parameter':\r\n                    return this.spec.name;\r\n                default:\r\n                    return this.id.substr(1);\r\n            }\r\n        },\r\n        outputLabel() {\r\n            if (this.result) {\r\n                return \"Result\";\r\n            }\r\n            else if (this.isParameter) {\r\n                return \"Process Parameter\";\r\n            }\r\n            else {\r\n                return \"\";\r\n            }\r\n        },\r\n        containerClasses() {\r\n            var classes = ['block'];\r\n            if (this.collectionId) {\r\n                classes.push('block_collection');\r\n            }\r\n            else if (this.isParameter) {\r\n                classes.push('block_argument');\r\n            }\r\n            if (this.result) {\r\n                classes.push('block_result');\r\n            }\r\n            if (this.selected) {\r\n                classes.push('block_selected');\r\n            }\r\n            if (this.invalid) {\r\n                classes.push('block_invalid');\r\n            }\r\n\r\n            return classes;\r\n        },\r\n        invalid() {\r\n            if (this.type !== 'process' || !this.$parent.hasProcesses) {\r\n                // We can only check processes for validity\r\n                // Also, don't check for validity if no processes to validate against are given\r\n                return false;\r\n            }\r\n            else if (this.namespace && Utils.isUrl(this.namespace)) {\r\n                // If the namespace is a URL, then don't complain about a missing process\r\n                return false;\r\n            }\r\n            else if (!this.processId) {\r\n                return true;\r\n            }\r\n\r\n            // Check that the process exists\r\n            if (!this.spec) {\r\n                return true;\r\n            }\r\n\r\n            // Check that the collection exists\r\n            if (this.processId === 'load_collection' && !Utils.isRef(this.args.id)) {\r\n                for(let collection of this.$parent.collections) {\r\n                    if (this.args.id === collection.id) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n        processId() {\r\n            if (this.type === 'process') {\r\n                if (this.process_id) {\r\n                    return this.process_id;\r\n                }\r\n                else if (Utils.isObject(this.spec) && this.spec.id) {\r\n                    return this.spec.id;\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        collectionId() {\r\n            if (this.type === 'process' && this.processId === 'load_collection' && !Utils.isRef(this.args.id)) {\r\n                return this.args.id;\r\n            }\r\n            return null;\r\n        },\r\n        isParameter() {\r\n            return this.type === 'parameter';\r\n        },\r\n        allowsParameterChange() {\r\n            if (this.isParameter) {\r\n                return this.state.editable && !!this.$parent.supports('editParameter');\r\n            }\r\n            else {\r\n                return this.parameters.filter(p => p.isEditable()).length > 0;\r\n            }\r\n        },\r\n        allowsDelete() {\r\n            return (this.state.editable && (!this.spec || (Utils.isObject(this.spec) && this.origin !== 'schema')));\r\n        },\r\n        allowsInfo() {\r\n            if (this.collectionId) {\r\n                return this.$parent.supports('showCollection');\r\n            }\r\n            else if (this.isParameter) {\r\n                return Utils.isObject(this.spec) && this.$parent.supports('showParameter');\r\n            }\r\n            else {\r\n                return this.$parent.supports('showProcess');\r\n            }\r\n        },\r\n        allowsDescription() {\r\n            // ToDo: Remove type restriction and store description for parameters.\r\n            return (this.state.editable && this.type === 'process');\r\n        },\r\n        showId() {\r\n            return (this.type !== 'parameter');\r\n        },\r\n        // Parameters and related\r\n        hasParametersDefined() {\r\n            return Boolean(Utils.isObject(this.spec) && Array.isArray(this.spec.parameters) && this.spec.parameters.length > 0);\r\n        },\r\n        parameters() {\r\n            let names = [];\r\n            let parameters = [];\r\n            if (this.hasParametersDefined) {\r\n                parameters = this.spec.parameters.map(p => new ProcessParameter(p));\r\n                names = parameters.map(p => p.name);\r\n            }\r\n            if (Utils.size(this.args) > 0) {\r\n                for(var key in this.args) {\r\n                    if (!names.includes(key)) {\r\n                        parameters.push(new ProcessParameter({\r\n                            name: key,\r\n                            description: ''\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n            return parameters;\r\n        },\r\n        fields() {\r\n            var fields = {};\r\n            for(var p of this.parameters) {\r\n                fields[p.name] = p;\r\n            }\r\n            fields.output = this.output;\r\n            return fields;\r\n        },\r\n        output() {\r\n            var spec = {};\r\n            if (Utils.isObject(this.spec)) {\r\n                if (this.isParameter) {\r\n                    spec = this.spec;\r\n                }\r\n                else if (Utils.isObject(this.spec.returns)) {\r\n                    spec = this.spec.returns;\r\n                }\r\n            }\r\n            var output = {\r\n                name: \"output\",\r\n                schema: spec.schema || {},\r\n                description: spec.description || '',\r\n                optional: true,\r\n                output: true,\r\n                value: {}\r\n            };\r\n            if (this.isParameter) {\r\n                output.value.from_parameter = this.id.substr(1);\r\n            }\r\n            else {\r\n                output.value.from_node = this.id.substr(1);\r\n            }\r\n            return output;\r\n        }\r\n    },\r\n    mounted() {\r\n        // ToDo: Move mousemove listener for dragging to Blocks?\r\n        this.draggingFn = this.dragging.bind(this);\r\n        document.addEventListener('mousemove', this.draggingFn);\r\n        // ToDO: Replace with mouseleave?\r\n        this.stopDragFn = this.stopDrag.bind(this);\r\n        document.addEventListener('mouseup', this.stopDragFn);\r\n\r\n        this.$emit('mounted', this);\r\n    },\r\n    beforeDestroy() {\r\n        document.removeEventListener('mousemove', this.draggingFn);\r\n        document.removeEventListener('mouseup', this.stopDragFn);\r\n\r\n        this.$emit('unmounted', this);\r\n    },\r\n    methods: {\r\n        edit() {\r\n            if (this.isParameter) {\r\n                this.editParameter();\r\n            }\r\n            else {\r\n                this.showArguments();\r\n            }\r\n        },\r\n        hasParameter(name) {\r\n            return this.hasParametersDefined && !!this.spec.parameters.find(p => p.name === name);\r\n        },\r\n        updateDescription(event) {\r\n\t\t\tlet elem = event.composedPath()[0]; // event.target doesn't work in web components\r\n            let value;\r\n            if (elem && typeof elem.value === 'string' && elem.value.length > 0) {\r\n                value = elem.value;\r\n            }\r\n            else {\r\n                value = null;\r\n            }\r\n            this.showDescriptionField = (value !== null);\r\n            if (this.description !== value) {\r\n                this.$emit('update', 'description', value);\r\n            }\r\n        },\r\n        updatePosition(pos, saveHistory = true) {\r\n            pos = Utils.ensurePoint(pos);\r\n            if (this.position[0] !== pos[0] || this.position[1] !== pos[1]) {\r\n                this.$emit('update', 'position', pos, saveHistory);\r\n            }\r\n        },\r\n        updateArguments(value) {\r\n            let removeParameters = Object.keys(this.args)\r\n                    .filter(key => typeof value[key] === 'undefined' && (!this.hasParametersDefined || this.hasParameter(key)));\r\n            // Remove default values\r\n            for(let p of this.parameters) {\r\n                if (typeof value[p.name] !== 'undefined' && p.optional && typeof p.default !== 'undefined' && Utils.equals(p.default, value[p.name]))  {\r\n                    delete value[p.name];\r\n                }\r\n            }\r\n            this.$emit('update', 'arguments', value, removeParameters);\r\n        },\r\n        updateArgument(key, value) {\r\n            let args = Utils.deepClone(this.args);\r\n            args[key] = value;\r\n            this.updateArguments(args);\r\n        },\r\n        updateResult(value) {\r\n            if (this.hasOutputEdges()) {\r\n                this.state.root.$emit(\"error\", \"A result node can't have outgoing edges.\");\r\n                return;\r\n            }\r\n            if (value !== this.result) {\r\n                this.$emit('update', 'result', value);\r\n            }\r\n        },\r\n        focus() {\r\n            this.$parent.focus();\r\n        },\r\n        onMouseDown(event) {\r\n            this.select(!this.selected, !event.shiftKey);\r\n        },\r\n        select(selected = true, unselectOthers = true) {\r\n            this.$emit('update', 'selected', selected, unselectOthers);\r\n            this.focus();\r\n        },\r\n        getDimensions() {\r\n            let dim = this.$parent.domBoundingBox(this.$refs.div);\r\n            var blocksDim = this.$parent.getDimensions();\r\n            dim.x = dim.offsetLeft - blocksDim.offsetLeft;\r\n            dim.y = dim.offsetTop - blocksDim.offsetTop;\r\n            return dim;\r\n        },\r\n        edgesChanged(parameter, edges) {\r\n            parameter.refs = edges.map(edge => edge.parameter1.value);\r\n        },\r\n        editParameter() {\r\n            this.$parent.$emit('editParameter', this.spec, \"Edit Parameter: \" + this.plainTitle, data => this.$emit('update', 'spec', data));\r\n        },\r\n        showArguments(parameterName = null) {\r\n            this.$parent.$emit('editArguments', this.parameters.filter(p => p.isEditable()), this.args, this.plainTitle, this.state.editable, parameterName, data => this.updateArguments(data), this);\r\n        },\r\n        showInfo() {\r\n            if(this.collectionId) {\r\n                this.$parent.$emit('showCollection', this.collectionId);\r\n            }\r\n            else if (this.isParameter) {\r\n                this.$parent.$emit('showParameter', this.spec);\r\n            }\r\n            else {\r\n                this.$parent.$emit('showProcess', this.processId, this.namespace);\r\n            }\r\n        },\r\n        async addDescription() {\r\n            this.select();\r\n            this.showDescriptionField = true;\r\n            await this.$nextTick();\r\n            this.$refs.descriptionField.focus();\r\n        },\r\n        async emitDrag(event) {\r\n            this.select(true, !event.shiftKey);\r\n            this.focus();\r\n            await this.$nextTick();\r\n            this.$emit('move', event);\r\n        },\r\n        getDragPos(pos, mouse) {\r\n            return [mouse[0]/this.state.scale-pos[0], mouse[1]/this.state.scale-pos[1]];\r\n        },\r\n        startDrag(event) {\r\n            if (!this.selected) {\r\n                return;\r\n            }\r\n\r\n            let mousePos = this.$parent.getMousePos(event);\r\n            this.drag = {\r\n                origin: this.position,\r\n                mouse: this.getDragPos(this.position, mousePos)\r\n            };\r\n        },\r\n        stopDrag() {\r\n            if (!this.drag) {\r\n                return;\r\n            }\r\n\r\n            var delta = 5 / this.state.scale; // Only store History if block was moved enough\r\n            if (Math.abs(this.drag.origin[0] - this.position[0]) > delta || Math.abs(this.drag.origin[1] - this.position[1]) > delta) {\r\n                this.updatePosition(this.position);\r\n            }\r\n            this.drag = null;\r\n        },\r\n        dragging(event) {\r\n            if (!this.drag) {\r\n                return;\r\n            }\r\n            \r\n            let mousePos = this.$parent.getMousePos(event);\r\n            let drapPos = this.getDragPos(this.drag.mouse, mousePos);\r\n            // Don't store for each run a history step...\r\n            this.updatePosition(drapPos, false);\r\n        },\r\n\r\n        hasOutputEdges() {\r\n            return this.$refs.output && this.$refs.output.getEdgeCount() > 0;\r\n        },\r\n\r\n        async remove() {\r\n            await this.$parent.removeBlock(this);\r\n        },\r\n\r\n        /**\r\n         * Getting a field by name\r\n         */\r\n        getBlockParameter(name) {\r\n            if (name === 'output' && this.$refs.output) {\r\n                return this.$refs.output;\r\n            }\r\n            else if (Array.isArray(this.$refs.parameters)) {\r\n                var params = this.$refs.parameters.filter(param => param.name === name);\r\n                if (params.length > 0) {\r\n                    return params[0];\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n\r\n        isParameterScoped(parameterName, referenceName) {\r\n            let parameterBlock = this.getBlockParameter(parameterName);\r\n            let cbParams = ProcessUtils.getCallbackParameters(parameterBlock).map(cbParam => cbParam.name);\r\n            return cbParams.includes(referenceName);\r\n        },\r\n\r\n        hiddenParameterRef(parameterBlock) {\r\n            if (this.type !== 'process') {\r\n                return null;\r\n            }\r\n            let globalParam = parameterBlock.id.substr(1);\r\n            for (let argName in this.args) {\r\n                let value = this.args[argName];\r\n                if (Utils.isObject(value) && Utils.isObject(value.process_graph)) {\r\n                    let refs = PgUtils.getRefs(value, true, true);\r\n                    if (refs.find(r => r.from_parameter === globalParam && !this.isParameterScoped(argName, r.from_parameter))) {\r\n                        return argName;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.vue-component.model-builder {\r\n    .block {\r\n        position:absolute;\r\n        border:2px solid #ccc;\r\n        margin-left:0px;\r\n        margin-top:0px;\r\n        background-color:#fafafa;\r\n        opacity:0.8;\r\n        font-size:14px;\r\n        user-select:none;\r\n        -moz-user-select:none;\r\n        -khtml-user-select:none;\r\n        -webkit-user-select:none;\r\n        -o-user-select:none;\r\n\r\n        .description {\r\n            display:none;\r\n            width:200px;\r\n            padding:3px;\r\n            border:1px solid #083776;\r\n            border-radius:5px;\r\n            color:#001531;\r\n            background-color:#91bcf6;\r\n            margin-top:15px;\r\n            position:absolute;\r\n            font-weight:normal;\r\n        }\r\n\r\n        .blockTitle {\r\n            display: flex;\r\n            padding: 0.3em 0.1em;\r\n            font-weight:bold;\r\n            background-color:#ddd;\r\n            margin-bottom: 0.1em;\r\n            cursor: move;\r\n            font-size: 0.9em;\r\n            \r\n            .blockId {\r\n                opacity: 0.4;\r\n                margin-left: 0.25em;\r\n                font-weight: normal;\r\n            }\r\n            \r\n            .namespace {\r\n                font-weight: normal;\r\n            }\r\n\r\n            .titleText {\r\n                flex-grow: 1;\r\n                white-space: nowrap;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n            }\r\n            \r\n            .blockicon {\r\n                white-space: nowrap;\r\n                text-align: center;\r\n\r\n                i.fas {\r\n                    min-width: 1.4em;\r\n                    cursor: pointer;\r\n                    opacity: 0.5;\r\n                    margin-left: 0.1em;\r\n\r\n                    &:hover {\r\n                        opacity:1.0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .invalid {\r\n            color: red;\r\n            cursor: help;\r\n        }\r\n\r\n        .inout {\r\n            display: flex;\r\n        }\r\n\r\n        .inputs {\r\n            flex-grow: 1;\r\n            max-width: 100%;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n        }\r\n\r\n        .editDescription {\r\n            padding: 0.3em 0.2em;\r\n            box-sizing: border-box;\r\n            font-size: 0.9em;\r\n            line-height: 1em;\r\n            overflow: auto;\r\n            border: 0;\r\n            border-top: 1px dotted #ccc;\r\n            background-color: transparent;\r\n            width: 100%;\r\n            max-width: 100%;\r\n            height: 3.7em;\r\n            min-height: 2.5em;\r\n            resize: none;\r\n\r\n            &:focus {\r\n                outline: 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    .block_collection {\r\n        border:2px solid #6B8DAF;\r\n\r\n        .blockTitle {\r\n            background-color:#A3B7CC;\r\n        }\r\n        .field_id { /* Hide collection ID as it's shown in the title */\r\n            display: none;\r\n        }\r\n    }\r\n\r\n    .block_result {\r\n        border:2px solid #888;\r\n\r\n        .field_output .circle {\r\n            background-color: #888;\r\n            cursor: auto;\r\n        }\r\n    }\r\n\r\n    .block_argument {\r\n        border:2px solid #B28C6B;\r\n\r\n        .blockTitle {\r\n            background-color:#CCB7A3;\r\n        }\r\n    }\r\n\r\n    .block_selected {\r\n        border:2px solid #0a0 !important; /* important is used to override the styles for block_collection and block_argument above */\r\n\r\n        .blockTitle {\r\n            background-color:#0c0 !important;\r\n        }\r\n    }\r\n\r\n    .block_invalid {\r\n        border:2px solid #ff0000 !important; /* important is used to override the styles for block_selected above */\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Block.vue?vue&type=template&id=342ca948&\"\nimport script from \"./Block.vue?vue&type=script&lang=js&\"\nexport * from \"./Block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Block.vue?vue&type=style&index=0&id=342ca948&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('g',_vm._l((_vm.lines),function(line,i){return _c('line',_vm._b({key:i},'line',line,false))}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class Segment {\r\n\r\n    constructor(x, y, dx, dy) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.dx = dx;\r\n        this.dy = dy;\r\n    }\r\n\r\n    /**\r\n     * Distance\r\n     */\r\n    distance(point1, point2) {\r\n        return Math.sqrt(Math.pow(point2.x-point1.x,2) + Math.pow(point2.y-point1.y,2));\r\n    }\r\n\r\n    /**\r\n     * Distance with a point\r\n     */\r\n    distanceP(point) {\r\n        var normal = this.normal();\r\n        normal.x = point.x;\r\n        normal.y = point.y;\r\n        var intersection = this.intersection(normal);\r\n\r\n        return [intersection[0], this.distance(normal.alpha(intersection[1]), point)];\r\n    }\r\n\r\n    /**\r\n     * Normal\r\n     */\r\n    normal() {\r\n        return new Segment(this.x, this.y, this.dy, -this.dx);\r\n    }\r\n\r\n    /**\r\n     * Gets the intersection alpha with another \r\n     */\r\n    intersection(other) {\r\n        var a = this.dx;\r\n        var b = -other.dx;\r\n        var c = this.dy;\r\n        var d = -other.dy;\r\n        var b0 = other.x-this.x;\r\n        var b1 = other.y-this.y;\r\n        var det = a*d - b*c;\r\n\r\n        if (det == 0) {\r\n            return null;\r\n        }\r\n\r\n        var r1 = (d*b0 - b*b1)/det;\r\n        var r2 = (-c*b0 + a*b1)/det;\r\n\r\n        return [r1, r2];\r\n    }\r\n\r\n    /**\r\n     * Gets the alpha point\r\n     */\r\n    alpha(a) {\r\n        var point = {};\r\n        point.x = this.x+this.dx*a;\r\n        point.y = this.y+this.dy*a;\r\n\r\n        return point;\r\n    }\r\n\r\n}","<template>\r\n    <g>\r\n        <line v-for=\"(line, i) in lines\" :key=\"i\" v-bind=\"line\" />\r\n    </g>\r\n</template>\r\n\r\n<script>\r\nimport Segment from './segment.js';\r\n\r\nexport default {\r\n    name: 'Edge',\r\n    props: {\r\n        id: {},\r\n        parameter1: {\r\n            type: Object,\r\n            required: true\r\n        },\r\n        parameter2: {\r\n            type: Object,\r\n            required: true\r\n        },\r\n        selected: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        inactive: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        issues: {\r\n            type: Array,\r\n            default: () => ([])\r\n        },\r\n        lineWidth: {\r\n            type: Number,\r\n            default: 3\r\n        },\r\n        lineColor: {\r\n            type: Array,\r\n            default: () => ([255, 200, 0, 1])\r\n        },\r\n        state: {\r\n            type: Object,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            position1: null,\r\n            position2: null\r\n        }\r\n    },\r\n    computed: {\r\n        segment() {\r\n            return new Segment(\r\n                this.position1[0],\r\n                this.position1[1], \r\n                this.position2[0] - this.position1[0],\r\n                this.position2[1] - this.position1[1]\r\n            );\r\n        },\r\n        scaledLineWidth() {\r\n            return this.lineWidth * this.state.scale;\r\n        },\r\n        lines() {\r\n            // Drawing the arrow\r\n            var xM = ((this.position1[0]+this.position2[0])/2.0);\r\n            var yM = ((this.position1[1]+this.position2[1])/2.0);\r\n\r\n            var alpha = (35*Math.PI/180.0);\r\n            var cos = Math.cos(alpha);\r\n            var sin = Math.sin(alpha);\r\n            var cosB = Math.cos(-alpha);\r\n            var sinB = Math.sin(-alpha);\r\n\r\n            var norm = Math.sqrt(Math.pow(this.position1[0]-this.position2[0],2)+Math.pow(this.position1[1]-this.position2[1],2));\r\n            var arrowLength = this.state.scale*10/(norm/1.5);\r\n            var xA = (this.position1[0]-xM)*arrowLength;\r\n            var yA = (this.position1[1]-yM)*arrowLength;\r\n\r\n            var lineStyle = this.getLineStyle(this.scaledLineWidth, this.selected, this.inactive);\r\n            var arrowStyle = this.getLineStyle(this.scaledLineWidth / 1.5, this.selected);\r\n\r\n            var mainLine = this.getLine(this.position1[0], this.position1[1], this.position2[0], this.position2[1], lineStyle);\r\n            if (this.inactive || norm/this.state.scale < 25) {\r\n                // Hide arrow\r\n                return [mainLine];\r\n            }\r\n            else {\r\n                return [\r\n                    mainLine,\r\n                    this.getLine(xM, yM, xM+(xA*cos-yA*sin), yM+(yA*cos+xA*sin), arrowStyle),\r\n                    this.getLine(xM, yM, xM+(xA*cosB-yA*sinB), yM+(yA*cosB+xA*sinB), arrowStyle)\r\n                ];\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        'state.center'() {\r\n            this.updatePositions();\r\n        },\r\n        'state.scale'() {\r\n            this.updatePositions();\r\n        },\r\n        'state.moving'() {\r\n            this.updatePositions();\r\n        }\r\n    },\r\n    created() {\r\n        this.updatePositions();\r\n    },\r\n    mounted() {\r\n        this.$emit('mounted', this);\r\n    },\r\n    beforeDestroy() {\r\n        this.$emit('unmounted', this);\r\n    },\r\n    methods: {\r\n        updatePositions() {\r\n            let pos1 = this.parameter1.getCirclePosition();\r\n            let pos2 = this.parameter2.getCirclePosition();\r\n            if (!pos1 || !pos2) {\r\n                return;\r\n            }\r\n            if (!this.position1 || !this.position2 || pos1[0] !== this.position1[0] || pos1[1] !== this.position1[1] || pos2[0] !== this.position2[0] || pos2[1] !== this.position2[1]) {\r\n                this.position1 = Object.freeze(pos1);\r\n                this.position2 = Object.freeze(pos2);\r\n                this.$emit('position', this.position1, this.position2);\r\n            }\r\n        },\r\n        getLineStyle(lineWidth, selected = false, dashed = false) {\r\n            let dashLength = 2 * this.state.scale;\r\n            let color = this.lineColor;\r\n            if (selected) {\r\n                color = [0, 200, 0, 1];\r\n            }\r\n            else if (this.issues.length > 0) {\r\n                color = [255, 0, 0, 1];\r\n            }\r\n            return {\r\n                'stroke': `rgba(${color.join(', ')})`,\r\n                'stroke-width': lineWidth,\r\n                'stroke-dasharray': dashed ? dashLength * 3 + ' ' + dashLength * 2 : 'none'\r\n            }\r\n        },\r\n        /**\r\n         * Get line options.\r\n         * \r\n         * @param x1 {number} The x-coordinate for the start of the line.\r\n         * @param y1 {number} The y-coordinate for the start of the line.\r\n         * @param x2 {number} The x-coordinate for the end of the line.\r\n         * @param y2 {number} The y-coordinate for the end of the line.\r\n         * @param [settings] {object} Additional settings for this node.\r\n         * @return {object} Options for SVG Line\r\n         */\r\n        getLine(x1, y1, x2, y2, settings = {}) {\r\n            return Object.assign({x1, y1, x2, y2}, settings);\r\n        },\r\n        /**\r\n         * Does the position collide the line ?\r\n         */\r\n        collide(x, y) {\r\n            if (!this.segment) {\r\n                return false;\r\n            }\r\n\r\n            var dp = this.segment.distanceP({x: x, y: y});\r\n\r\n            if (dp[0] >= 0 && dp[0] <= 1) {\r\n                if (dp[1] < (this.lineWidth*this.state.scale)*2) {\r\n                    return dp[0];\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n        /**\r\n         * Test if this edge is the same than another\r\n         */\r\n        equals(other) {\r\n            if (this.parameter1 == other.parameter1 && this.parameter2 == other.parameter2) {\r\n                return true;\r\n            }\r\n            else if (this.parameter1 == other.parameter2 && this.parameter2 == other.parameter1) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n}\r\n</script>","import mod from \"-!../../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Edge.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Edge.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edge.vue?vue&type=template&id=83b3fc4e&\"\nimport script from \"./Edge.vue?vue&type=script&lang=js&\"\nexport * from \"./Edge.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div ref=\"div\" :id=\"id\" :class=\"classes\" tabindex=\"0\"\r\n        @mousemove=\"onMouseMove\"\r\n        @mousedown=\"onMouseDown\"\r\n        @wheel=\"onMouseWheel\"\r\n        @keydown=\"onKeyDown\"\r\n        @focus=\"hasFocus = true\"\r\n        @blur=\"hasFocus = false\">\r\n        <!-- tabindex is to allow focus for delete keystroke etc -->\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"canvas\">\r\n            <Edge v-for=\"edge in edges\" :key=\"edge.id\" :id=\"edge.id\"\r\n                :parameter1=\"edge.parameter1\" :parameter2=\"edge.parameter2\"\r\n                :selected=\"edge.selected\" :inactive=\"edge.inactive\" :issues=\"edge.issues\" :state=\"state\"\r\n                @mounted=\"node => mount(edge, node)\" @unmounted=\"() => mount(edge)\"\r\n                @position=\"updateEdgePos(edge, arguments)\" />\r\n            <Edge v-for=\"edge in hiddenParameterRefEdges\" :key=\"edge.id\" :id=\"edge.id\"\r\n                :parameter1=\"edge.parameter1\" :parameter2=\"edge.parameter2\"\r\n                @mounted=\"node => mount(edge, node)\" @unmounted=\"() => mount(edge)\"\r\n                :inactive=\"true\" :lineColor=\"[200,200,200,1]\" :lineWidth=\"2\" :state=\"state\" />\r\n            <line v-if=\"linkingLine\" v-bind=\"linkingLine\" />\r\n            <rect v-if=\"selectRect\" v-bind=\"selectRect\" />\r\n        </svg>\r\n        <div class=\"blocks\">\r\n            <Block v-for=\"(block) in blocks\" :key=\"block.id\"\r\n                :id=\"block.id\" :type=\"block.type\" :spec=\"block.spec\" :state=\"state\"\r\n                :selected=\"block.selected\" :position=\"block.position\" :origin=\"block.origin\"\r\n                :process_id=\"block.process_id\" :namespace=\"block.namespace\" :result=\"block.result\" :args=\"block.arguments\" :description=\"block.description\" \r\n                @update=\"(...args) => updateBlock(block, ...args)\"\r\n                @mounted=\"node => mount(block, node)\" @unmounted=\"() => mount(block)\"\r\n                @move=\"startDragBlock\" />\r\n        </div>\r\n        <div v-if=\"state.scale < 0.7 || showZoomInfo\" class=\"zoomInfo\">\r\n            <div v-if=\"state.scale < 0.7\">\r\n                Zoom in for more details.\r\n            </div>\r\n            <div v-if=\"showZoomInfo\">\r\n                Zoom with <kbd>STRG</kbd> or <kbd>Meta</kbd> key and the mouse wheel.\r\n            </div>\r\n        </div>\r\n        <ParameterViewer v-if=\"parameterViewer\" v-bind=\"parameterViewer\" @close=\"parameterViewer = null\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Block from './model-builder/Block.vue';\r\nimport Edge from './model-builder/Edge.vue';\r\nimport Utils from '../utils.js';\r\nimport { ProcessRegistry } from '@openeo/js-commons';\r\nimport { JsonSchemaValidator, ProcessGraph, Utils as PgUtils } from '@openeo/js-processgraphs';\r\nimport Vue from 'vue';\r\nimport boxIntersectsBox from 'intersects/box-box';\r\nimport boxIntersectsLine from 'intersects/box-line';\r\nimport Config from './model-builder/config.js';\r\n\r\nconst getDefaultState = function(blocks) {\r\n    return Vue.observable({\r\n        root: blocks,\r\n        editable: false,\r\n        compactMode: false,\r\n        moving: null, // Is the user dragging the view?\r\n        selecting: null, // Is the user multi-selecting?\r\n        center: [0,0],\r\n        mouse: [0,0],\r\n        scale: Config.defaultScale,\r\n        linkFrom: null, // Array\r\n        linkTo: null // Array\r\n    });\r\n};\r\nconst MARGIN = 20;\r\n\r\nconst selectionChangeWatcher = function (newVal, oldVal) {\r\n    if (!Array.isArray(newVal) || !Array.isArray(oldVal) || newVal.length !== oldVal.length || !newVal.every((value,i) => value.id === oldVal[i].id)) {\r\n        this.$emit('selectionChanged', this.selectedBlocks, this.selectedEdges);\r\n    }\r\n};\r\n\r\nexport default {\r\n    name: 'ModelBuilder',\r\n    components: {\r\n        Block,\r\n        Edge,\r\n        ParameterViewer: () => import('./model-builder/ParameterViewer.vue')\r\n    },\r\n    props: {\r\n        id: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        editable: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        value: {\r\n            type: Object,\r\n            default: () => ({})\r\n        },\r\n        collections: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        processes: {\r\n            type: [Array, Object],\r\n            default: () => []\r\n        },\r\n\t\tparent: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\tparentSchema: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: null\r\n\t\t},\r\n        historySize: {\r\n            type: Number,\r\n            default: 30\r\n        },\r\n        explicitZoom: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            isMounted: false,\r\n            allMounted: false,\r\n\r\n            // Current offset for block that are generated without specific coordinates so that not all block occur on the same position\r\n            newBlockOffset: 0,\r\n\r\n            // History\r\n            history: [],\r\n            historyPointer: null,\r\n\r\n            process: Object.freeze(this.value),\r\n            // Metadata for blocks to show\r\n            blocks: [],\r\n            // Metadata for edges to show\r\n            edges: [],\r\n            hiddenParameterRefEdges: {},\r\n\r\n            processGraph: null,\r\n\r\n            // Next block id\r\n            nextBlockId: 1,\r\n            // Next edge id\r\n            nextEdgeId: 1,\r\n            // Copy&Paste\r\n            clipboard: null,\r\n\r\n            activeTransactions: 0,\r\n            hasFocus: false,\r\n            linkingLine: null,\r\n            parameterViewer: null,\r\n\r\n            showZoomInfo: this.explicitZoom,\r\n            \r\n            // State specific to this blocks instance including all children\r\n            state: getDefaultState(this)\r\n        };\r\n    },\r\n    computed: {\r\n        classes() {\r\n            let classes = [\r\n                'vue-component',\r\n                'model-builder'\r\n            ];\r\n            if (this.hasFocus) {\r\n                classes.push('focus');\r\n            }\r\n            if (this.editable) {\r\n                classes.push('editable');\r\n            }\r\n\r\n            if (this.state.compactMode) {\r\n                classes.push('compact');\r\n            }\r\n\r\n            if (this.state.scale < 0.5) {\r\n                classes.push('scale_xs');\r\n            }\r\n            else if (this.state.scale < 0.7) {\r\n                classes.push('scale_s');\r\n            }\r\n            else if (this.state.scale < 0.9) {\r\n                classes.push('scale_m');\r\n            }\r\n            else if (this.state.scale < 1.1) {\r\n                classes.push('scale_l');\r\n            }\r\n            else {\r\n                classes.push('scale_xl');\r\n            }\r\n\r\n            return classes;\r\n        },\r\n        selectRect() {\r\n            if (!this.state.selecting) {\r\n                return null;\r\n            }\r\n            return {\r\n                x: Math.min(this.state.selecting.current[0], this.state.selecting.start[0]),\r\n                y: Math.min(this.state.selecting.current[1], this.state.selecting.start[1]),\r\n                width: Math.abs(this.state.selecting.current[0] - this.state.selecting.start[0]),\r\n                height: Math.abs(this.state.selecting.current[1] - this.state.selecting.start[1]),\r\n                'stroke': 'rgba(0,0,0,0.8)',\r\n                'stroke-width': 1,\r\n                'fill': 'rgba(0,0,0,0.05)'\r\n            };\r\n        },\r\n        processRegistry() {\r\n            // If I link between openeo-web-editor and openeo-vue-components, instanceof ProcessRegistry fails.\r\n            // Webpack seems to mangle names and thus I need to check for specific processes alternatively to detect whether this could be a ProcessRegistry.\r\n            if (this.processes instanceof ProcessRegistry || (typeof this.processes.count === 'function' && typeof this.processes.get === 'function')) {\r\n                return this.processes;\r\n            }\r\n            else if (Array.isArray(this.processes)) {\r\n                return new ProcessRegistry(this.processes);\r\n            }\r\n            else {\r\n                throw new Error('Invalid processes specified, must be ProcessRegistry or Array');\r\n            }\r\n        },\r\n        hasProcesses() {\r\n            return this.processRegistry.count() > 0;\r\n        },\r\n        processBlocks() {\r\n            return this.blocks.filter(b => b.type === 'process');\r\n        },\r\n        selectedBlocks() {\r\n            return this.blocks.filter(block => block.selected);\r\n        },\r\n        selectedEdges() {\r\n            return this.edges.filter(edge => edge.selected);\r\n        },\r\n        selectedSideEdge() {\r\n            if (this.selectedEdges.length === 1 && this.selectedEdges[0].selectedParameter) {\r\n                return this.selectedEdges[0];\r\n            }\r\n            return null;\r\n        },\r\n        hasSelection() {\r\n            return this.selectedBlocks.length > 0 || this.selectedEdges.length > 0;\r\n        },\r\n        processParametersFromSchemas() {\r\n            // Get all process parameters from the parent process\r\n            // this.parent.$parent => ModelBuilder instance\r\n\t\t\tlet parentParams = [];\r\n\t\t\tif (this.parent && this.parent.$parent && typeof this.parent.$parent.getPgParameters === 'function') {\r\n\t\t\t\tparentParams = this.parent.$parent.getPgParameters().map(block => block.spec);\r\n\t\t\t}\r\n\r\n            let callbackParams = [];\r\n            // If we have a parameter schema given, go through the parameter schema and get the available process parameters from there.\r\n            if (this.parentSchema) {\r\n\t\t\t    callbackParams = this.parentSchema.getCallbackParameters();\r\n            }\r\n\r\n            // Remove all parameters from the parent that are overridden by the more specific parameters.\r\n            let filteredParentParams = parentParams.filter(p1 => !callbackParams.find(p2 => p1.name === p2.name));\r\n            // Add the filtered parameters from the parent to the more specific parameters\r\n            return callbackParams.concat(filteredParentParams);\r\n        }\r\n    },\r\n    watch: {\r\n        parentSchema() {\r\n            this.importPgParameters(this.processParametersFromSchemas, 'schema');\r\n        },\r\n        async value(value) {\r\n            // Only run if component has been mounted\r\n            if (!this.allMounted) {\r\n                return;\r\n            }\r\n\r\n            // Only import when user changes data (i.e. not a BlocksProcess exported from export())\r\n            if (!(value instanceof BlocksProcess)) {\r\n                this.process = value;\r\n                await this.import(value, { propagate: false, undoOnError: false }); // don't propagate, otherwise results in an infinite loop\r\n            }\r\n        },\r\n        editable: {\r\n            immediate: true,\r\n            handler(editable) {\r\n                this.state.editable = editable;\r\n            }\r\n        },\r\n        selectedEdges: selectionChangeWatcher,\r\n        selectedBlocks: selectionChangeWatcher,\r\n        allMounted() {\r\n            this.updateHiddenParameterRefEdges();\r\n        },\r\n        isMounted() {\r\n            this.checkAllMounted();\r\n        }\r\n    },\r\n\tbeforeCreate() {\r\n\t\tUtils.enableHtmlProps(this);\r\n\t},\r\n    async created() {\r\n        if (!this.supports('error')) {\r\n            // Print error to console if event is not supported by implementing context\r\n            this.$on('error', (msg, title = null) => console.error(msg, title));\r\n        }\r\n        if (!this.supports('editArguments')) {\r\n            this.$on('editArguments', (...args) => this.showParameterViewer(...args));\r\n        }\r\n    },\r\n    async mounted() {\r\n        Utils.loadFontAwesome(this);\r\n\r\n        // Setting up default viewer center\r\n        this.moveCenter(0, 0, true);\r\n\r\n        // ToDo: Replace with mouseleave?\r\n        this.onDocumentMouseUpFn = this.onDocumentMouseUp.bind(this)\r\n        document.addEventListener('mouseup', this.onDocumentMouseUpFn);\r\n\r\n        await this.importPgParameters(this.processParametersFromSchemas, 'schema');\r\n        if (!await this.import(this.value, { propagate: false, undoOnError: false })) {\r\n            this.perfectScale();\r\n        }\r\n        selectionChangeWatcher.bind(this)();\r\n\r\n        this.isMounted = true;\r\n    },\r\n    beforeDestroy() {\r\n        document.removeEventListener('mouseup', this.onDocumentMouseUpFn);\r\n    },\r\n    methods: {\r\n        updateEdgePos(edge, pos) {\r\n            edge.position1 = pos[0];\r\n            edge.position2 = pos[1];\r\n        },\r\n        mount(elem, node = null) {\r\n            elem.$el = node;\r\n            this.checkAllMounted();\r\n        },\r\n        checkAllMounted() {\r\n            if (!this.isMounted) {\r\n                this.allMounted = false;\r\n            }\r\n            else {\r\n                this.allMounted = !this.blocks.find(block => !block.$el) || !this.edges.find(edge => !edge.$el);\r\n            }\r\n        },\r\n        updateBlockArguments(block, args, removedParams) {\r\n            if (removedParams.length > 0) {\r\n                this.parameterRemoved(block, removedParams);\r\n            }\r\n            this.$set(block, 'arguments', args);\r\n            this.commit();\r\n            if(removedParams.length > 0) {\r\n                this.$nextTick(() => this.refreshEdges());\r\n            }\r\n        },\r\n        updateBlockDescription(block, description) {\r\n            this.$set(block, 'description', description);\r\n            this.commit();\r\n        },\r\n        updateBlockPos(block, pos, saveHistory = true) {\r\n            this.$set(block, 'position', pos);\r\n            this.commit(null, saveHistory, false);\r\n        },\r\n        updateBlockResult(block, result) {\r\n            this.$set(block, 'result', result);\r\n            this.commit();\r\n        },\r\n        updateBlockSelected(block, selected, unselectOthers = true) {\r\n            if (unselectOthers) {\r\n                this.unselectAll();\r\n            }\r\n            this.$set(block, 'selected', selected);\r\n            this.commit(null, false, false);\r\n        },\r\n        updateBlockSpec(block, data) {\r\n            let parameterFields = ['name', 'schema', 'description', 'optional', 'deprecated', 'experimental', 'default'];\r\n            let newBlock = Utils.omitFromObject(block.spec, parameterFields);\r\n            Object.assign(newBlock, data);\r\n            // Remove default values (and unset default value if parameter is required)\r\n            if (!newBlock.optional) {\r\n                delete newBlock.optional;\r\n                delete newBlock.default;\r\n            }\r\n            if (!newBlock.deprecated) {\r\n                delete newBlock.deprecated;\r\n            }\r\n            if (!newBlock.experimental) {\r\n                delete newBlock.experimental;\r\n            }\r\n            this.$set(block, 'spec', newBlock);\r\n            this.commit();\r\n        },\r\n        updateBlock(block, key, value, extra) {\r\n            switch(key) {\r\n                case 'arguments':\r\n                    this.updateBlockArguments(block, value, extra);\r\n                    break;\r\n                case 'description':\r\n                    this.updateBlockDescription(block, value);\r\n                    break;\r\n                case 'position':\r\n                    this.updateBlockPos(block, value, extra);\r\n                    break;\r\n                case 'result':\r\n                    this.setResultNode(block, value);\r\n                    break;\r\n                case 'selected':\r\n                    this.updateBlockSelected(block, value, extra);\r\n                    break;\r\n                case 'spec':\r\n                    this.updateBlockSpec(block, value);\r\n                    break;\r\n            }\r\n        },\r\n        updateHiddenParameterRefEdges() {\r\n            // We can only reliably detect parameter refs if we know which parameters a process makes available to the child process\r\n            // So if we don't have process schemas, don't offer this functionality.\r\n            // Also don't execute (yet) if no parameters are given or not all elements are mounted yet.\r\n            if (!this.hasProcesses || !this.allMounted || !this.blocks.find(block => block.type === 'parameter')) {\r\n                this.hiddenParameterRefEdges = {};\r\n                return;\r\n            }\r\n\r\n            let hiddenRefs = {};\r\n            for(let process of this.processBlocks) {\r\n                for (let argName in process.arguments) {\r\n                    let value = process.arguments[argName];\r\n                    if (!Utils.isObject(value) || !Utils.isObject(value.process_graph)) {\r\n                        continue; // Process can only have hidden refs it it contains a process graph\r\n                    }\r\n                    \r\n                    let refs = PgUtils.getRefs(value, true, true).filter(ref => typeof ref.from_parameter !== 'undefined');\r\n                    for(let ref of refs) {\r\n                        try {\r\n                            if (process.$el.isParameterScoped(argName, ref.from_parameter)) {\r\n                                continue; // Skip if the parameter usage is scoped (i.e. defined as process parameetr for the children)\r\n                            }\r\n                            let parameter = this.getPgParameterById('$' + ref.from_parameter);\r\n                            if (!parameter) {\r\n                                continue; // Skip if parameter can't be found\r\n                            }\r\n                            let parameter1 = parameter.$el.getBlockParameter('output');\r\n                            let parameter2 = process.$el.getBlockParameter(argName);\r\n                            let id = `${parameter.id}->${process.id}:${argName}`;\r\n                            if (parameter1 && parameter2) {\r\n                                if (this.hiddenParameterRefEdges[id]) {\r\n                                    hiddenRefs[id] = this.hiddenParameterRefEdges[id];\r\n                                }\r\n                                else {\r\n                                    hiddenRefs[id] = {\r\n                                        $el: null,\r\n                                        id,\r\n                                        parameter1,\r\n                                        parameter2\r\n                                    };\r\n                                }\r\n                            }\r\n                        } catch(error) {\r\n                             console.warn(error);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n            this.hiddenParameterRefEdges = hiddenRefs;\r\n        },\r\n        parameterRemoved(block, parameterNames) {\r\n            for(let edge of this.edges.slice(0)) {\r\n                if(edge.parameter2.$parent.id === block.id && parameterNames.includes(edge.parameter2.name)) {\r\n                    this.removeEdge(edge);\r\n                }\r\n            }\r\n        },\r\n        startDragBlock(event) {\r\n            for(let block of this.blocks) {\r\n                if (block.$el) {\r\n                    block.$el.startDrag(event);\r\n                }\r\n            }\r\n        },\r\n        refreshEdges() {\r\n            this.refreshEdgesFor(this.edges);\r\n            this.refreshEdgesFor(Object.values(this.hiddenParameterRefEdges));\r\n        },\r\n        refreshEdgesFor(edges) {\r\n            for(let edge of edges) {\r\n                if (edge.$el) {\r\n                    edge.$el.updatePositions();\r\n                }\r\n            }\r\n        },\r\n        supports(event) {\r\n            return Boolean(this.$listeners && this.$listeners[event]);\r\n        },\r\n        focus() {\r\n            this.$refs.div.focus();\r\n        },\r\n        link(parameter) {\r\n            if (this.state.linkFrom) {\r\n                this.state.linkTo = parameter;\r\n            }\r\n            else {\r\n                this.state.linkFrom = parameter;\r\n            }\r\n        },\r\n        unlink(parameter = null) {\r\n            if (parameter) {\r\n                if (this.state.linkTo == parameter) {\r\n                    this.state.linkTo = null;\r\n                }\r\n                else if (this.state.linkFrom == parameter) {\r\n                    this.state.linkFrom = null;\r\n                    this.linkingLine = null;\r\n                }\r\n            }\r\n            else {\r\n                this.state.linkTo = null;\r\n                this.state.linkFrom = null;\r\n                this.linkingLine = null;\r\n            }\r\n        },\r\n        multiSelect() {\r\n            let box = this.selectRect;\r\n            this.blocks\r\n                .filter(b => {\r\n                    if (Array.isArray(b.position) && b.$el) {\r\n                        let pos = b.$el.getDimensions();\r\n                        return boxIntersectsBox(box.x, box.y, box.width, box.height, pos.x, pos.y, pos.width, pos.height);\r\n                    }\r\n                    return false;\r\n                })\r\n                .map(b => b.selected = true);\r\n            this.edges\r\n                .filter(e => Array.isArray(e.position1) && Array.isArray(e.position2) && boxIntersectsLine(box.x, box.y, box.width, box.height, e.position1[0], e.position1[1], e.position2[0], e.position2[1]))\r\n                .map(e => e.selected = true);\r\n        },\r\n        toJSON() {\r\n            let process = this.export();\r\n            return JSON.stringify(process, null, 2);\r\n        },\r\n        async onDocumentMouseUp(event) {\r\n            if (this.parameterViewer) {\r\n                return;\r\n            }\r\n            if (this.selectedSideEdge) {\r\n                this.selectEdge(this.selectedSideEdge, null); // Reset selectedParameter, but don't change selected state.\r\n            }\r\n            if (this.state.selecting) {\r\n                this.multiSelect();\r\n                this.state.selecting = null;\r\n            }\r\n            if (this.state.moving) {\r\n                this.state.moving = null;\r\n            }\r\n            if (this.state.editable && this.state.linkFrom) {\r\n                if (event.which == 1 && this.state.linkTo) {\r\n                    try {\r\n                        await this.addEdge(this.state.linkFrom, this.state.linkTo);\r\n                    } catch (error) {\r\n                        this.$emit(\"error\", error);\r\n                    }\r\n                }\r\n                this.unlink();\r\n            }\r\n        },\r\n        async onKeyDown(event) {\r\n            if (this.parameterViewer) {\r\n                return;\r\n            }\r\n            var allInputs = document.querySelectorAll('input, textarea, button, select, datalist');\r\n            for(let el of allInputs) {\r\n                if (el === document.activeElement) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            let captured = false;\r\n            if (this.state.editable) {\r\n                // delete selected blocks/edges\r\n                if (event.code === 'Delete') {\r\n                    this.deleteSelected();\r\n                    captured = true;\r\n                }\r\n                else if (event.ctrlKey || event.metaKey) { // STRG for Win/Linux, meta/cmd from Mac\r\n                    if (event.code === 'KeyV') {\r\n                        if (this.hasSelection && this.clipboard) {\r\n                            return; // ToDo: Implement pasting for selected blocks\r\n                        }\r\n                        else {\r\n                            try {\r\n                                const text = await navigator.clipboard.readText();\r\n                                let process = JSON.parse(text);\r\n                                await this.import(process);\r\n                            } catch(error) {\r\n                                this.$emit('error', error, 'Paste Error');\r\n                            }\r\n                        }\r\n                        captured = true;\r\n                    }\r\n                    else if (event.code === 'KeyC') {\r\n                        if (this.hasSelection) {\r\n                            this.clipboard = {\r\n                                blocks: this.selectedBlocks.slice(0),\r\n                                edges: this.selectedEdges.slice(0)\r\n                            };\r\n                        }\r\n                        else {\r\n                            try {\r\n                                let json = this.toJSON();\r\n                                await navigator.clipboard.writeText(json);\r\n                                captured = true;\r\n                            } catch(error) {\r\n                                this.$emit('error', error, 'Copy Error');\r\n                            }\r\n                        }\r\n                        captured = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (captured) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n        },\r\n        onMouseWheel(event) {\r\n            if (this.parameterViewer) {\r\n                return;\r\n            }\r\n            if (!this.explicitZoom || this.hasFocus || event.ctrlKey || event.metaKey) { // STRG for Win/Linux, meta/cmd for Mac\r\n                let mouse = this.getMousePos(event);\r\n                var dX = mouse[0] - this.state.center[0];\r\n                var dY = mouse[1] - this.state.center[1];\r\n                var deltaScale = Math.pow(1.1, Math.sign(event.deltaY)*-1);\r\n                this.moveCenter(-dX*(deltaScale-1), -dY*(deltaScale-1));\r\n                this.state.scale *= deltaScale;\r\n                event.preventDefault();\r\n                this.showZoomInfo = false;\r\n            }\r\n        },\r\n        domBoundingBox(el) {\r\n            var rect = el.getBoundingClientRect();\r\n            rect.offsetTop = rect.top + Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n            rect.offsetLeft = rect.left + Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\r\n            return rect;\r\n        },\r\n        getMousePos(event) {\r\n            let root = this.$refs.div.getBoundingClientRect();\r\n            return [\r\n                event.clientX - root.left,\r\n                event.clientY - root.top\r\n            ];\r\n        },\r\n        onMouseMove(event) {\r\n            if (this.parameterViewer) {\r\n                return;\r\n            }\r\n            try {\r\n                let mousePos = this.getMousePos(event);\r\n\r\n                if (this.state.editable && this.selectedSideEdge) {\r\n                    var origin = this.selectedSideEdge.selectedParameter.getCirclePosition();\r\n                    if (origin) {\r\n                        var distance = Math.sqrt(Math.pow(mousePos[0]-origin[0], 2)+Math.pow(mousePos[1]-origin[1], 2));\r\n                        if (distance > 10) {\r\n                            this.link(this.selectedSideEdge.selectedParameter);\r\n                            this.removeEdge(this.selectedSideEdge);\r\n                            this.commit();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (this.state.selecting) {\r\n                    this.state.selecting.current = mousePos;\r\n                }\r\n\r\n                if (this.state.moving) {\r\n                    this.moveCenter((mousePos[0]-this.state.moving[0]), (mousePos[1]-this.state.moving[1]));\r\n                    this.state.moving = mousePos;\r\n                }\r\n\r\n                if (this.state.linkFrom) {\r\n                    var position = this.state.linkFrom.getCirclePosition();\r\n                    if (position) {\r\n                        this.linkingLine = {\r\n                            x1: position[0],\r\n                            y1: position[1],\r\n                            x2: mousePos[0],\r\n                            y2: mousePos[1],\r\n                            'stroke': 'rgba(0,0,0,0.4)',\r\n                            'stroke-width': 3 * this.state.scale\r\n                        };\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                this.$emit(\"error\", error);\r\n            }\r\n        },\r\n        onMouseDown(event) {\r\n            if (this.parameterViewer) {\r\n                return;\r\n            }\r\n            let sideSelected = null;\r\n            let mousePos = this.getMousePos(event);\r\n\r\n            if (event.which == 1) {\r\n                if (event.shiftKey) {\r\n                    // Start multi select via box\r\n                    this.state.selecting = {\r\n                        start: mousePos,\r\n                        current: mousePos\r\n                    }\r\n                }\r\n                else {\r\n                    // No multiselect: unselect all\r\n                    this.unselectAll();\r\n                }\r\n\r\n                // Select edges\r\n                for (var edge of this.edges) {\r\n                    if (!edge.$el) {\r\n                        continue;\r\n                    }\r\n                    var collide = edge.$el.collide(mousePos[0], mousePos[1]);\r\n                    if (collide != false) {\r\n                        if (this.selectedEdges.length === 0 && !event.shiftKey) {\r\n                            if (collide < 0.3) {\r\n                                sideSelected = edge.parameter2;\r\n                            }\r\n                            else if (collide > 0.7) {\r\n                                sideSelected = edge.parameter1;\r\n                            }\r\n                        }\r\n                        this.selectEdge(edge, true, sideSelected);\r\n                        if (edge.issues.length > 0) {\r\n                            for(let issue of edge.issues) {\r\n                                this.$emit('error', issue);\r\n                            }\r\n                        }\r\n                        event.preventDefault();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (event.which == 2 || (event.which == 1 && !sideSelected && !event.shiftKey)) {\r\n                this.state.moving = mousePos;\r\n            }\r\n\r\n            this.focus();\r\n        },\r\n\r\n        getDimensions() {\r\n            return this.domBoundingBox(this.$refs.div);\r\n        },\r\n\r\n        async clear() {\r\n            return await this.startTransaction(async () => {\r\n                this.edges = [];\r\n                // Don't remove parameters injected by props (fixed callback parameters)\r\n                this.blocks = this.blocks.filter(b => b.type === 'parameter' && Utils.isObject(b.spec) && b.origin === 'schema');\r\n                this.nextBlockId = 1;\r\n                this.nextEdgeId = 1;\r\n                this.process = {};\r\n                this.updateHiddenParameterRefEdges();\r\n                return true;\r\n            });\r\n        },\r\n\r\n        commit(data = null, history = true, propagate = true) {\r\n            // Don't commit when in a transaction\r\n            if (this.activeTransactions > 0) {\r\n                return;\r\n            }\r\n\r\n            if (history !== false) {\r\n                this.saveHistory();\r\n            }\r\n            if (propagate !== false) {\r\n                this.$emit('input', data === null ? this.export() : data);\r\n                this.updateHiddenParameterRefEdges();\r\n            }\r\n            else {\r\n                this.refreshEdges();\r\n            }\r\n        },\r\n    \r\n        /**\r\n         * Save the current situation to the history\r\n         */\r\n        saveHistory() {\r\n            var data = this.export(true);\r\n            this.history.splice(this.historyPointer + 1, this.historySize, Object.freeze(data));\r\n            if (this.history.length > this.historySize) {\r\n                this.history.shift();\r\n            }\r\n            this.historyPointer = this.history.length - 1;\r\n            this.$emit('historyChanged', this.history, this.historyPointer);\r\n        },\r\n        async undo() {\r\n            await this.historyStep(-1);\r\n        },\r\n        async redo() {\r\n            await this.historyStep(1);\r\n        },\r\n        async historyStep(step) {\r\n            var index = this.historyPointer + step;\r\n            var element = this.history[index];\r\n            if (element) {\r\n                this.historyPointer = index;\r\n                this.import(element, { saveHistory: false, undoOnError: false, perfectScale: false });\r\n                this.$emit('historyChanged', this.history, this.historyPointer);\r\n            }\r\n        },\r\n\r\n        setResultNode(block, result = true) {\r\n            block = this.getBlockById(block.id);\r\n            if (!block || block.result === result) {\r\n                return; // Nothing to change\r\n            }\r\n\r\n            this.updateBlockResult(block, result);\r\n            var foundNewResultNode = false;\r\n            var hasOtherBlocks = false;\r\n            for(var other of this.processBlocks) {\r\n                if (block && other.id === block.id) {\r\n                    continue;\r\n                }\r\n                \r\n                hasOtherBlocks = true;\r\n                // If we set a new result node, ensure that only that node is a result node and no other.\r\n                if (result) {\r\n                    this.updateBlockResult(other, false);\r\n                }\r\n                // Find a potential result node if we don't want this to be the result node\r\n                else {\r\n                    if (other.$el && !other.$el.hasOutputEdges()) {\r\n                        this.updateBlockResult(other, true);\r\n                        foundNewResultNode = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            // If we have no new potential result node, communicate to the user.\r\n            if (hasOtherBlocks && !result && !foundNewResultNode) {\r\n                this.$emit(\"error\", \"No result node available, please specify one.\");\r\n            }\r\n        },\r\n\r\n        getPositionForPageXY(x, y) {\r\n            var rect = this.getDimensions();\r\n            if (x !== null) {\r\n                x = (x - rect.offsetLeft - this.state.center[0]) / this.state.scale;\r\n            }\r\n            if (y !== null) {\r\n                y = (y - rect.offsetTop - this.state.center[1]) / this.state.scale;\r\n            }\r\n            return [x, y];\r\n        },\r\n\r\n        addProcess(process_id, args = {}, position = [], namespace = null) {\r\n            return this.addBlock({\r\n                process_id,\r\n                namespace,\r\n                arguments: args,\r\n                position\r\n            });\r\n        },\r\n\r\n        addBlock(node, id = null) {\r\n            let num = String(this.incrementId(id));\r\n            if (id === null && Utils.hasText(node.process_id)) {\r\n                id = node.process_id.replace(/^([a-z]*).*$/i, \"$1\") + num;\r\n                if (this.getBlockById('#' + id)) {\r\n                    id = num;\r\n                }\r\n            }\r\n            else {\r\n                id = num;\r\n            }\r\n            if (typeof node.toJSON === 'function') {\r\n                node = node.toJSON();\r\n            }\r\n            var block = {\r\n                id: '#' + id,\r\n                type: 'process',\r\n                selected: false,\r\n                position: node.position,\r\n                process_id: node.process_id,\r\n                namespace: node.namespace,\r\n                arguments: node.arguments,\r\n                description: node.description || null,\r\n                result: node.result || false\r\n            };\r\n            if (this.processRegistry) {\r\n                block.spec = this.processRegistry.get(node.process_id, node.namespace);\r\n            }\r\n\r\n            var size = this.getBlockSize(block);\r\n            block.position = Utils.ensurePoint(block.position, () => this.getNewBlockDefaultPosition(size));\r\n\r\n            // If there's already a result node, remove the flag here\r\n            if (block.result && this.blocks.filter(b => b.result === true).length) {\r\n                delete block.result;\r\n            }\r\n            // Make this the result node if there's no node yet\r\n            else if (this.processBlocks.length === 0) {\r\n                block.result = true;\r\n            }\r\n            \r\n            this.blocks.push(Vue.observable(block));\r\n            this.commit();\r\n            return block;\r\n        },\r\n\r\n        getNewBlockDefaultPosition(blockSize) {\r\n            var rect = this.getDimensions();\r\n            var position = [\r\n                (-this.state.center[0] + rect.width/2)/this.state.scale - blockSize[0]/2 + this.newBlockOffset,\r\n                (-this.state.center[1] + rect.height/2)/this.state.scale - blockSize[1]/2 + this.newBlockOffset\r\n            ];\r\n            if (this.newBlockOffset < 150) {\r\n                this.newBlockOffset += 10;\r\n            }\r\n            return position;\r\n        },\r\n\r\n        getBlockSize(block) {\r\n            if (block.$el) {\r\n                let dim = block.$el.getDimensions();\r\n                return [dim.width / this.state.scale, dim.height / this.state.scale];\r\n            }\r\n\r\n            let inputs = Math.max(\r\n                Utils.size(block.arguments),\r\n                Utils.isObject(block.spec) ? Utils.size(block.spec.parameters) : 0\r\n            );\r\n\r\n            let size = Config.blockWidth;\r\n            let width;\r\n            if (inputs > 0) {\r\n                width = this.state.compactMode ? size.compactParams : size.normalParams;\r\n            }\r\n            else {\r\n                width = this.state.compactMode ? size.compact : size.normal;\r\n            }\r\n\r\n            let commentHeight = typeof block.description === 'string' ? 40 : 0;\r\n            let height = MARGIN + inputs * 15 + commentHeight;\r\n\r\n            return [width, height];\r\n        },\r\n\r\n        moveCenter(dX, dY, reset = false) {\r\n            var rect = this.getDimensions();\r\n            this.state.center = [\r\n                (reset ? rect.width/2 : this.state.center[0]) + dX,\r\n                (reset ? rect.height/2 : this.state.center[1]) + dY\r\n            ];\r\n            this.newBlockOffset = 0;\r\n        },\r\n\r\n        unselectAll() {\r\n            for(var block of this.blocks) {\r\n                this.updateBlockSelected(block, false, false);\r\n            }\r\n            for(var edge of this.edges) {\r\n                this.selectEdge(edge, false);\r\n            }\r\n        },\r\n\r\n        selectEdge(edge, select = true, parameter = null) {\r\n            if (!Utils.isObject(edge)) {\r\n                edge = this.edges[edge];\r\n            }\r\n            if (edge.selected === select) {\r\n                return false; // Nothing to change\r\n            }\r\n            if (select !== null) {\r\n                this.$set(edge, \"selected\", select);\r\n            }\r\n            this.$set(edge, \"selectedParameter\", parameter);\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Edge to remove\r\n         */\r\n        removeEdge(edge) {\r\n            edge.parameter1.eraseEdge(edge);\r\n            edge.parameter2.eraseEdge(edge);\r\n            this.$delete(this.edges, this.edges.indexOf(edge));\r\n        },\r\n            \r\n        /**\r\n         * Remove a block\r\n         */\r\n        async removeBlock(block) {\r\n            // Check if the parameter for this block is used in child processes (callbacks).\r\n            // Then don't delete, but give error instead.\r\n            if (block.type === 'parameter') {\r\n                let param = null;\r\n                let conflictBlock = this.blocks.find(otherBlock => {\r\n                    param = otherBlock.$el.hiddenParameterRef(block);\r\n                    return (param !== null);\r\n                });\r\n                if (conflictBlock) {\r\n                    throw new Error(`Parameter is still used in '${conflictBlock.id}', parameter '${param}'. Only unused parameters can be deleted.`);\r\n                }\r\n            }\r\n\r\n            // now start deleting the block\r\n            return await this.startTransaction(async () => {\r\n                var i = this.blocks.findIndex(b => b.id == block.id);\r\n                if (i < 0) {\r\n                    return false;\r\n                }\r\n\r\n                for (var edge of this.edges.slice(0)) {\r\n                    if (edge.parameter1.$parent.id === block.id || edge.parameter2.$parent.id === block.id) {\r\n                        this.removeEdge(edge);\r\n                    }\r\n                }\r\n\r\n                if (block.result) {\r\n                    this.setResultNode(block, false);\r\n                }\r\n\r\n                this.$delete(this.blocks, i);\r\n                return true;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Retreive a block by ID\r\n         */\r\n        getBlockById(blockId) {\r\n            var blocks = this.blocks.filter(block => block.id === blockId);\r\n            if (blocks.length > 0) {\r\n                return blocks[0];\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Delete the current link\r\n         */\r\n        async deleteSelected() {\r\n            if (!this.hasSelection) {\r\n                return false;\r\n            }\r\n\r\n            return await this.startTransaction(async () => {\r\n                // Remove the selected blocks and its edges\r\n                for(var block of this.selectedBlocks.slice(0)) { // copy to avoid race condition\r\n                    if (block.$el.allowsDelete) {\r\n                        await this.removeBlock(block);\r\n                    }\r\n                }\r\n\r\n                // Removes the selected edges\r\n                for(var edge of this.selectedEdges.slice(0)) { // copy to avoid race condition\r\n                    this.removeEdge(edge);\r\n                }\r\n                return true;\r\n            });\r\n        },\r\n\r\n        async addEdgeByNames(b1, p1, b2, p2) {\r\n            var blocks = [];\r\n            for(var id of [b1, b2]) {\r\n                var block = this.getBlockById(id);\r\n                if (!block) {\r\n                    throw \"Can't find block: \" + id;\r\n                }\r\n                else if (!block.$el) {\r\n                    throw \"Block not mounted yet: \" + id;\r\n                }\r\n                blocks.push(block.$el);\r\n            }\r\n            await this.addEdge(\r\n                blocks[0].getBlockParameter(p1),\r\n                blocks[1].getBlockParameter(p2)\r\n            );\r\n        },\r\n \r\n        async addEdge(p1, p2) {\r\n            if (!p1 || !p2) {\r\n                throw 'One of the parameters is invalid.';\r\n            }\r\n            // Check whether you want to connect the same parameters\r\n            if (p1 == p2) {\r\n                return; // Probably by mistake, don't show an error to not annoy people\r\n            }\r\n            // Check whether you want to connect the block to itself\r\n            if (p1.$parent == p2.$parent) {\r\n                throw 'You can\\'t link a block to itself';\r\n            }\r\n\r\n            var id = this.nextEdgeId++;\r\n            var edge = {id, selected: false, inactive: false, issues: [], $el: null};\r\n            if (p1.output) {\r\n                edge.parameter1 = p1;\r\n                edge.parameter2 = p2;\r\n            }\r\n            else {\r\n                // Reverse the order of in and out\r\n                edge.parameter1 = p2;\r\n                edge.parameter2 = p1;\r\n            }\r\n\r\n            // You have to link an input with an output\r\n            if (edge.parameter1.output === edge.parameter2.output) {\r\n                throw 'You have to link an input with an output';\r\n            }\r\n            // Check for non-recursiveness\r\n            if (this.allSuccessors(edge.parameter1).indexOf(edge.parameter2.id) !== -1) {\r\n                throw 'You can not create a loop';\r\n            }\r\n            // Check whether the data type allows multiple input edges\r\n            if (edge.parameter2.getEdgeCount() > 0 && !edge.parameter2.allowsMultipleInputs) {\r\n                throw 'Parameter accepts only one input';\r\n            }\r\n\r\n            // Check whether the edge exists\r\n            for (var other of this.edges) {\r\n                if (other.$el && other.$el.equals(edge)) {\r\n                    throw 'This connection exists already';\r\n                }\r\n            }\r\n\r\n            // Check type compatibility\r\n            if (!JsonSchemaValidator.isSchemaCompatible(edge.parameter2.schema || {}, edge.parameter1.schema || {}, false, true)) {\r\n                let issue = 'Incoming data type is not compatible for parameter \"' + edge.parameter2.name + '\"';\r\n                edge.issues.push(issue);\r\n                this.$emit('error', issue);\r\n            }\r\n\r\n            return await this.startTransaction(async () => {\r\n                this.unlink();\r\n\r\n                // Create edge\r\n                this.edges.push(Vue.observable(edge));\r\n                edge.parameter1.addEdge(edge);\r\n                edge.parameter2.addEdge(edge);\r\n\r\n                // Update result node\r\n                this.setResultNode(edge.parameter1.$parent, false);\r\n                return true;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Find all successors of a block, and their successors\r\n         */\r\n        allSuccessors(outputParameter) {\r\n            var block = outputParameter.$parent;\r\n            // Blocks already explored\r\n            var explored = {};\r\n            var exploreList = [block];\r\n            explored[block.id] = true;\r\n        \r\n            while (exploreList.length > 0) {\r\n                var currentBlock = exploreList.pop();\r\n                for (var key in currentBlock.edges) {\r\n                    for (var i in currentBlock.edges[key]) {\r\n                        var edge = currentBlock.edges[key][i];\r\n                        if (edge.block1 == currentBlock) {\r\n                            var target = edge.block2;\r\n                            if (!(target.id in explored)) {\r\n                                explored[target.id] = true;\r\n                                exploreList.push(target);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return Object.values(explored);\r\n        },\r\n\r\n        /**\r\n         * Changing the compact mode\r\n         */\r\n        async toggleCompact() {\r\n            this.state.compactMode = !this.state.compactMode;\r\n            this.$emit('compactMode', this.state.compactMode);\r\n            await this.$nextTick();\r\n            this.refreshEdges();\r\n        },\r\n\r\n        export(internal = false) {\r\n            let data = {\r\n                process_graph: {}\r\n            };\r\n\r\n            for(let block of this.processBlocks) {\r\n                let keys = ['process_id', 'namespace', 'arguments', 'description', 'result'];\r\n                if (internal) {\r\n                    // Keep internal state for history\r\n                    keys.push('position');\r\n                }\r\n                let copy = Utils.pickFromObject(block, keys);\r\n                // Remove default values for simplicity\r\n                if (copy.description === null) {\r\n                    delete copy.description;\r\n                }\r\n                if (copy.result !== true) {\r\n                    delete copy.result;\r\n                }\r\n                if (!copy.namespace) {\r\n                    delete copy.namespace;\r\n                }\r\n                let nodeId = block.id.substr(1);\r\n                data.process_graph[nodeId] = copy;\r\n            }\r\n\r\n            if (!this.parent) {\r\n                data.parameters = [];\r\n                let parameterBlocks = this.getPgParameters();\r\n                for(let param of parameterBlocks) {\r\n                    data.parameters.push(param.spec);\r\n                }\r\n            }\r\n\r\n            // ToDo: Currently, we just use the id, categories, result value etc from the original process.\r\n            // Implement to allow custom settings from users.\r\n            return new BlocksProcess(Object.assign({}, this.process, data));\r\n        },\r\n\r\n        // Options may contain:\r\n        // - undoOnError: don't undo changes when an error occured (default: true)\r\n        // - saveHistory: commit the changes to the history (default: true)\r\n        // - propagate: emit the changes to the parent v-model (default: true)\r\n        async startTransaction(fn, options = {}, ...args) {\r\n            let success;\r\n            this.activeTransactions++;\r\n\r\n            try {\r\n                success = await fn(args);\r\n            } catch (error) {\r\n                // If an error occured: show it and restore the last working state from history.\r\n                this.$emit('error', error, \"Model is invalid\");\r\n                if (options.undoOnError !== false) {\r\n                    try {\r\n                        await this.undo();\r\n                    } catch (error2) {\r\n                        this.$emit('error', error, \"Revert failed\");\r\n                    }\r\n                }\r\n                success = false;\r\n            }\r\n\r\n            this.activeTransactions--;\r\n            this.commit(null, options.saveHistory, options.propagate);\r\n\r\n            return success;\r\n        },\r\n\r\n        // Options may contain:\r\n        // - all from startTransaction()\r\n        // - clear: Clear the model builder before import (default: true)\r\n        // - perfectScale: Apply perfect scale after import (default: true)\r\n        async import(process, options = {}) {\r\n            return await this.startTransaction(async () => {\r\n                // clear screen...\r\n                if (options.clear !== false) {\r\n                    await this.clear();\r\n                    this.process = process instanceof ProcessGraph ? process.toJSON() : process;\r\n                }\r\n\r\n                if (!Utils.isObject(process)) {\r\n                    return false;\r\n                }\r\n\r\n                // Parse process\r\n                let pg;\r\n                if (process instanceof ProcessGraph) {\r\n                    // Make a copy\r\n                    pg = new ProcessGraph(process.toJSON(), this.processRegistry);\r\n                    pg.setParent(process.parentProcessId, process.parentParameterName);\r\n                }\r\n                else {\r\n                    pg = new ProcessGraph(process, this.processRegistry);\r\n                }\r\n                pg.allowEmpty();\r\n                pg.parse();\r\n                this.processGraph = Object.freeze(pg);\r\n\r\n                await this.importPgParameters(this.processGraph.getProcessParameters(true), 'user', options.clear !== false);\r\n                await this.importNodes(this.processGraph.getStartNodes());\r\n                await this.importEdges(this.processGraph);\r\n\r\n                if (options.perfectScale !== false) {\r\n                    this.perfectScale();\r\n                }\r\n\r\n                this.$nextTick(() => this.updateHiddenParameterRefEdges());\r\n\r\n                return true;\r\n            }, options);\r\n        },\r\n\r\n        async importPgParameters(params, origin, clear = true) {\r\n            if (!Array.isArray(params)) {\r\n                return;\r\n            }\r\n\r\n            let options = {\r\n                undoOnError: false,\r\n                saveHistory: false,\r\n                propagate: false\r\n            };\r\n            return await this.startTransaction(async () => {\r\n                // Remove existing parameters from the given origin\r\n                if (clear) {\r\n                    this.blocks = this.blocks.filter(b => b.type !== 'parameter' || b.origin !== origin);\r\n                }\r\n\r\n                let size = this.getBlockSize({}); // Estimate base size for an empty block\r\n                let position = [0,0];\r\n                for(var i in params) {\r\n                    position = [\r\n                        -size[0] - MARGIN,\r\n                        i * (size[1] + MARGIN)\r\n                    ];\r\n\r\n                    await this.addPgParameter(params[i], origin, position);\r\n                }\r\n            }, options);\r\n        },\r\n\r\n        async addPgParameter(param, origin = 'user', position = null) {\r\n            return await this.startTransaction(async () => {\r\n                let id = '$' + param.name;\r\n                // Check a parameter with the same name exists\r\n                if (this.blocks.findIndex(p => p.type === 'parameter' && p.id == id) >= 0) {\r\n                    return false;\r\n                }\r\n                param = Utils.deepClone(param);\r\n                if (typeof param.schema === 'undefined') {\r\n                    param.schema = {};\r\n                }\r\n                this.blocks.push(Vue.observable({\r\n                    id,\r\n                    type: 'parameter',\r\n                    origin,\r\n                    position: Utils.ensurePoint(position, () => this.getNewBlockDefaultPosition(this.getBlockSize({}))),\r\n                    spec: Object.freeze(param)\r\n                }));\r\n                return true;\r\n            });\r\n        },\r\n\r\n        getPgParameters() {\r\n            return this.blocks.filter(b => b.type === 'parameter');\r\n        },\r\n\r\n        getPgParameterById(id) {\r\n            return this.blocks.find(b => b.type === 'parameter' && b.id === id);\r\n        },\r\n\r\n        async importEdges(pg) {\r\n            var nodes = pg.getNodes();\r\n            for(var node of Object.values(nodes)) {\r\n                var args = node.getArgumentNames();\r\n                for(let i in args) {\r\n                    var val = node.getRawArgument(args[i]);\r\n                    switch(node.getArgumentType(args[i])) {\r\n                        case 'result':\r\n                            await this.addEdgeByNames('#' + pg.getNode(val.from_node).id, \"output\", '#' + node.id, args[i], false);\r\n                            break;\r\n                        case 'parameter':\r\n                            await this.addEdgeByNames('$' + val.from_parameter, \"output\", '#' + node.id, args[i], false);\r\n                            break;\r\n                        case 'object':\r\n                        case 'array':\r\n                            await this.importEdgeDeep(val, pg, node, args, i);\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        async importEdgeDeep(val, pg, node, args, i) {\r\n            for(let k in val) {\r\n                // k !== 'process_graph' prevents importing sub process graphs like in load_collection, see #118\r\n                if(val[k] && typeof val[k] === \"object\" && k !== 'process_graph') {\r\n                    await this.importEdgeDeep(val[k], pg, node, args, i);\r\n                }\r\n                else if (!Utils.isRef(val)) {\r\n                    continue;\r\n                }\r\n                else if (val.from_node) {\r\n                    await this.addEdgeByNames('#' + pg.getNode(val.from_node).id, \"output\", '#' + node.id, args[i], false);\r\n                }\r\n                else if (val.from_parameter) {\r\n                    await this.addEdgeByNames('$' + val.from_parameter, \"output\", '#' + node.id, args[i], false);\r\n                }\r\n            }\r\n        },\r\n\r\n        async importNodes(nodes, x = 0, y = 0, imported = []) {\r\n            let nextNodes = [];\r\n            let maxX = 0;\r\n            for(let node of nodes) {\r\n                // `node` is a Node class instance as defined by the js-processgraphs library\r\n                // `data` is the simple object that is defined by JSON process graphs\r\n                // `block` is the representation used by the Block component to render the block\r\n\r\n                // To get a better layout, only add the block once all previous nodes are added\r\n                if (imported.includes(node.id) || node.getPreviousNodes().find(prev => !imported.includes(prev.id)) !== undefined) {\r\n                    y += MARGIN / 2; // add a small offset so that lines going through a box are easier to see\r\n                    continue;\r\n                }\r\n\r\n                let data = typeof node.toJSON === 'function' ? node.toJSON() : node;\r\n                data.position = Utils.ensurePoint(data.position, () => [x,y]);\r\n\r\n                let block = this.addBlock(data, node.id);\r\n                imported.push(node.id);\r\n\r\n                let size = this.getBlockSize(block);\r\n                maxX = Math.max(maxX, data.position[0] + size[0]);\r\n                y = data.position[1] + size[1] + MARGIN;\r\n\r\n                nextNodes = nextNodes.concat(node.getNextNodes());\r\n            }\r\n            if (nextNodes.length) {\r\n                await this.importNodes(nextNodes, maxX + MARGIN, 0, imported);\r\n            }\r\n        },\r\n\r\n        incrementId(id = null) {\r\n            if (typeof id !== 'number' && (typeof id !== 'string' || id.length === 0)) {\r\n                id = this.nextBlockId;\r\n                this.nextBlockId++;\r\n            }\r\n            let int = Number.parseInt(id, 10);\r\n            if (!Number.isNaN(int)) {\r\n                this.nextBlockId = Math.max(this.nextBlockId, int+1);\r\n            }\r\n            return id;\r\n        },\r\n\r\n        /**\r\n         * Go to the perfect scale\r\n         */\r\n        perfectScale() {\r\n            if (!this.$refs.div || this.blocks.length === 0) {\r\n                return;\r\n            }\r\n\r\n            var xMin = null, xMax = null;\r\n            var yMin = null, yMax = null;\r\n\r\n            for (let block of this.blocks) {\r\n                let size = this.getBlockSize(block);\r\n                let pos = Utils.ensurePoint(block.position);\r\n                if (xMin == null) {\r\n                    xMin = pos[0]-15\r\n                    xMax = pos[0]+size[0]+15;\r\n                    yMin = pos[1]-15\r\n                    yMax = pos[1]+size[1]+15;\r\n                } else {\r\n                    xMin = Math.min(xMin, pos[0]-15);\r\n                    xMax = Math.max(xMax, pos[0]+size[0]+15);\r\n                    yMin = Math.min(yMin, pos[1]-15);\r\n                    yMax = Math.max(yMax, pos[1]+size[1]+15);\r\n                }\r\n            }\r\n\r\n            var rect = this.$refs.div.getBoundingClientRect();\r\n            var scaleA = rect.width/(xMax-xMin);\r\n            var scaleB = rect.height/(yMax-yMin);\r\n            this.state.scale = Math.min(scaleA, scaleB, 1.5); // Don't scale higher than 1.5\r\n            this.state.center = [\r\n                rect.width/2 - this.state.scale*(xMin+xMax)/2.0,\r\n                rect.height/2 - this.state.scale*(yMin+yMax)/2.0\r\n            ];\r\n            this.newBlockOffset = 0;\r\n        },\r\n\r\n        showParameterViewer(parameters, values, title, isEditable, selectParameterName, saveCallback, parent) {\r\n            this.parameterViewer = {\r\n                parameters,\r\n                values,\r\n                title,\r\n                selectParameterName,\r\n                parent\r\n            };\r\n        }\r\n    }\r\n};\r\n\r\nclass BlocksProcess {\r\n    constructor(process) {\r\n        Object.assign(this, process);\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.vue-component.model-builder {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: relative;\r\n\r\n    &.editable.focus .blocks {\r\n        border-color: rgba(22, 102, 182, 0.3);\r\n    }\r\n\r\n    &:focus,\r\n    .blocks:focus,\r\n    .canvas:focus {\r\n        outline: 0;\r\n    }\r\n    \r\n    .canvas {\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        z-index: 1;\r\n    }\r\n    \r\n    .blocks {\r\n        box-sizing: border-box;\r\n        border: 1px solid transparent;\r\n        overflow: hidden;\r\n        position: absolute;\r\n        z-index: 3;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    &.compact .blockicon .delete,\r\n    &.compact .blockicon .info,\r\n    &.compact .blockicon .addDescription,\r\n    &.compact .blockId,\r\n    &.compact .editDescription, \r\n    &.scale_xs .blockicon,\r\n    &.scale_s .blockicon,\r\n    &.scale_xs .connector .text {\r\n        display: none;\r\n    }\r\n    .zoomInfo {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        display: inline-block;\r\n        padding: 0.3em;\r\n        background-color: #f9f9f9;\r\n        border-radius: 0 0 0 0.3em;\r\n        z-index: 5;\r\n    }\r\n    &.scale_xs .editDescription {\r\n        visibility: hidden;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModelBuilder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModelBuilder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModelBuilder.vue?vue&type=template&id=46a53729&\"\nimport script from \"./ModelBuilder.vue?vue&type=script&lang=js&\"\nexport * from \"./ModelBuilder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModelBuilder.vue?vue&type=style&index=0&id=46a53729&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./data')\n  , util = require('./compile/util');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\nAjv.prototype.validateKeyword = customKeyword.validate;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-07/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes', 'strictDefaults' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  if (opts.keywords) addInitialKeywords(this);\n  addDefaultMetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  if (opts.nullable) this.addKeyword('nullable', {metaSchema: {type: 'boolean'}});\n  addInitialSchemas(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async !== true) this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var valid = this.validate($schema, schema);\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  catch(e) {\n    delete schemaObj.validate;\n    throw e;\n  }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case 'auto': return _get$IdOrId;\n    case 'id': return _getId;\n    default: return _get$Id;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDefaultMetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-07.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction addInitialKeywords(self) {\n  for (var name in self._opts.keywords) {\n    var keyword = self._opts.keywords[name];\n    self.addKeyword(name, keyword);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n","'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n","'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n","'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n","'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,28,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nvar HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nvar JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction isLeapYear(year) {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var year = +matches[1];\n  var month = +matches[2];\n  var day = +matches[3];\n\n  return month >= 1 && month <= 12 && day >= 1 &&\n          day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return ((hour <= 23 && minute <= 59 && second <= 59) ||\n          (hour == 23 && minute == 59 && second == 60)) &&\n         (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n","'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('fast-json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var validate = compilation.validate;\n    var result = validate.apply(this, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      logger: self.logger,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode, _schema);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      self.logger.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && !!refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    if (self._opts.validateSchema !== false) {\n      var deps = rule.definition.dependencies;\n      if (deps && !deps.every(function(keyword) {\n        return Object.prototype.hasOwnProperty.call(parentSchema, keyword);\n      }))\n        throw new Error('parent schema must have all required keywords: ' + deps.join(','));\n\n      var validateSchema = rule.definition.validateSchema;\n      if (validateSchema) {\n        var valid = validateSchema(schema);\n        if (!valid) {\n          var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n          if (self._opts.validateSchema == 'log') self.logger.error(message);\n          else throw new Error(message);\n        }\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n","'use strict';\n\nvar URI = require('uri-js')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = URI.parse(ref)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (Object.keys(root.schema).length === 0 || refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.fragment = parsedRef.fragment || '';\n  if (parsedRef.fragment.slice(0,1) != '/') return;\n  var parts = parsedRef.fragment.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = URI.parse(id);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  return URI.serialize(p).split('#')[0] + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return URI.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? URI.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n","'use strict';\n\nvar ruleModules = require('../dotjs')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'items', 'contains', 'uniqueItems' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf', 'if' ] }\n  ];\n\n  var ALL = [ 'type', '$comment' ];\n  var KEYWORDS = [\n    '$schema', '$id', 'id', '$data', '$async', 'title',\n    'description', 'default', 'definitions',\n    'examples', 'readOnly', 'writeOnly',\n    'contentMediaType', 'contentEncoding',\n    'additionalItems', 'then', 'else'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    RULES.all.$comment = {\n      keyword: '$comment',\n      code: ruleModules.$comment\n    };\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n","'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n","'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n","'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  schemaUnknownRules: schemaUnknownRules,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, strictNumbers, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data +\n                           (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    case 'number': return '(typeof ' + data + EQUAL + '\"' + dataType + '\"' +\n                          (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data, strictNumbers) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, strictNumbers, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, strictNumbers, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction schemaUnknownRules(schema, rules) {\n  if (typeof schema == 'boolean') return;\n  for (var key in schema) if (!rules[key]) return key;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/([^\\\\])' \\+ '/g, '$1');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n","'use strict';\n\nvar metaSchema = require('./refs/json-schema-draft-07.json');\n\nmodule.exports = {\n  $id: 'https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js',\n  definitions: {\n    simpleTypes: metaSchema.definitions.simpleTypes\n  },\n  type: 'object',\n  dependencies: {\n    schema: ['validate'],\n    $data: ['validate'],\n    statements: ['inline'],\n    valid: {not: {required: ['macro']}}\n  },\n  properties: {\n    type: metaSchema.properties.type,\n    schema: {type: 'boolean'},\n    statements: {type: 'boolean'},\n    dependencies: {\n      type: 'array',\n      items: {type: 'string'}\n    },\n    metaSchema: {type: 'object'},\n    modifying: {type: 'boolean'},\n    valid: {type: 'boolean'},\n    $data: {type: 'boolean'},\n    async: {type: 'boolean'},\n    errors: {\n      anyOf: [\n        {type: 'boolean'},\n        {const: 'full'}\n      ]\n    }\n  }\n};\n","'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if (!($isData || typeof $schema == 'number' || $schema === undefined)) {\n    throw new Error($keyword + ' must be number');\n  }\n  if (!($isDataExcl || $schemaExcl === undefined || typeof $schemaExcl == 'number' || typeof $schemaExcl == 'boolean')) {\n    throw new Error($exclusiveKeyword + ' must be number or boolean');\n  }\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\'; ';\n    if ($schema === undefined) {\n      $errorKeyword = $exclusiveKeyword;\n      $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n      $schemaValue = $schemaValueExcl;\n      $isData = $isDataExcl;\n    }\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return (it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all));\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_comment(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $comment = it.util.toQuotedString($schema);\n  if (it.opts.$comment === true) {\n    out += ' console.log(' + ($comment) + ');';\n  } else if (typeof it.opts.$comment == 'function') {\n    out += ' self._opts.$comment(' + ($comment) + ', ' + (it.util.toQuotedString($errSchemaPath)) + ', validate.root.schema);';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValue: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = (it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all));\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += 'await ';\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = await ' + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    if ($property == '__proto__') continue;\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? await ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        it.logger.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(await ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_if(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $thenSch = it.schema['then'],\n    $elseSch = it.schema['else'],\n    $thenPresent = $thenSch !== undefined && (it.opts.strictKeywords ? (typeof $thenSch == 'object' && Object.keys($thenSch).length > 0) || $thenSch === false : it.util.schemaHasRules($thenSch, it.RULES.all)),\n    $elsePresent = $elseSch !== undefined && (it.opts.strictKeywords ? (typeof $elseSch == 'object' && Object.keys($elseSch).length > 0) || $elseSch === false : it.util.schemaHasRules($elseSch, it.RULES.all)),\n    $currentBaseId = $it.baseId;\n  if ($thenPresent || $elsePresent) {\n    var $ifClause;\n    $it.createErrors = false;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = true;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    out += '  ' + (it.validate($it)) + ' ';\n    $it.baseId = $currentBaseId;\n    $it.createErrors = true;\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    if ($thenPresent) {\n      out += ' if (' + ($nextValid) + ') {  ';\n      $it.schema = it.schema['then'];\n      $it.schemaPath = it.schemaPath + '.then';\n      $it.errSchemaPath = it.errSchemaPath + '/then';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'then\\'; ';\n      } else {\n        $ifClause = '\\'then\\'';\n      }\n      out += ' } ';\n      if ($elsePresent) {\n        out += ' else { ';\n      }\n    } else {\n      out += ' if (!' + ($nextValid) + ') { ';\n    }\n    if ($elsePresent) {\n      $it.schema = it.schema['else'];\n      $it.schemaPath = it.schemaPath + '.else';\n      $it.errSchemaPath = it.errSchemaPath + '/else';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'else\\'; ';\n      } else {\n        $ifClause = '\\'else\\'';\n      }\n      out += ' } ';\n    }\n    out += ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('if') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { failingKeyword: ' + ($ifClause) + ' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match \"\\' + ' + ($ifClause) + ' + \\'\" schema\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' }   ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('./ref'),\n  allOf: require('./allOf'),\n  anyOf: require('./anyOf'),\n  '$comment': require('./comment'),\n  const: require('./const'),\n  contains: require('./contains'),\n  dependencies: require('./dependencies'),\n  'enum': require('./enum'),\n  format: require('./format'),\n  'if': require('./if'),\n  items: require('./items'),\n  maximum: require('./_limit'),\n  minimum: require('./_limit'),\n  maxItems: require('./_limitItems'),\n  minItems: require('./_limitItems'),\n  maxLength: require('./_limitLength'),\n  minLength: require('./_limitLength'),\n  maxProperties: require('./_limitProperties'),\n  minProperties: require('./_limitProperties'),\n  multipleOf: require('./multipleOf'),\n  not: require('./not'),\n  oneOf: require('./oneOf'),\n  pattern: require('./pattern'),\n  properties: require('./properties'),\n  propertyNames: require('./propertyNames'),\n  required: require('./required'),\n  uniqueItems: require('./uniqueItems'),\n  validate: require('./validate')\n};\n","'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && (it.opts.strictKeywords ? (typeof $additionalItems == 'object' && Object.keys($additionalItems).length > 0) || $additionalItems === false : it.util.schemaHasRules($additionalItems, it.RULES.all))) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $prevValid = 'prevValid' + $lvl,\n    $passingSchemas = 'passingSchemas' + $lvl;\n  out += 'var ' + ($errs) + ' = errors , ' + ($prevValid) + ' = false , ' + ($valid) + ' = false , ' + ($passingSchemas) + ' = null; ';\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && ' + ($prevValid) + ') { ' + ($valid) + ' = false; ' + ($passingSchemas) + ' = [' + ($passingSchemas) + ', ' + ($i) + ']; } else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') { ' + ($valid) + ' = ' + ($prevValid) + ' = true; ' + ($passingSchemas) + ' = ' + ($i) + '; }';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { passingSchemas: ' + ($passingSchemas) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}).filter(notProto),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties).filter(notProto),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.$data && $required.$data) && $required.length < it.opts.loopRequired) {\n    var $requiredHash = it.util.toHash($required);\n  }\n\n  function notProto(p) {\n    return p !== '__proto__';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 8) {\n          out += ' || validate.schema' + ($schemaPath) + '.hasOwnProperty(' + ($key) + ') ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is an invalid additional property';\n              } else {\n                out += 'should NOT have additional properties';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) {\n            /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr3 = $schemaKeys;\n    if (arr3) {\n      var $propertyKey, i3 = -1,\n        l3 = arr3.length - 1;\n      while (i3 < l3) {\n        $propertyKey = arr3[i3 += 1];\n        var $sch = $schema[$propertyKey];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr4 = $pPropertyKeys;\n    if (arr4) {\n      var $pProperty, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $pProperty = arr4[i4 += 1];\n        var $sch = $pProperties[$pProperty];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;';\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true || (it.async && $refVal.$async !== false);\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { await ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && (it.opts.strictKeywords ? (typeof $propertySch == 'object' && Object.keys($propertySch).length > 0) || $propertySch === false : it.util.schemaHasRules($propertySch, it.RULES.all)))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var i = ' + ($data) + '.length , ' + ($valid) + ' = true , j; if (i > 1) { ';\n    var $itemType = it.schema.items && it.schema.items.type,\n      $typeIsArray = Array.isArray($itemType);\n    if (!$itemType || $itemType == 'object' || $itemType == 'array' || ($typeIsArray && ($itemType.indexOf('object') >= 0 || $itemType.indexOf('array') >= 0))) {\n      out += ' outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } ';\n    } else {\n      out += ' var itemIndices = {}, item; for (;i--;) { var item = ' + ($data) + '[i]; ';\n      var $method = 'checkDataType' + ($typeIsArray ? 's' : '');\n      out += ' if (' + (it.util[$method]($itemType, 'item', it.opts.strictNumbers, true)) + ') continue; ';\n      if ($typeIsArray) {\n        out += ' if (typeof item == \\'string\\') item = \\'\"\\' + item; ';\n      }\n      out += ' if (typeof itemIndices[item] == \\'number\\') { ' + ($valid) + ' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';\n    }\n    out += ' } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.opts.strictKeywords) {\n    var $unknownKwd = it.util.schemaUnknownRules(it.schema, it.RULES.keywords);\n    if ($unknownKwd) {\n      var $keywordsMsg = 'unknown keyword: ' + $unknownKwd;\n      if (it.opts.strictKeywords === 'log') it.logger.warn($keywordsMsg);\n      else throw new Error($keywordsMsg);\n    }\n  }\n  if (it.isTop) {\n    out += ' var validate = ';\n    if ($async) {\n      it.async = true;\n      out += 'async ';\n    }\n    out += 'function(data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }; return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [\"\"];\n    if (it.schema.default !== undefined && it.opts.useDefaults && it.opts.strictDefaults) {\n      var $defaultMsg = 'default is ignored in the schema root';\n      if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n      else throw new Error($defaultMsg);\n    }\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeSchema && it.opts.nullable && it.schema.nullable === true) {\n    if ($typeIsArray) {\n      if ($typeSchema.indexOf('null') == -1) $typeSchema = $typeSchema.concat('null');\n    } else if ($typeSchema != 'null') {\n      $typeSchema = [$typeSchema, 'null'];\n      $typeIsArray = true;\n    }\n  }\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if (it.schema.$comment && it.opts.$comment) {\n    out += ' ' + (it.RULES.all.$comment.code(it, '$comment'));\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, it.opts.strictNumbers, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; var ' + ($coerced) + ' = undefined; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ') && ' + ($data) + '.length == 1) { ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + '; if (' + (it.util.checkDataType(it.schema.type, $data, it.opts.strictNumbers)) + ') ' + ($coerced) + ' = ' + ($data) + '; } ';\n        }\n        out += ' if (' + ($coerced) + ' !== undefined) ; ';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($type == 'string') {\n              out += ' else if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' else if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' else if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' else if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' else if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' else {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } if (' + ($coerced) + ' !== undefined) {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data, it.opts.strictNumbers)) + ') { ';\n          }\n          if (it.opts.useDefaults) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }; return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImplementsSomeKeyword($rule));\n  }\n\n  function $ruleImplementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n","'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i=0; i<dataType.length; i++)\n        _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n\n\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword\n                                  || this.compile(definitionSchema, true);\n\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError)\n    throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n  else\n    return false;\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n","'use strict'\n\n/**\n * box-box collision\n * @param {number} x1 top-left corner of first box\n * @param {number} y1 top-left corner of first box\n * @param {number} w1 width of first box\n * @param {number} h1 height of first box\n * @param {number} x2 top-left corner of second box\n * @param {number} y2 top-left corner of second box\n * @param {number} w2 width of second box\n * @param {number} h2 height of second box\n */\nmodule.exports = function boxBox(x1, y1, w1, h1, x2, y2, w2, h2)\n{\n    return x1 < x2 + w2 && x1 + w1 > x2 && y1 < y2 + h2 && y1 + h1 > y2\n}\n","'use strict'\n\nvar lineBox = require('./line-box')\n\n/**\n * box-line collision\n * @param {number} xb top-left corner of box\n * @param {number} yb top-left corner of box\n * @param {number} wb width of box\n * @param {number} hb height of box\n * @param {number} x1 first point of line\n * @param {number} y1 first point of line\n * @param {number} x2 second point of line\n * @param {number} y2 second point of line\n */\nmodule.exports = function boxLine(xb, yb, wb, hb, x1, y1, x2, y2)\n{\n    return lineBox(x1, y1, x2, y2, xb, yb, wb, hb)\n}\n","'use strict'\n\n/**\n * box-point collision\n * @param {number} x1 top-left corner of box\n * @param {number} y1 top-left corner of box\n * @param {number} w1 width of box\n * @param {number} h1 height of box\n * @param {number} x2 of point\n * @param {number} y2 of point\n * @return {boolean}\n */\nmodule.exports = function boxPoint(x1, y1, w1, h1, x2, y2)\n{\n    return x2 >= x1 && x2 <= x1 + w1 && y2 >= y1 && y2 <= y1 + h1\n}\n","'use strict'\n\nvar boxPoint = require('./box-point')\nvar lineLine = require('./line-line')\n\n/**\n * line-box collision\n number @param {number} x1 point 1 of line\n number @param {number} y1 point 1 of line\n number @param {number} x2 point 2 of line\n number @param {number} y2 point 2 of line\n number @param {number} xb top-left of box\n number @param {number} yb top-left of box\n number @param {number} wb width of box\n number @param {number} hb height of box\n */\nmodule.exports = function lineBox(x1, y1, x2, y2, xb, yb, wb, hb)\n{\n    if (boxPoint(xb, yb, wb, hb, x1, y1) || boxPoint(xb, yb, wb, hb, x2, y2))\n    {\n        return true\n    }\n    return lineLine(x1, y1, x2, y2, xb, yb, xb + wb, yb) ||\n        lineLine(x1, y1, x2, y2, xb + wb, yb, xb + wb, yb + hb) ||\n        lineLine(x1, y1, x2, y2, xb, yb + hb, xb + wb, yb + hb) ||\n        lineLine(x1, y1, x2, y2, xb, yb, xb, yb + hb)\n}\n","'use strict'\n\nconst lineToPolygon = require('./lineToPolygon')\nconst polygonPolygon = require('./polygon-polygon')\nconst linePolygon = require('./line-polygon')\nconst lineToLine = require('./lineToLine')\n\n/**\n * line-line collision\n * from http://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\n * @param {number} x1 first point in line 1\n * @param {number} y1 first point in line 1\n * @param {number} x2 second point in line 1\n * @param {number} y2 second point in line 1\n * @param {number} x3 first point in line 2\n * @param {number} y3 first point in line 2\n * @param {number} x4 second point in line 2\n * @param {number} y4 second point in line 2\n * @param {number} [thickness1] of line 1 (the line is centered in its thickness--see demo)\n * @param {number} [thickness2] of line 2 (the line is centered in its thickness--see demo)\n * @return {boolean}\n */\nmodule.exports = function lineLine(x1, y1, x2, y2, x3, y3, x4, y4, thickness1, thickness2)\n{\n    if (thickness1 || thickness2)\n    {\n        return lineLineThickness(x1, y1, x2, y2, x3, y3, x4, y4, thickness1, thickness2)\n    }\n    else\n    {\n        return lineToLine(x1, y1, x2, y2, x3, y3, x4, y4)\n    }\n}\n\nfunction lineLineThickness(x1, y1, x2, y2, x3, y3, x4, y4, thickness1, thickness2)\n{\n    if (thickness1 && thickness2)\n    {\n        return polygonPolygon(lineToPolygon(x1, y1, x2, y2, thickness1), lineToPolygon(x3, y3, x4, y4, thickness2))\n    }\n    else if (thickness1)\n    {\n        return linePolygon(x3, y3, x4, y4, lineToPolygon(x1, y1, x2, y2, thickness1))\n    }\n    else if (thickness2)\n    {\n        return linePolygon(x1, y1, x2, y2, lineToPolygon(x3, y3, x4, y4, thickness1))\n    }\n}","'use strict'\n\nfunction distanceSquared(x1, y1, x2, y2)\n{\n    return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2))\n}\n\n/**\n * line-point collision\n * from https://stackoverflow.com/a/17693146/1955997\n * @param {number} x1 first point in line\n * @param {number} y1 first point in line\n * @param {number} x2 second point in line\n * @param {number} y2 second point in line\n * @param {number} xp point\n * @param {number} yp point\n * @param {number} [tolerance=1]\n * @return {boolean}\n */\nmodule.exports = function linePoint(x1, y1, x2, y2, xp, yp, tolerance)\n{\n    tolerance = tolerance || 1\n    return Math.abs(distanceSquared(x1, y1, x2, y2) - (distanceSquared(x1, y1, xp, yp) + distanceSquared(x2, y2, xp, yp))) <= tolerance\n}","var polygonPoint = require('./polygon-point')\nvar lineLine = require('./lineToLine')\n\n/**\n * line-polygon collision\n @param {number} x1 point 1 of line\n @param {number} y1 point 1 of line\n @param {number} x2 point 2 of line\n @param {number} y2 point 2 of line\n @param {number[]} points of polygon\n @param {tolerance=1} maximum distance of point to polygon's edges that triggers collision (see pointLine)\n */\nmodule.exports = function linePolygon(x1, y1, x2, y2, points, tolerance)\n{\n    var length = points.length\n\n    // check if first point is inside the shape (this covers if the line is completely enclosed by the shape)\n    if (polygonPoint(points, x1, y1, tolerance))\n    {\n        return true\n    }\n\n    // check for intersections for all of the sides\n    for (var i = 0; i < length; i += 2)\n    {\n        var j = (i + 2) % length\n        if (lineLine(x1, y1, x2, y2, points[i], points[i + 1], points[j], points[j + 1]))\n        {\n            return true\n        }\n    }\n    return false\n}\n","'use strict'\n\n/**\n * lineToLine helper function (to avoid circular dependencies)\n * from http://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\n * @param {number} x1 first point in line 1\n * @param {number} y1 first point in line 1\n * @param {number} x2 second point in line 1\n * @param {number} y2 second point in line 1\n * @param {number} x3 first point in line 2\n * @param {number} y3 first point in line 2\n * @param {number} x4 second point in line 2\n * @param {number} y4 second point in line 2\n * @return {boolean}\n */\nmodule.exports = function lineToLine(x1, y1, x2, y2, x3, y3, x4, y4)\n{\n    var s1_x = x2 - x1\n    var s1_y = y2 - y1\n    var s2_x = x4 - x3\n    var s2_y = y4 - y3\n    var s = (-s1_y * (x1 - x3) + s1_x * (y1 - y3)) / (-s2_x * s1_y + s1_x * s2_y)\n    var t = (s2_x * (y1 - y3) - s2_y * (x1 - x3)) / (-s2_x * s1_y + s1_x * s2_y)\n    return s >= 0 && s <= 1 && t >= 0 && t <= 1\n}","'use strict'\n\n/**\n * turns a line into a polygon using thickness\n * @param {number} x1 first point of line\n * @param {number} y1 first point of line\n * @param {number} x2 second point of line\n * @param {number} y2 second point of line\n * @param {number} thickness of line\n */\nmodule.exports = function lineToPolygon(x1, y1, x2, y2, thickness)\n{\n    const angle = Math.atan2(y2 - y1, x2 - x1) - Math.PI / 2\n    const half = thickness / 2\n    const cos = Math.cos(angle) * half\n    const sin = Math.sin(angle) * half\n    return [\n        x1 - cos, y1 - sin,\n        x2 - cos, y2 - sin,\n        x2 + cos, y2 + sin,\n        x1 + cos, y1 + sin\n    ]\n}","'use strict'\n\nconst linePoint = require('./line-point')\n\n/**\n * polygon-point collision\n * based on https://stackoverflow.com/a/17490923/1955997\n * @param {number[]} points [x1, y1, x2, y2, ... xn, yn] of polygon\n * @param {number} x of point\n * @param {number} y of point\n * @param {number} [tolerance=1] maximum distance of point to polygon's edges that triggers collision (see pointLine)\n */\nmodule.exports = function polygonPoint(points, x, y, tolerance)\n{\n    var length = points.length\n    var c = false\n    var i, j\n    for (i = 0, j = length - 2; i < length; i += 2)\n    {\n        if (((points[i + 1] > y) !== (points[j + 1] > y)) && (x < (points[j] - points[i]) * (y - points[i + 1]) / (points[j + 1] - points[i + 1]) + points[i]))\n        {\n            c = !c\n        }\n        j = i\n    }\n    if (c)\n    {\n        return true\n    }\n    for (i = 0; i < length; i += 2)\n    {\n        var p1x = points[i]\n        var p1y = points[i + 1]\n        var p2x, p2y\n        if (i === length - 2)\n        {\n            p2x = points[0]\n            p2y = points[1]\n        }\n        else\n        {\n            p2x = points[i + 2]\n            p2y = points[i + 3]\n        }\n        if (linePoint(p1x, p1y, p2x, p2y, x, y, tolerance))\n        {\n            return true\n        }\n    }\n    return false\n}\n","'use strict'\n\n/**\n * polygon-polygon collision\n * based on http://stackoverflow.com/questions/10962379/how-to-check-intersection-between-2-rotated-rectangles\n * @param {number[]} points1 [x1, y1, x2, y2, ... xn, yn] of first polygon\n * @param {number[]} points2 [x1, y1, x2, y2, ... xn, yn] of second polygon\n * @return {boolean}\n */\nmodule.exports = function polygonPolygon(points1, points2)\n{\n    var a = points1\n    var b = points2\n    var polygons = [a, b]\n    var minA, maxA, projected, minB, maxB, j\n    for (var i = 0; i < polygons.length; i++)\n    {\n        var polygon = polygons[i]\n        for (var i1 = 0; i1 < polygon.length; i1 += 2)\n        {\n            var i2 = (i1 + 2) % polygon.length\n            var normal = { x: polygon[i2 + 1] - polygon[i1 + 1], y: polygon[i1] - polygon[i2] }\n            minA = maxA = null\n            for (j = 0; j < a.length; j += 2)\n            {\n                projected = normal.x * a[j] + normal.y * a[j + 1]\n                if (minA === null || projected < minA)\n                {\n                    minA = projected\n                }\n                if (maxA === null || projected > maxA)\n                {\n                    maxA = projected\n                }\n            }\n            minB = maxB = null\n            for (j = 0; j < b.length; j += 2)\n            {\n                projected = normal.x * b[j] + normal.y * b[j + 1]\n                if (minB === null || projected < minB)\n                {\n                    minB = projected\n                }\n                if (maxB === null || projected > maxB)\n                {\n                    maxB = projected\n                }\n            }\n            if (maxA < minB || maxB < minA)\n            {\n                return false\n            }\n        }\n    }\n    return true\n}\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.URI = global.URI || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction merge() {\n    for (var _len = arguments.length, sets = Array(_len), _key = 0; _key < _len; _key++) {\n        sets[_key] = arguments[_key];\n    }\n\n    if (sets.length > 1) {\n        sets[0] = sets[0].slice(0, -1);\n        var xl = sets.length - 1;\n        for (var x = 1; x < xl; ++x) {\n            sets[x] = sets[x].slice(1, -1);\n        }\n        sets[xl] = sets[xl].slice(1);\n        return sets.join('');\n    } else {\n        return sets[0];\n    }\n}\nfunction subexp(str) {\n    return \"(?:\" + str + \")\";\n}\nfunction typeOf(o) {\n    return o === undefined ? \"undefined\" : o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase();\n}\nfunction toUpperCase(str) {\n    return str.toUpperCase();\n}\nfunction toArray(obj) {\n    return obj !== undefined && obj !== null ? obj instanceof Array ? obj : typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj) : [];\n}\nfunction assign(target, source) {\n    var obj = target;\n    if (source) {\n        for (var key in source) {\n            obj[key] = source[key];\n        }\n    }\n    return obj;\n}\n\nfunction buildExps(isIRI) {\n    var ALPHA$$ = \"[A-Za-z]\",\n        CR$ = \"[\\\\x0D]\",\n        DIGIT$$ = \"[0-9]\",\n        DQUOTE$$ = \"[\\\\x22]\",\n        HEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"),\n        //case-insensitive\n    LF$$ = \"[\\\\x0A]\",\n        SP$$ = \"[\\\\x20]\",\n        PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)),\n        //expanded\n    GEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\n        SUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\n        RESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n        UCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\",\n        //subset, excludes bidi control characters\n    IPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\",\n        //subset\n    UNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$),\n        SCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\n        USERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\n        DEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\n        DEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$),\n        //relaxed parsing rules\n    IPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$),\n        H16$ = subexp(HEXDIG$$ + \"{1,4}\"),\n        LS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\n        IPV6ADDRESS1$ = subexp(subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$),\n        //                           6( h16 \":\" ) ls32\n    IPV6ADDRESS2$ = subexp(\"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$),\n        //                      \"::\" 5( h16 \":\" ) ls32\n    IPV6ADDRESS3$ = subexp(subexp(H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$),\n        //[               h16 ] \"::\" 4( h16 \":\" ) ls32\n    IPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$),\n        //[ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n    IPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$),\n        //[ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n    IPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" + H16$ + \"\\\\:\" + LS32$),\n        //[ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n    IPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\" + LS32$),\n        //[ *4( h16 \":\" ) h16 ] \"::\"              ls32\n    IPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\" + H16$),\n        //[ *5( h16 \":\" ) h16 ] \"::\"              h16\n    IPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"),\n        //[ *6( h16 \":\" ) h16 ] \"::\"\n    IPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")),\n        ZONEID$ = subexp(subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$) + \"+\"),\n        //RFC 6874\n    IPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \"\\\\%25\" + ZONEID$),\n        //RFC 6874\n    IPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + ZONEID$),\n        //RFC 6874, with relaxed parsing rules\n    IPVFUTURE$ = subexp(\"[vV]\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\n        IP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRZ_RELAXED$ + \"|\" + IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\n        //RFC 6874\n    REG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\n        HOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$),\n        PORT$ = subexp(DIGIT$$ + \"*\"),\n        AUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\n        PCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\n        SEGMENT$ = subexp(PCHAR$ + \"*\"),\n        SEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\n        SEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\n        PATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\n        PATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),\n        //simplified\n    PATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\",\n        PATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        QUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"),\n        FRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\n        HIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        RELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\n        RELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        URI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\n        ABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\n        GENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        RELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        ABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\n        SAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        AUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\";\n    return {\n        NOT_SCHEME: new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n        NOT_USERINFO: new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_HOST: new RegExp(merge(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH: new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH_NOSCHEME: new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_QUERY: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n        NOT_FRAGMENT: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n        ESCAPE: new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        UNRESERVED: new RegExp(UNRESERVED$$, \"g\"),\n        OTHER_CHARS: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\n        PCT_ENCODED: new RegExp(PCT_ENCODED$, \"g\"),\n        IPV4ADDRESS: new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n        IPV6ADDRESS: new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\") //RFC 6874, with relaxed parsing rules\n    };\n}\nvar URI_PROTOCOL = buildExps(false);\n\nvar IRI_PROTOCOL = buildExps(true);\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/** Highest positive signed 32-bit float value */\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error$1(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tvar result = [];\n\tvar length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tvar parts = string.split('@');\n\tvar result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tvar labels = string.split('.');\n\tvar encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\twhile (counter < length) {\n\t\tvar value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tvar extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) {\n\t\t\t\t// Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nvar ucs2encode = function ucs2encode(array) {\n\treturn String.fromCodePoint.apply(String, toConsumableArray(array));\n};\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nvar basicToDigit = function basicToDigit(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nvar digitToBasic = function digitToBasic(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nvar adapt = function adapt(delta, numPoints, firstTime) {\n\tvar k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (; /* no initialization */delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nvar decode = function decode(input) {\n\t// Don't use UCS-2.\n\tvar output = [];\n\tvar inputLength = input.length;\n\tvar i = 0;\n\tvar n = initialN;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tvar basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (var j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror$1('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (var index = basic > 0 ? basic + 1 : 0; index < inputLength;) /* no final expression */{\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tvar oldi = i;\n\t\tfor (var w = 1, k = base;; /* no condition */k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror$1('invalid-input');\n\t\t\t}\n\n\t\t\tvar digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\t\t}\n\n\t\tvar out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\t}\n\n\treturn String.fromCodePoint.apply(String, output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nvar encode = function encode(input) {\n\tvar output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tvar inputLength = input.length;\n\n\t// Initialize the state.\n\tvar n = initialN;\n\tvar delta = 0;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points.\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = input[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar _currentValue2 = _step.value;\n\n\t\t\tif (_currentValue2 < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(_currentValue2));\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t_iterator.return();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar basicLength = output.length;\n\tvar handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tvar m = maxInt;\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = input[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar currentValue = _step2.value;\n\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow.\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = input[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar _currentValue = _step3.value;\n\n\t\t\t\tif (_currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror$1('overflow');\n\t\t\t\t}\n\t\t\t\tif (_currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\t\tvar q = delta;\n\t\t\t\t\tfor (var k = base;; /* no condition */k += base) {\n\t\t\t\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar qMinusT = q - t;\n\t\t\t\t\t\tvar baseMinusT = base - t;\n\t\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nvar toUnicode = function toUnicode(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nvar toASCII = function toASCII(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nvar punycode = {\n\t/**\n  * A string representing the current Punycode.js version number.\n  * @memberOf punycode\n  * @type String\n  */\n\t'version': '2.1.0',\n\t/**\n  * An object of methods to convert from JavaScript's internal character\n  * representation (UCS-2) to Unicode code points, and back.\n  * @see <https://mathiasbynens.be/notes/javascript-encoding>\n  * @memberOf punycode\n  * @type Object\n  */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\n/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\nvar SCHEMES = {};\nfunction pctEncChar(chr) {\n    var c = chr.charCodeAt(0);\n    var e = void 0;\n    if (c < 16) e = \"%0\" + c.toString(16).toUpperCase();else if (c < 128) e = \"%\" + c.toString(16).toUpperCase();else if (c < 2048) e = \"%\" + (c >> 6 | 192).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();else e = \"%\" + (c >> 12 | 224).toString(16).toUpperCase() + \"%\" + (c >> 6 & 63 | 128).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();\n    return e;\n}\nfunction pctDecChars(str) {\n    var newStr = \"\";\n    var i = 0;\n    var il = str.length;\n    while (i < il) {\n        var c = parseInt(str.substr(i + 1, 2), 16);\n        if (c < 128) {\n            newStr += String.fromCharCode(c);\n            i += 3;\n        } else if (c >= 194 && c < 224) {\n            if (il - i >= 6) {\n                var c2 = parseInt(str.substr(i + 4, 2), 16);\n                newStr += String.fromCharCode((c & 31) << 6 | c2 & 63);\n            } else {\n                newStr += str.substr(i, 6);\n            }\n            i += 6;\n        } else if (c >= 224) {\n            if (il - i >= 9) {\n                var _c = parseInt(str.substr(i + 4, 2), 16);\n                var c3 = parseInt(str.substr(i + 7, 2), 16);\n                newStr += String.fromCharCode((c & 15) << 12 | (_c & 63) << 6 | c3 & 63);\n            } else {\n                newStr += str.substr(i, 9);\n            }\n            i += 9;\n        } else {\n            newStr += str.substr(i, 3);\n            i += 3;\n        }\n    }\n    return newStr;\n}\nfunction _normalizeComponentEncoding(components, protocol) {\n    function decodeUnreserved(str) {\n        var decStr = pctDecChars(str);\n        return !decStr.match(protocol.UNRESERVED) ? str : decStr;\n    }\n    if (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n    if (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    return components;\n}\n\nfunction _stripLeadingZeros(str) {\n    return str.replace(/^0*(.*)/, \"$1\") || \"0\";\n}\nfunction _normalizeIPv4(host, protocol) {\n    var matches = host.match(protocol.IPV4ADDRESS) || [];\n\n    var _matches = slicedToArray(matches, 2),\n        address = _matches[1];\n\n    if (address) {\n        return address.split(\".\").map(_stripLeadingZeros).join(\".\");\n    } else {\n        return host;\n    }\n}\nfunction _normalizeIPv6(host, protocol) {\n    var matches = host.match(protocol.IPV6ADDRESS) || [];\n\n    var _matches2 = slicedToArray(matches, 3),\n        address = _matches2[1],\n        zone = _matches2[2];\n\n    if (address) {\n        var _address$toLowerCase$ = address.toLowerCase().split('::').reverse(),\n            _address$toLowerCase$2 = slicedToArray(_address$toLowerCase$, 2),\n            last = _address$toLowerCase$2[0],\n            first = _address$toLowerCase$2[1];\n\n        var firstFields = first ? first.split(\":\").map(_stripLeadingZeros) : [];\n        var lastFields = last.split(\":\").map(_stripLeadingZeros);\n        var isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n        var fieldCount = isLastFieldIPv4Address ? 7 : 8;\n        var lastFieldsStart = lastFields.length - fieldCount;\n        var fields = Array(fieldCount);\n        for (var x = 0; x < fieldCount; ++x) {\n            fields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n        }\n        if (isLastFieldIPv4Address) {\n            fields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n        }\n        var allZeroFields = fields.reduce(function (acc, field, index) {\n            if (!field || field === \"0\") {\n                var lastLongest = acc[acc.length - 1];\n                if (lastLongest && lastLongest.index + lastLongest.length === index) {\n                    lastLongest.length++;\n                } else {\n                    acc.push({ index: index, length: 1 });\n                }\n            }\n            return acc;\n        }, []);\n        var longestZeroFields = allZeroFields.sort(function (a, b) {\n            return b.length - a.length;\n        })[0];\n        var newHost = void 0;\n        if (longestZeroFields && longestZeroFields.length > 1) {\n            var newFirst = fields.slice(0, longestZeroFields.index);\n            var newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n            newHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n        } else {\n            newHost = fields.join(\":\");\n        }\n        if (zone) {\n            newHost += \"%\" + zone;\n        }\n        return newHost;\n    } else {\n        return host;\n    }\n}\nvar URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nvar NO_MATCH_IS_UNDEFINED = \"\".match(/(){0}/)[1] === undefined;\nfunction parse(uriString) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var components = {};\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    if (options.reference === \"suffix\") uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n    var matches = uriString.match(URI_PARSE);\n    if (matches) {\n        if (NO_MATCH_IS_UNDEFINED) {\n            //store each component\n            components.scheme = matches[1];\n            components.userinfo = matches[3];\n            components.host = matches[4];\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = matches[7];\n            components.fragment = matches[8];\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = matches[5];\n            }\n        } else {\n            //IE FIX for improper RegExp matching\n            //store each component\n            components.scheme = matches[1] || undefined;\n            components.userinfo = uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined;\n            components.host = uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined;\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined;\n            components.fragment = uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined;\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined;\n            }\n        }\n        if (components.host) {\n            //normalize IP hosts\n            components.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n        }\n        //determine reference type\n        if (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n            components.reference = \"same-document\";\n        } else if (components.scheme === undefined) {\n            components.reference = \"relative\";\n        } else if (components.fragment === undefined) {\n            components.reference = \"absolute\";\n        } else {\n            components.reference = \"uri\";\n        }\n        //check for reference errors\n        if (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n            components.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n        }\n        //find scheme handler\n        var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n        //check if scheme can't handle IRIs\n        if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n            //if host component is a domain name\n            if (components.host && (options.domainHost || schemeHandler && schemeHandler.domainHost)) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            }\n            //convert IRI -> URI\n            _normalizeComponentEncoding(components, URI_PROTOCOL);\n        } else {\n            //normalize encodings\n            _normalizeComponentEncoding(components, protocol);\n        }\n        //perform scheme specific parsing\n        if (schemeHandler && schemeHandler.parse) {\n            schemeHandler.parse(components, options);\n        }\n    } else {\n        components.error = components.error || \"URI can not be parsed.\";\n    }\n    return components;\n}\n\nfunction _recomposeAuthority(components, options) {\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    if (components.userinfo !== undefined) {\n        uriTokens.push(components.userinfo);\n        uriTokens.push(\"@\");\n    }\n    if (components.host !== undefined) {\n        //normalize IP hosts, add brackets and escape zone separator for IPv6\n        uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, function (_, $1, $2) {\n            return \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\";\n        }));\n    }\n    if (typeof components.port === \"number\" || typeof components.port === \"string\") {\n        uriTokens.push(\":\");\n        uriTokens.push(String(components.port));\n    }\n    return uriTokens.length ? uriTokens.join(\"\") : undefined;\n}\n\nvar RDS1 = /^\\.\\.?\\//;\nvar RDS2 = /^\\/\\.(\\/|$)/;\nvar RDS3 = /^\\/\\.\\.(\\/|$)/;\nvar RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\nfunction removeDotSegments(input) {\n    var output = [];\n    while (input.length) {\n        if (input.match(RDS1)) {\n            input = input.replace(RDS1, \"\");\n        } else if (input.match(RDS2)) {\n            input = input.replace(RDS2, \"/\");\n        } else if (input.match(RDS3)) {\n            input = input.replace(RDS3, \"/\");\n            output.pop();\n        } else if (input === \".\" || input === \"..\") {\n            input = \"\";\n        } else {\n            var im = input.match(RDS5);\n            if (im) {\n                var s = im[0];\n                input = input.slice(s.length);\n                output.push(s);\n            } else {\n                throw new Error(\"Unexpected dot segment condition\");\n            }\n        }\n    }\n    return output.join(\"\");\n}\n\nfunction serialize(components) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var protocol = options.iri ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    //find scheme handler\n    var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n    //perform scheme specific serialization\n    if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n    if (components.host) {\n        //if host component is an IPv6 address\n        if (protocol.IPV6ADDRESS.test(components.host)) {}\n        //TODO: normalize IPv6 address as per RFC 5952\n\n        //if host component is a domain name\n        else if (options.domainHost || schemeHandler && schemeHandler.domainHost) {\n                //convert IDN via punycode\n                try {\n                    components.host = !options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host);\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n            }\n    }\n    //normalize encoding\n    _normalizeComponentEncoding(components, protocol);\n    if (options.reference !== \"suffix\" && components.scheme) {\n        uriTokens.push(components.scheme);\n        uriTokens.push(\":\");\n    }\n    var authority = _recomposeAuthority(components, options);\n    if (authority !== undefined) {\n        if (options.reference !== \"suffix\") {\n            uriTokens.push(\"//\");\n        }\n        uriTokens.push(authority);\n        if (components.path && components.path.charAt(0) !== \"/\") {\n            uriTokens.push(\"/\");\n        }\n    }\n    if (components.path !== undefined) {\n        var s = components.path;\n        if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n            s = removeDotSegments(s);\n        }\n        if (authority === undefined) {\n            s = s.replace(/^\\/\\//, \"/%2F\"); //don't allow the path to start with \"//\"\n        }\n        uriTokens.push(s);\n    }\n    if (components.query !== undefined) {\n        uriTokens.push(\"?\");\n        uriTokens.push(components.query);\n    }\n    if (components.fragment !== undefined) {\n        uriTokens.push(\"#\");\n        uriTokens.push(components.fragment);\n    }\n    return uriTokens.join(\"\"); //merge tokens into a string\n}\n\nfunction resolveComponents(base, relative) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var skipNormalization = arguments[3];\n\n    var target = {};\n    if (!skipNormalization) {\n        base = parse(serialize(base, options), options); //normalize base components\n        relative = parse(serialize(relative, options), options); //normalize relative components\n    }\n    options = options || {};\n    if (!options.tolerant && relative.scheme) {\n        target.scheme = relative.scheme;\n        //target.authority = relative.authority;\n        target.userinfo = relative.userinfo;\n        target.host = relative.host;\n        target.port = relative.port;\n        target.path = removeDotSegments(relative.path || \"\");\n        target.query = relative.query;\n    } else {\n        if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n            //target.authority = relative.authority;\n            target.userinfo = relative.userinfo;\n            target.host = relative.host;\n            target.port = relative.port;\n            target.path = removeDotSegments(relative.path || \"\");\n            target.query = relative.query;\n        } else {\n            if (!relative.path) {\n                target.path = base.path;\n                if (relative.query !== undefined) {\n                    target.query = relative.query;\n                } else {\n                    target.query = base.query;\n                }\n            } else {\n                if (relative.path.charAt(0) === \"/\") {\n                    target.path = removeDotSegments(relative.path);\n                } else {\n                    if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n                        target.path = \"/\" + relative.path;\n                    } else if (!base.path) {\n                        target.path = relative.path;\n                    } else {\n                        target.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\n                    }\n                    target.path = removeDotSegments(target.path);\n                }\n                target.query = relative.query;\n            }\n            //target.authority = base.authority;\n            target.userinfo = base.userinfo;\n            target.host = base.host;\n            target.port = base.port;\n        }\n        target.scheme = base.scheme;\n    }\n    target.fragment = relative.fragment;\n    return target;\n}\n\nfunction resolve(baseURI, relativeURI, options) {\n    var schemelessOptions = assign({ scheme: 'null' }, options);\n    return serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n}\n\nfunction normalize(uri, options) {\n    if (typeof uri === \"string\") {\n        uri = serialize(parse(uri, options), options);\n    } else if (typeOf(uri) === \"object\") {\n        uri = parse(serialize(uri, options), options);\n    }\n    return uri;\n}\n\nfunction equal(uriA, uriB, options) {\n    if (typeof uriA === \"string\") {\n        uriA = serialize(parse(uriA, options), options);\n    } else if (typeOf(uriA) === \"object\") {\n        uriA = serialize(uriA, options);\n    }\n    if (typeof uriB === \"string\") {\n        uriB = serialize(parse(uriB, options), options);\n    } else if (typeOf(uriB) === \"object\") {\n        uriB = serialize(uriB, options);\n    }\n    return uriA === uriB;\n}\n\nfunction escapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE, pctEncChar);\n}\n\nfunction unescapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED, pctDecChars);\n}\n\nvar handler = {\n    scheme: \"http\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        //report missing host\n        if (!components.host) {\n            components.error = components.error || \"HTTP URIs must have a host.\";\n        }\n        return components;\n    },\n    serialize: function serialize(components, options) {\n        var secure = String(components.scheme).toLowerCase() === \"https\";\n        //normalize the default port\n        if (components.port === (secure ? 443 : 80) || components.port === \"\") {\n            components.port = undefined;\n        }\n        //normalize the empty path\n        if (!components.path) {\n            components.path = \"/\";\n        }\n        //NOTE: We do not parse query strings for HTTP URIs\n        //as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n        //and not the HTTP spec.\n        return components;\n    }\n};\n\nvar handler$1 = {\n    scheme: \"https\",\n    domainHost: handler.domainHost,\n    parse: handler.parse,\n    serialize: handler.serialize\n};\n\nfunction isSecure(wsComponents) {\n    return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n}\n//RFC 6455\nvar handler$2 = {\n    scheme: \"ws\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        var wsComponents = components;\n        //indicate if the secure flag is set\n        wsComponents.secure = isSecure(wsComponents);\n        //construct resouce name\n        wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');\n        wsComponents.path = undefined;\n        wsComponents.query = undefined;\n        return wsComponents;\n    },\n    serialize: function serialize(wsComponents, options) {\n        //normalize the default port\n        if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n            wsComponents.port = undefined;\n        }\n        //ensure scheme matches secure flag\n        if (typeof wsComponents.secure === 'boolean') {\n            wsComponents.scheme = wsComponents.secure ? 'wss' : 'ws';\n            wsComponents.secure = undefined;\n        }\n        //reconstruct path from resource name\n        if (wsComponents.resourceName) {\n            var _wsComponents$resourc = wsComponents.resourceName.split('?'),\n                _wsComponents$resourc2 = slicedToArray(_wsComponents$resourc, 2),\n                path = _wsComponents$resourc2[0],\n                query = _wsComponents$resourc2[1];\n\n            wsComponents.path = path && path !== '/' ? path : undefined;\n            wsComponents.query = query;\n            wsComponents.resourceName = undefined;\n        }\n        //forbid fragment component\n        wsComponents.fragment = undefined;\n        return wsComponents;\n    }\n};\n\nvar handler$3 = {\n    scheme: \"wss\",\n    domainHost: handler$2.domainHost,\n    parse: handler$2.parse,\n    serialize: handler$2.serialize\n};\n\nvar O = {};\nvar isIRI = true;\n//RFC 3986\nvar UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\";\nvar HEXDIG$$ = \"[0-9A-Fa-f]\"; //case-insensitive\nvar PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)); //expanded\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = \"[\\\\x21-\\\\x7E]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\");\n//const QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$);\n//const QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"');\nvar ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\nvar QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\nvar VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\");\nvar SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\nvar UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\nvar PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\nvar NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\nvar NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\nvar NOT_HFVALUE = NOT_HFNAME;\nfunction decodeUnreserved(str) {\n    var decStr = pctDecChars(str);\n    return !decStr.match(UNRESERVED) ? str : decStr;\n}\nvar handler$4 = {\n    scheme: \"mailto\",\n    parse: function parse$$1(components, options) {\n        var mailtoComponents = components;\n        var to = mailtoComponents.to = mailtoComponents.path ? mailtoComponents.path.split(\",\") : [];\n        mailtoComponents.path = undefined;\n        if (mailtoComponents.query) {\n            var unknownHeaders = false;\n            var headers = {};\n            var hfields = mailtoComponents.query.split(\"&\");\n            for (var x = 0, xl = hfields.length; x < xl; ++x) {\n                var hfield = hfields[x].split(\"=\");\n                switch (hfield[0]) {\n                    case \"to\":\n                        var toAddrs = hfield[1].split(\",\");\n                        for (var _x = 0, _xl = toAddrs.length; _x < _xl; ++_x) {\n                            to.push(toAddrs[_x]);\n                        }\n                        break;\n                    case \"subject\":\n                        mailtoComponents.subject = unescapeComponent(hfield[1], options);\n                        break;\n                    case \"body\":\n                        mailtoComponents.body = unescapeComponent(hfield[1], options);\n                        break;\n                    default:\n                        unknownHeaders = true;\n                        headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n                        break;\n                }\n            }\n            if (unknownHeaders) mailtoComponents.headers = headers;\n        }\n        mailtoComponents.query = undefined;\n        for (var _x2 = 0, _xl2 = to.length; _x2 < _xl2; ++_x2) {\n            var addr = to[_x2].split(\"@\");\n            addr[0] = unescapeComponent(addr[0]);\n            if (!options.unicodeSupport) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n                } catch (e) {\n                    mailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            } else {\n                addr[1] = unescapeComponent(addr[1], options).toLowerCase();\n            }\n            to[_x2] = addr.join(\"@\");\n        }\n        return mailtoComponents;\n    },\n    serialize: function serialize$$1(mailtoComponents, options) {\n        var components = mailtoComponents;\n        var to = toArray(mailtoComponents.to);\n        if (to) {\n            for (var x = 0, xl = to.length; x < xl; ++x) {\n                var toAddr = String(to[x]);\n                var atIdx = toAddr.lastIndexOf(\"@\");\n                var localPart = toAddr.slice(0, atIdx).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n                var domain = toAddr.slice(atIdx + 1);\n                //convert IDN via punycode\n                try {\n                    domain = !options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain);\n                } catch (e) {\n                    components.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n                to[x] = localPart + \"@\" + domain;\n            }\n            components.path = to.join(\",\");\n        }\n        var headers = mailtoComponents.headers = mailtoComponents.headers || {};\n        if (mailtoComponents.subject) headers[\"subject\"] = mailtoComponents.subject;\n        if (mailtoComponents.body) headers[\"body\"] = mailtoComponents.body;\n        var fields = [];\n        for (var name in headers) {\n            if (headers[name] !== O[name]) {\n                fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) + \"=\" + headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));\n            }\n        }\n        if (fields.length) {\n            components.query = fields.join(\"&\");\n        }\n        return components;\n    }\n};\n\nvar URN_PARSE = /^([^\\:]+)\\:(.*)/;\n//RFC 2141\nvar handler$5 = {\n    scheme: \"urn\",\n    parse: function parse$$1(components, options) {\n        var matches = components.path && components.path.match(URN_PARSE);\n        var urnComponents = components;\n        if (matches) {\n            var scheme = options.scheme || urnComponents.scheme || \"urn\";\n            var nid = matches[1].toLowerCase();\n            var nss = matches[2];\n            var urnScheme = scheme + \":\" + (options.nid || nid);\n            var schemeHandler = SCHEMES[urnScheme];\n            urnComponents.nid = nid;\n            urnComponents.nss = nss;\n            urnComponents.path = undefined;\n            if (schemeHandler) {\n                urnComponents = schemeHandler.parse(urnComponents, options);\n            }\n        } else {\n            urnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n        }\n        return urnComponents;\n    },\n    serialize: function serialize$$1(urnComponents, options) {\n        var scheme = options.scheme || urnComponents.scheme || \"urn\";\n        var nid = urnComponents.nid;\n        var urnScheme = scheme + \":\" + (options.nid || nid);\n        var schemeHandler = SCHEMES[urnScheme];\n        if (schemeHandler) {\n            urnComponents = schemeHandler.serialize(urnComponents, options);\n        }\n        var uriComponents = urnComponents;\n        var nss = urnComponents.nss;\n        uriComponents.path = (nid || options.nid) + \":\" + nss;\n        return uriComponents;\n    }\n};\n\nvar UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\n//RFC 4122\nvar handler$6 = {\n    scheme: \"urn:uuid\",\n    parse: function parse(urnComponents, options) {\n        var uuidComponents = urnComponents;\n        uuidComponents.uuid = uuidComponents.nss;\n        uuidComponents.nss = undefined;\n        if (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n            uuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n        }\n        return uuidComponents;\n    },\n    serialize: function serialize(uuidComponents, options) {\n        var urnComponents = uuidComponents;\n        //normalize UUID\n        urnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n        return urnComponents;\n    }\n};\n\nSCHEMES[handler.scheme] = handler;\nSCHEMES[handler$1.scheme] = handler$1;\nSCHEMES[handler$2.scheme] = handler$2;\nSCHEMES[handler$3.scheme] = handler$3;\nSCHEMES[handler$4.scheme] = handler$4;\nSCHEMES[handler$5.scheme] = handler$5;\nSCHEMES[handler$6.scheme] = handler$6;\n\nexports.SCHEMES = SCHEMES;\nexports.pctEncChar = pctEncChar;\nexports.pctDecChars = pctDecChars;\nexports.parse = parse;\nexports.removeDotSegments = removeDotSegments;\nexports.serialize = serialize;\nexports.resolveComponents = resolveComponents;\nexports.resolve = resolve;\nexports.normalize = normalize;\nexports.equal = equal;\nexports.escapeComponent = escapeComponent;\nexports.unescapeComponent = unescapeComponent;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=uri.all.js.map\n"],"names":["Utils","MESSAGES","ProcessGraphError","Error","constructor","codeOrMsg","variables","super","this","code","message","replacePlaceholders","replace","toJSON","module","exports","ErrorList","errors","first","last","length","merge","errorList","concat","getAll","add","error","push","count","map","e","getMessage","msg","i","parseInt","trim","Ajv","ProcessUtils","keywords","geoJsonSchema","subtypeSchemas","JsonSchemaValidator","ajv","schemaId","format","addUsedSchema","addSchema","addKeyword","Object","assign","parameters","valid","returns","subtype","validate","async","data","schema","validateSubtype","collections","epsgCodes","fileFormats","input","output","processRegistry","udfRuntimes","getFunctionName","a","b","char","toUpperCase","makeSchema","$async","deepClone","Array","isArray","anyOf","$schema","isObject","definitions","key","value","required","properties","validated","funcName","setUdfRuntimes","setCollections","c","id","setFileFormats","io","setEpsgCodes","v","find","ValidationError","includes","toLowerCase","codeWords","some","word","indexOf","date1","Date","date2","getTime","interval","validateTemporalInterval","setProcessGraphParser","processGraph","ProcessGraph","parser","createProcessGraphInstance","static","paramSchema","valueSchema","strict","allowValueAsElements","paramSchemas","normalizeJsonSchema","valueSchemas","compatible","findIndex","ps","vs","type","items","isSchemaCompatible","metaSchema","dependencies","name","pattern","description","optional","default","deprecated","experimental","oneOf","BaseProcess","ProcessGraphNode","ProcessRegistry","node","parent","node_id","process_id","source","namespace","arguments","isResultNode","result","expectsFrom","receivedFrom","passesTo","computedResult","undefined","args","mapObjectValues","arg","getProcessGraph","getParent","getParentNode","getArgumentNames","keys","hasArgument","getArgumentType","getType","getRawArgument","getParsedArgument","getArgument","defaultValue","evaluateArgument","getArgumentRefs","getRefs","getProcessGraphParameterValue","pg","hasParameterDefault","getParameterDefault","allowUndefinedParameterRefs","argument","getNode","from_node","getResult","from_parameter","copy","isStartNode","addPreviousNode","other","getPreviousNodes","sort","localeCompare","addNextNode","getNextNodes","reset","getDescription","setDescription","setResult","solveDependency","dependencyNode","spec","omitFromObject","unsupportedArgs","filter","p","process","param","rawArg","validateArgument","path","argType","callbackParam","getCallbackParameter","reason","parameter","getProcessParameter","resultNode","getProcess","schemas","isProcessGraphSchema","containsRef","elementSchema","getElementJsonSchema","lastError","validator","getJsonSchemaValidator","validateValue","test","processKeys","jsonSchemaValidator","nodes","startNodes","children","parentNode","parsed","callbackParameters","allowEmptyGraph","fillProcessParameters","createJsonSchemaValidatorInstance","createNodeInstance","nodeObj","copyProcessGraphInstanceProperties","createProcessInstance","createChildProcessGraph","parameterPath","setArguments","setParentNode","parameterName","shift","setCallbackParameters","getCallbackParametersForProcess","getParentProcess","parse","isValid","addError","allowUndefinedParameters","allow","fillUndefinedParameters","fill","allowEmpty","makeError","errorId","getParentProcessId","size","process_graph","hasProcessKey","parseNodeArguments","values","throwOnErrors","validateNodes","getStartNodes","executeNodes","getResultNode","previousNode","promises","validateNode","Promise","all","executeNode","execute","nodeId","argumentName","prevNode","hasParameter","addProcessParameter","getCallbackParameters","getParameter","getProcessParameters","includeUndefined","slice","refs","ref","processParam","forEach","child","getStartNodeIds","getNodeCount","getNodes","getErrors","get","CommonProcessRegistry","CommonUtils","checkProcess","checkCallbacks","getFromProcess","getFromCallbacks","store","unique","hasOwnProperty","render","_vm","_c","_self","class","classes","attrs","on","onMouseMove","onMouseDown","onMouseWheel","onKeyDown","$event","hasFocus","staticClass","_l","edge","parameter1","parameter2","selected","inactive","issues","state","mount","updateEdgePos","_b","linkingLine","_e","selectRect","block","position","origin","updateBlock","startDragBlock","scale","showZoomInfo","_v","parameterViewer","staticRenderFns","containerClasses","style","_k","keyCode","preventDefault","stopPropagation","button","apply","emitDrag","plainTitle","directives","rawName","expression","_s","focus","allowsDescription","showDescriptionField","addDescription","remove","showInfo","isParameter","edit","refInFor","updateArgument","edgesChanged","outputLabel","updateResult","editable","domProps","updateDescription","_g","circleClasses","circleListeners","textListeners","displayLabel","displayValue","props","String","Boolean","label","edges","computed","ProcessSchema","hasValue","allowsArgumentChange","click","openEditorForArguments","listeners","mousedown","event","which","root","link","dblclick","$emit","mouseover","linkFrom","mouseout","linkTo","unlink","getEdgeCount","unspecified","$parent","invalid","hasProcesses","maxLength","formattedValue","isEditable","compactMode","formatValue","isArrayType","nativeDataType","isObjectType","allowsMultipleInputs","watch","updateEdgeStatus","immediate","handler","methods","isEdgeUsed","getCirclePosition","dim","domBoundingBox","$refs","circle","blocksDim","getDimensions","x","offsetLeft","width","y","offsetTop","height","console","warn","showArguments","jsonSchema","setValue","resetValue","nullable","dataType","getEdgeRef","addRefToValue","propertyCount","removeRefFromValue","removeRefFromValueDeep","splice","addEdge","eraseEdge","k","$delete","hasRefInValue","formatProcess","html","formatArray","formatObject","text","substr","toString","JSON","stringify","parts","formatted","unformatted","formatArraySimple","join","title","west","east","south","north","component","defaultScale","blockWidth","compactParams","compact","normalParams","normal","defaultFontSize","components","BlockParameter","drag","styles","marginLeft","Math","round","center","marginTop","fontSize","showId","collectionId","processId","collection","allowsParameterChange","supports","allowsDelete","allowsInfo","hasParametersDefined","names","ProcessParameter","fields","mounted","draggingFn","dragging","bind","document","addEventListener","stopDragFn","stopDrag","beforeDestroy","removeEventListener","editParameter","elem","composedPath","updatePosition","pos","saveHistory","updateArguments","removeParameters","hasOutputEdges","select","shiftKey","unselectOthers","div","$nextTick","descriptionField","getDragPos","mouse","startDrag","mousePos","getMousePos","delta","abs","drapPos","removeBlock","getBlockParameter","params","isParameterScoped","referenceName","parameterBlock","cbParams","cbParam","hiddenParameterRef","globalParam","argName","r","line","Segment","dx","dy","distance","point1","point2","sqrt","pow","distanceP","point","intersection","alpha","d","b0","b1","det","r1","r2","lineWidth","Number","lineColor","position1","position2","segment","scaledLineWidth","lines","xM","yM","PI","cos","sin","cosB","sinB","norm","arrowLength","xA","yA","lineStyle","getLineStyle","arrowStyle","mainLine","getLine","updatePositions","created","pos1","pos2","freeze","dashed","dashLength","color","x1","y1","x2","y2","settings","collide","dp","equals","getDefaultState","blocks","moving","selecting","MARGIN","selectionChangeWatcher","newVal","oldVal","every","selectedBlocks","selectedEdges","Block","Edge","ParameterViewer","processes","parentSchema","historySize","explicitZoom","isMounted","allMounted","newBlockOffset","history","historyPointer","hiddenParameterRefEdges","nextBlockId","nextEdgeId","clipboard","activeTransactions","min","current","start","processBlocks","selectedSideEdge","selectedParameter","hasSelection","processParametersFromSchemas","parentParams","getPgParameters","callbackParams","filteredParentParams","p1","p2","importPgParameters","BlocksProcess","import","propagate","undoOnError","updateHiddenParameterRefEdges","checkAllMounted","beforeCreate","$on","showParameterViewer","moveCenter","onDocumentMouseUpFn","onDocumentMouseUp","perfectScale","$el","updateBlockArguments","removedParams","parameterRemoved","$set","commit","refreshEdges","updateBlockDescription","updateBlockPos","updateBlockResult","updateBlockSelected","unselectAll","updateBlockSpec","parameterFields","newBlock","extra","setResultNode","hiddenRefs","getPgParameterById","parameterNames","removeEdge","refreshEdgesFor","$listeners","multiSelect","box","export","selectEdge","allInputs","querySelectorAll","el","activeElement","captured","deleteSelected","ctrlKey","metaKey","navigator","readText","json","writeText","dX","dY","deltaScale","sign","deltaY","rect","getBoundingClientRect","top","max","documentElement","scrollTop","body","left","scrollLeft","clientX","clientY","sideSelected","issue","startTransaction","historyStep","step","index","element","getBlockById","foundNewResultNode","hasOtherBlocks","getPositionForPageXY","addProcess","addBlock","num","incrementId","getBlockSize","getNewBlockDefaultPosition","blockSize","inputs","commentHeight","conflictBlock","otherBlock","blockId","b2","allSuccessors","outputParameter","explored","exploreList","currentBlock","pop","block1","target","block2","internal","parameterBlocks","fn","options","success","undo","error2","clear","setParent","parentProcessId","parentParameterName","importNodes","importEdges","addPgParameter","val","addEdgeByNames","importEdgeDeep","imported","nextNodes","maxX","prev","int","isNaN","xMin","xMax","yMin","yMax","scaleA","scaleB","selectParameterName","saveCallback","compileSchema","resolve","Cache","SchemaObject","stableStringify","formats","rules","$dataMetaSchema","util","prototype","compile","addMetaSchema","validateSchema","getSchema","removeSchema","addFormat","errorsText","_addSchema","_compile","compileAsync","customKeyword","getKeyword","removeKeyword","validateKeyword","errorClasses","Validation","MissingRefError","MissingRef","META_SCHEMA_ID","META_IGNORE_OPTIONS","META_SUPPORT_DATA","opts","_opts","setLogger","_schemas","_refs","_fragments","_formats","_cache","cache","_loadingSchemas","_compilations","RULES","_getId","chooseGetId","loopRequired","Infinity","errorDataPath","_errorDataPathProperty","serialize","_metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addDefaultMetaSchema","meta","addInitialSchemas","schemaKeyRef","schemaObj","_meta","_skipValidation","normalizeId","checkUnique","skipValidation","throwOrLogError","defaultMeta","logger","self","keyRef","_getSchemaObj","_getSchemaFragment","res","call","baseId","fragment","RegExp","_removeAllSchemas","del","cacheKey","regex","shouldAddSchema","cached","recursiveMeta","willValidate","localRefs","ids","put","compiling","callValidate","currentOpts","refVal","_validate","_get$IdOrId","_get$Id","$id","separator","dataVar","dataPath","$dataSchema","$data","optsSchemas","keyword","metaOpts","log","noop","callback","loadSchema","loadMetaSchemaOf","then","_compileAsync","sch","$ref","loadMissingSchema","missingSchema","added","missingRef","schemaPromise","removePromise","validation","url","fullPath","errorSubclass","Subclass","create","DATE","DAYS","TIME","HOSTNAME","URI","URIREF","URITEMPLATE","URL","UUID","JSON_POINTER","JSON_POINTER_URI_FRAGMENT","RELATIVE_JSON_POINTER","mode","isLeapYear","year","date","str","matches","match","month","day","time","full","hour","minute","second","timeZone","fast","uri","email","hostname","ipv4","ipv6","uuid","date_time","DATE_TIME_SEPARATOR","dateTime","split","NOT_URI_FRAGMENT","Z_ANCHOR","validateGenerator","ucs2length","equal","patterns","patternsHash","defaults","defaultsHash","customRules","checkCompiling","compilation","localCompile","cv","sourceCode","endCompiling","_schema","_root","isRoot","isTop","schemaPath","errSchemaPath","errorPath","resolveRef","usePattern","useDefault","useCustomRule","vars","refValCode","patternCode","defaultCode","customRuleCode","processCode","makeValidate","Function","_refVal","refCode","refIndex","resolvedRef","rootRefId","addLocalRef","localSchema","inlineRef","inlineRefs","replaceLocalRef","removeLocalRef","refId","inline","regexStr","toQuotedString","valueStr","rule","it","deps","definition","macro","compIndex","arr","statement","traverse","resolveSchema","refPath","_getFullPath","getFullPath","resolveRecursive","getJsonPointer","parsedRef","resolveUrl","resolveIds","PREVENT_SCOPE_CHANGE","toHash","part","unescapeFragment","SIMPLE_INLINED","limit","checkNoRef","countKeys","item","normalize","TRAILING_SLASH_HASH","baseIds","fullPaths","allKeys","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","keyIndex","escapeFragment","ruleModules","ALL","KEYWORDS","TYPES","types","group","implKeywords","implements","$comment","custom","obj","len","charCodeAt","o","to","checkDataType","strictNumbers","negate","EQUAL","AND","OK","NOT","checkDataTypes","dataTypes","t","array","object","null","number","integer","coerceToTypes","getProperty","escapeQuotes","varOccurences","varReplace","schemaHasRules","schemaHasRulesExcept","schemaUnknownRules","getPathExpr","getPath","getData","unescapeJsonPointer","escapeJsonPointer","COERCE_TO_TYPES","optionCoerceTypes","hash","IDENTIFIER","SINGLE_QUOTE","expr","exceptKeyword","currentPath","jsonPointers","isNumber","joinPaths","prop","lvl","paths","up","jsonPointer","segments","decodeURIComponent","encodeURIComponent","keywordsJsonPointers","j","simpleTypes","statements","not","modifying","const","$keyword","$ruleType","$schemaValue","out","$lvl","level","$dataLvl","dataLevel","$schemaPath","$errSchemaPath","$breakOnError","allErrors","$isData","dataPathArr","$isMax","$exclusiveKeyword","$schemaExcl","$isDataExcl","$op","$notOp","$errorKeyword","$schemaValueExcl","$exclusive","$exclType","$exclIsNumber","$opExpr","$opStr","$$outStack","createErrors","messages","verbose","__err","compositeRule","unicode","$it","$closingBraces","$nextValid","$currentBaseId","$allSchemasEmpty","arr1","$sch","$i","l1","strictKeywords","$valid","$errs","$noEmptySchema","$wasComposite","$idx","$dataNxt","$nextData","$nonEmptySchema","$passData","$code","$compile","$inline","$macro","$ruleValidate","$validateCode","$rule","$definition","$rDef","$validateSchema","$ruleErrs","$ruleErr","$asyncKeyword","passContext","$parentData","$parentDataProperty","def_callRuleValidate","def_customError","$schemaDeps","$propertyDeps","$ownProperties","ownProperties","$property","$deps","$currentErrorPath","$propertyKey","$prop","$useData","$propertyPath","$missingProperty","arr2","i2","l2","$vSchema","$unknownFormats","unknownFormats","$allowUnknown","$format","$isObject","$formatType","$formatRef","$thenSch","$elseSch","$thenPresent","$elsePresent","$ifClause","allOf","contains","maximum","minimum","maxItems","minItems","minLength","maxProperties","minProperties","multipleOf","propertyNames","uniqueItems","$additionalItems","additionalItems","$currErrSchemaPath","multipleOfPrecision","$allErrorsOption","$prevValid","$passingSchemas","$regexp","$key","$dataProperties","$schemaKeys","notProto","$pProperties","patternProperties","$pPropertyKeys","$aProperties","additionalProperties","$someProperties","$noAdditional","$additionalIsSchema","$removeAdditional","removeAdditional","$checkAdditional","$required","$requiredHash","i1","$pProperty","$additionalProperty","$useDefaults","useDefaults","arr3","i3","l3","$hasDefault","arr4","i4","l4","$invalidName","$refCode","$refVal","$message","missingRefs","__callValidate","$propertySch","$loopRequired","$itemType","$typeIsArray","$method","$refKeywords","$unknownKwd","$keywordsMsg","$top","rootId","strictDefaults","$defaultMsg","$closingBraces1","$closingBraces2","$typeSchema","extendRefs","coerceTypes","$coerceToTypes","$rulesGroup","$shouldUseGroup","$dataType","$coerced","$type","arr5","i5","l5","$shouldUseRule","$ruleImplementsSomeKeyword","impl","definitionSchema","_addRule","ruleGroup","rg","throwError","_validateKeyword","flags","valueOf","cmp","cycles","f","aobj","bobj","seen","isFinite","TypeError","seenIndex","w1","h1","w2","h2","lineBox","xb","yb","wb","hb","boxPoint","lineLine","lineToPolygon","polygonPolygon","linePolygon","lineToLine","lineLineThickness","x3","y3","x4","y4","thickness1","thickness2","distanceSquared","xp","yp","tolerance","polygonPoint","points","s1_x","s1_y","s2_x","s2_y","s","thickness","angle","atan2","half","linePoint","p2x","p2y","p1x","p1y","points1","points2","minA","maxA","projected","minB","maxB","polygons","polygon","cb","pre","post","_traverse","arrayKeywords","propsKeywords","escapeJsonPtr","skipKeywords","enum","exclusiveMaximum","exclusiveMinimum","global","factory","_len","sets","_key","xl","subexp","typeOf","toArray","setInterval","buildExps","isIRI","ALPHA$$","DIGIT$$","HEXDIG$$","PCT_ENCODED$","GEN_DELIMS$$","SUB_DELIMS$$","RESERVED$$","UCSCHAR$$","IPRIVATE$$","UNRESERVED$$","SCHEME$","USERINFO$","DEC_OCTET_RELAXED$","IPV4ADDRESS$","H16$","LS32$","IPV6ADDRESS1$","IPV6ADDRESS2$","IPV6ADDRESS3$","IPV6ADDRESS4$","IPV6ADDRESS5$","IPV6ADDRESS6$","IPV6ADDRESS7$","IPV6ADDRESS8$","IPV6ADDRESS9$","IPV6ADDRESS$","ZONEID$","IPV6ADDRZ_RELAXED$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","NOT_SCHEME","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","OTHER_CHARS","PCT_ENCODED","IPV4ADDRESS","IPV6ADDRESS","URI_PROTOCOL","IRI_PROTOCOL","slicedToArray","sliceIterator","_arr","_n","_d","_i","Symbol","iterator","next","done","err","toConsumableArray","from","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","floor","stringFromCharCode","fromCharCode","error$1","RangeError","mapDomain","string","labels","encoded","ucs2decode","counter","ucs2encode","fromCodePoint","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","numPoints","firstTime","decode","inputLength","n","bias","basic","lastIndexOf","oldi","w","baseMinusT","encode","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_currentValue2","return","basicLength","handledCPCount","m","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","currentValue","handledCPCountPlusOne","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_currentValue","q","qMinusT","toUnicode","toASCII","punycode","SCHEMES","pctEncChar","chr","pctDecChars","newStr","il","c2","c3","_normalizeComponentEncoding","protocol","decodeUnreserved","decStr","scheme","userinfo","host","query","_stripLeadingZeros","_normalizeIPv4","_matches","address","_normalizeIPv6","_matches2","zone","_address$toLowerCase$","reverse","_address$toLowerCase$2","firstFields","lastFields","isLastFieldIPv4Address","fieldCount","lastFieldsStart","allZeroFields","reduce","acc","field","lastLongest","longestZeroFields","newHost","newFirst","newLast","URI_PARSE","NO_MATCH_IS_UNDEFINED","uriString","iri","reference","port","schemeHandler","unicodeSupport","domainHost","_recomposeAuthority","uriTokens","_","$1","$2","RDS1","RDS2","RDS3","RDS5","removeDotSegments","im","authority","charAt","absolutePath","resolveComponents","relative","skipNormalization","tolerant","baseURI","relativeURI","schemelessOptions","uriA","uriB","escapeComponent","unescapeComponent","secure","handler$1","isSecure","wsComponents","handler$2","resourceName","_wsComponents$resourc","_wsComponents$resourc2","handler$3","O","ATEXT$$","QTEXT$$","VCHAR$$","SOME_DELIMS$$","NOT_LOCAL_PART","NOT_HFNAME","NOT_HFVALUE","handler$4","mailtoComponents","unknownHeaders","headers","hfields","hfield","toAddrs","_x","_xl","subject","_x2","_xl2","addr","toAddr","atIdx","localPart","domain","URN_PARSE","handler$5","urnComponents","nid","nss","urnScheme","uriComponents","handler$6","uuidComponents","defineProperty"],"sourceRoot":""}